!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="./",e(e.s=0)}({"+bp/":function(t,e,n){"use strict";(function(t){function r(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}function i(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function o(t){if(t instanceof ArrayBuffer)return i(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}function u(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&Si.call(n)==ki}function s(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=s(t[n]);return e}if(t instanceof Date)return t.toISOString();if(r(t))return o(t);if(!u(t))return t;e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=s(t[n]);void 0!==a&&(e[n]=a)}return e}function a(t){var e=!1;return ci()(function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)})}function c(t){return ci()(function(e){e=s(e);var n=this,r="function"==typeof e[e.length-1]&&e.pop(),i=new bi(function(r,i){var o;try{var u=a(function(t,e){t?i(t):r(e)});e.push(u),o=t.apply(n,e),o&&"function"==typeof o.then&&r(o)}catch(t){i(t)}});return r&&i.then(function(t){r(null,t)},r),i})}function f(t,e,n){if(t.constructor.listeners("debug").length){for(var r=["api",t.name,e],i=0;i<n.length-1;i++)r.push(n[i]);t.constructor.emit("debug",r);var o=n[n.length-1];n[n.length-1]=function(n,r){var i=["api",t.name,e];i=i.concat(n?["error",n]:["success",r]),t.constructor.emit("debug",i),o(n,r)}}}function h(t,e){return c(ci()(function(n){if(this._closed)return bi.reject(new Error("database is closed"));if(this._destroyed)return bi.reject(new Error("database is destroyed"));var r=this;return f(r,t,n),this.taskqueue.isReady?e.apply(this,n):new bi(function(e,i){r.taskqueue.addTask(function(o){o?i(o):e(r[t].apply(r,n))})})}))}function l(t){return"$"+t}function p(t){return t.substring(1)}function d(){this._store={}}function v(t){if(this._store=new d,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}function _(t,e){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];o in t&&(n[o]=t[o])}return n}function y(t){return t}function g(t){return[{ok:t}]}function m(t,e,n){function r(){var t=[];l.forEach(function(e){e.docs.forEach(function(n){t.push({id:e.id,docs:[n]})})}),n(null,{results:t})}function i(){++h===f&&r()}function o(t,e,n){l[t]={id:e,docs:n},i()}function u(){if(!(d>=p.length)){var t=Math.min(d+xi,p.length),e=p.slice(d,t);s(e,d),d+=e.length}}function s(n,r){n.forEach(function(n,i){var s=r+i,a=c.get(n),f=_(a[0],["atts_since","attachments"]);f.open_revs=a.map(function(t){return t.rev}),f.open_revs=f.open_revs.filter(y);var h=y;0===f.open_revs.length&&(delete f.open_revs,h=g),["revs","attachments","binary","ajax","latest"].forEach(function(t){t in e&&(f[t]=e[t])}),t.get(n,f,function(t,e){var r;r=t?[{error:t}]:h(e),o(s,n,r),u()})})}var a=e.docs,c=new Ii;a.forEach(function(t){c.has(t.id)?c.get(t.id).push(t):c.set(t.id,[t])});var f=c.size,h=0,l=new Array(f),p=[];c.forEach(function(t,e){p.push(e)});var d=0;u()}function w(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}function b(){return Oi}function S(t){w()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):b()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function k(){fi.EventEmitter.call(this),this._listeners={},S(this)}function E(t){if("undefined"!==console&&t in console){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function I(t,e){return t=parseInt(t,10)||0,e=parseInt(e,10),e!==e||e<=t?e=(t||1)<<1:e+=1,e>6e5&&(t=3e5,e=6e5),~~((e-t)*Math.random()+t)}function O(t){var e=0;return t||(e=2e3),I(t,e)}function x(t,e){E("info","The above "+t+" is totally normal. "+e)}function q(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}function A(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=q.prototype,new n(e)}function j(t){if("object"!=typeof t){var e=t;t=Ci,t.data=e}return"error"in t&&"conflict"===t.error&&(t.name="conflict",t.status=409),"name"in t||(t.name=t.error||"unknown"),"status"in t||(t.status=500),"message"in t||(t.message=t.message||t.reason),t}function L(t,e,n){try{return!t(e,n)}catch(t){var r="Filter function threw: "+t.toString();return A($i,r)}}function D(t){var e={},n=t.filter&&"function"==typeof t.filter;return e.query=t.query_params,function(r){r.doc||(r.doc={});var i=n&&L(t.filter,r.doc,e);if("object"==typeof i)return i;if(i)return!1;if(t.include_docs){if(!t.attachments)for(var o in r.doc._attachments)r.doc._attachments.hasOwnProperty(o)&&(r.doc._attachments[o].stub=!0)}else delete r.doc;return!0}}function z(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function T(){}function R(t){var e;if(t?"string"!=typeof t?e=A(zi):/^_/.test(t)&&!/^_(design|local)/.test(t)&&(e=A(Ri)):e=A(Ti),e)throw e}function C(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(E("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function N(t,e){return"listenerCount"in t?t.listenerCount(e):fi.EventEmitter.listenerCount(t,e)}function M(t){if(!t)return null;var e=t.split("/");return 2===e.length?e:1===e.length?[t,t]:null}function B(t){var e=M(t);return e?e.join("/"):null}function $(t){for(var e=Gi.exec(t),n={},r=14;r--;){var i=Hi[r],o=e[r]||"",u=-1!==["user","password"].indexOf(i);n[i]=u?decodeURIComponent(o):o}return n[Vi]={},n[Hi[12]].replace(Xi,function(t,e,r){e&&(n[Vi][e]=r)}),n}function U(t,e){var n=[],r=[];for(var i in e)e.hasOwnProperty(i)&&(n.push(i),r.push(e[i]));return n.push(t),Function.apply(null,n).apply(null,r)}function P(t,e,n){return new bi(function(r,i){t.get(e,function(o,u){if(o){if(404!==o.status)return i(o);u={}}var s=u._rev,a=n(u);if(!a)return r({updated:!1,rev:s});a._id=e,a._rev=s,r(F(t,a,n))})})}function F(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(r){if(409!==r.status)throw r;return P(t,e._id,n)})}function K(){return oi.a.v4().replace(/-/g,"").toLowerCase()}function W(t){for(var e,n,r,i,o=t.rev_tree.slice();i=o.pop();){var u=i.ids,s=u[2],a=i.pos;if(s.length)for(var c=0,f=s.length;c<f;c++)o.push({pos:a+1,ids:s[c]});else{var h=!!u[1].deleted,l=u[0];e&&!(r!==h?r:n!==a?n<a:e<l)||(e=l,n=a,r=h)}}return n+"-"+e}function J(t,e){for(var n,r=t.slice();n=r.pop();)for(var i=n.pos,o=n.ids,u=o[2],s=e(0===u.length,i,o[0],n.ctx,o[1]),a=0,c=u.length;a<c;a++)r.push({pos:i+1,ids:u[a],ctx:s})}function H(t,e){return t.pos-e.pos}function V(t){var e=[];J(t,function(t,n,r,i,o){t&&e.push({rev:n+"-"+r,pos:n,opts:o})}),e.sort(H).reverse();for(var n=0,r=e.length;n<r;n++)delete e[n].pos;return e}function X(t){for(var e=W(t),n=V(t.rev_tree),r=[],i=0,o=n.length;i<o;i++){var u=n[i];u.rev===e||u.opts.deleted||r.push(u.rev)}return r}function G(t){var e=[];return J(t.rev_tree,function(t,n,r,i,o){"available"!==o.status||t||(e.push(n+"-"+r),o.status="missing")}),e}function Q(t){for(var e,n=[],r=t.slice();e=r.pop();){var i=e.pos,o=e.ids,u=o[0],s=o[1],a=o[2],c=0===a.length,f=e.history?e.history.slice():[];f.push({id:u,opts:s}),c&&n.push({pos:i+1-f.length,ids:f});for(var h=0,l=a.length;h<l;h++)r.push({pos:i+1,ids:a[h],history:f})}return n.reverse()}function Y(t,e){return t.pos-e.pos}function Z(t,e,n){for(var r,i=0,o=t.length;i<o;)r=i+o>>>1,n(t[r],e)<0?i=r+1:o=r;return i}function tt(t,e,n){t.splice(Z(t,e,n),0,e)}function et(t,e){for(var n,r,i=e,o=t.length;i<o;i++){var u=t[i],s=[u.id,u.opts,[]];r?(r[2].push(s),r=s):n=r=s}return n}function nt(t,e){return t[0]<e[0]?-1:1}function rt(t,e){for(var n=[{tree1:t,tree2:e}],r=!1;n.length>0;){var i=n.pop(),o=i.tree1,u=i.tree2;(o[1].status||u[1].status)&&(o[1].status="available"===o[1].status||"available"===u[1].status?"available":"missing");for(var s=0;s<u[2].length;s++)if(o[2][0]){for(var a=!1,c=0;c<o[2].length;c++)o[2][c][0]===u[2][s][0]&&(n.push({tree1:o[2][c],tree2:u[2][s]}),a=!0);a||(r="new_branch",tt(o[2],u[2][s],nt))}else r="new_leaf",o[2][0]=u[2][s]}return{conflicts:r,tree:t}}function it(t,e,n){var r,i=[],o=!1,u=!1;if(!t.length)return{tree:[e],conflicts:"new_leaf"};for(var s=0,a=t.length;s<a;s++){var c=t[s];if(c.pos===e.pos&&c.ids[0]===e.ids[0])r=rt(c.ids,e.ids),i.push({pos:c.pos,ids:r.tree}),o=o||r.conflicts,u=!0;else if(!0!==n){var f=c.pos<e.pos?c:e,h=c.pos<e.pos?e:c,l=h.pos-f.pos,p=[],d=[];for(d.push({ids:f.ids,diff:l,parent:null,parentIdx:null});d.length>0;){var v=d.pop();if(0!==v.diff)for(var _=v.ids[2],y=0,g=_.length;y<g;y++)d.push({ids:_[y],diff:v.diff-1,parent:v.ids,parentIdx:y});else v.ids[0]===h.ids[0]&&p.push(v)}var m=p[0];m?(r=rt(m.ids,h.ids),m.parent[2][m.parentIdx]=r.tree,i.push({pos:f.pos,ids:f.ids}),o=o||r.conflicts,u=!0):i.push(c)}else i.push(c)}return u||i.push(e),i.sort(Y),{tree:i,conflicts:o||"internal_node"}}function ot(t,e){for(var n,r,i=Q(t),o=0,u=i.length;o<u;o++){var s,a=i[o],c=a.ids;if(c.length>e){n||(n={});var f=c.length-e;s={pos:a.pos+f,ids:et(c,f)};for(var h=0;h<f;h++){n[a.pos+h+"-"+c[h].id]=!0}}else s={pos:a.pos,ids:et(c,0)};r=r?it(r,s,!0).tree:[s]}return n&&J(r,function(t,e,r){delete n[e+"-"+r]}),{tree:r,revs:n?Object.keys(n):[]}}function ut(t,e,n){var r=it(t,e),i=ot(r.tree,n);return{tree:i.tree,stemmedRevs:i.revs,conflicts:r.conflicts}}function st(t,e){for(var n,r=t.slice(),i=e.split("-"),o=parseInt(i[0],10),u=i[1];n=r.pop();){if(n.pos===o&&n.ids[0]===u)return!0;for(var s=n.ids[2],a=0,c=s.length;a<c;a++)r.push({pos:n.pos+1,ids:s[a]})}return!1}function at(t){return t.ids}function ct(t,e){e||(e=W(t));for(var n,r=e.substring(e.indexOf("-")+1),i=t.rev_tree.map(at);n=i.pop();){if(n[0]===r)return!!n[1].deleted;i=i.concat(n[2])}}function ft(t){return/^_local/.test(t)}function ht(t,e){for(var n,r=e.rev_tree.slice();n=r.pop();){var i=n.pos,o=n.ids,u=o[0],s=o[1],a=o[2],c=0===a.length,f=n.history?n.history.slice():[];if(f.push({id:u,pos:i,opts:s}),c)for(var h=0,l=f.length;h<l;h++){var p=f[h],d=p.pos+"-"+p.id;if(d===t)return i+"-"+u}for(var v=0,_=a.length;v<_;v++)r.push({pos:i+1,ids:a[v],history:f})}throw new Error("Unable to resolve latest revision for id "+e.id+", rev "+t)}function lt(t,e){try{t.emit("change",e)}catch(t){E("error",'Error in .on("change", function):',t)}}function pt(t,e,n){function r(){i.cancel()}fi.EventEmitter.call(this);var i=this;this.db=t,e=e?s(e):{};var o=e.complete=a(function(e,n){e?N(i,"error")>0&&i.emit("error",e):i.emit("complete",n),i.removeAllListeners(),t.removeListener("destroyed",r)});n&&(i.on("complete",function(t){n(null,t)}),i.on("error",n)),t.once("destroyed",r),e.onChange=function(t){i.isCancelled||lt(i,t)};var u=new bi(function(t,n){e.complete=function(e,r){e?n(e):t(r)}});i.once("cancel",function(){t.removeListener("destroyed",r),e.complete(null,{status:"cancelled"})}),this.then=u.then.bind(u),this.catch=u.catch.bind(u),this.then(function(t){o(null,t)},o),t.taskqueue.isReady?i.validateChanges(e):t.taskqueue.addTask(function(t){t?e.complete(t):i.isCancelled?i.emit("cancel"):i.validateChanges(e)})}function dt(t,e,n){var r=[{rev:t._rev}];"all_docs"===n.style&&(r=V(e.rev_tree).map(function(t){return{rev:t.rev}}));var i={id:e.id,changes:r,doc:t};return ct(e,t._rev)&&(i.deleted=!0),n.conflicts&&(i.doc._conflicts=X(e),i.doc._conflicts.length||delete i.doc._conflicts),i}function vt(t,e){return t<e?-1:t>e?1:0}function _t(t,e){return function(n,r){n||r[0]&&r[0].error?(n=n||r[0],n.docId=e,t(n)):t(null,r.length?r[0]:r)}}function yt(t){for(var e=0;e<t.length;e++){var n=t[e];if(n._deleted)delete n._attachments;else if(n._attachments)for(var r=Object.keys(n._attachments),i=0;i<r.length;i++){var o=r[i];n._attachments[o]=_(n._attachments[o],["data","digest","content_type","length","revpos","stub"])}}}function gt(t,e){var n=vt(t._id,e._id);return 0!==n?n:vt(t._revisions?t._revisions.start:0,e._revisions?e._revisions.start:0)}function mt(t){var e={},n=[];return J(t,function(t,r,i,o){var u=r+"-"+i;return t&&(e[u]=0),void 0!==o&&n.push({from:o,to:u}),u}),n.reverse(),n.forEach(function(t){e[t.from]=void 0===e[t.from]?1+e[t.to]:Math.min(e[t.from],1+e[t.to])}),e}function wt(t,e,n){var r="limit"in e?e.keys.slice(e.skip,e.limit+e.skip):e.skip>0?e.keys.slice(e.skip):e.keys;if(e.descending&&r.reverse(),!r.length)return t._allDocs({limit:0},n);var i={offset:e.skip};return bi.all(r.map(function(n){var r=Ai({key:n,deleted:"ok"},e);return["limit","skip","keys"].forEach(function(t){delete r[t]}),new bi(function(e,o){t._allDocs(r,function(t,r){if(t)return o(t);i.total_rows=r.total_rows,e(r.rows[0]||{key:n,error:"not_found"})})})})).then(function(t){return i.rows=t,i})}function bt(t){var e=t._compactionQueue[0],n=e.opts,r=e.callback;t.get("_local/compaction").catch(function(){return!1}).then(function(e){e&&e.last_seq&&(n.last_seq=e.last_seq),t._compact(n,function(e,n){e?r(e):r(null,n),di()(function(){t._compactionQueue.shift(),t._compactionQueue.length&&bt(t)})})})}function St(t){return"_"===t.charAt(0)&&t+" is not a valid attachment name, attachment names cannot start with '_'"}function kt(){fi.EventEmitter.call(this)}function Et(){this.isReady=!1,this.failed=!1,this.queue=[]}function It(t,e){var n=t.match(/([a-z-]*):\/\/(.*)/);if(n)return{name:/https?/.test(n[1])?n[1]+"://"+n[2]:n[2],adapter:n[1]};var r=xt.adapters,i=xt.preferredAdapters,o=xt.prefix,u=e.adapter;if(!u)for(var s=0;s<i.length;++s){u=i[s];{if(!("idb"===u&&"websql"in r&&b()&&localStorage["_pouch__websqldb_"+o+t]))break;E("log",'PouchDB is downgrading "'+t+'" to WebSQL to avoid data loss, because it was already opened with WebSQL.')}}var a=r[u];return{name:a&&"use_prefix"in a&&!a.use_prefix?t:o+t,adapter:u}}function Ot(t){function e(e){t.removeListener("closed",n),e||t.constructor.emit("destroyed",t.name)}function n(){t.removeListener("destroyed",e),t.constructor.emit("unref",t)}t.once("destroyed",e),t.once("closed",n),t.constructor.emit("ref",t)}function xt(t,e){if(!(this instanceof xt))return new xt(t,e);var n=this;if(e=e||{},t&&"object"==typeof t&&(e=t,t=e.name,delete e.name),this.__opts=e=s(e),n.auto_compaction=e.auto_compaction,n.prefix=xt.prefix,"string"!=typeof t)throw new Error("Missing/invalid DB name");var r=(e.prefix||"")+t,i=It(r,e);if(e.name=i.name,e.adapter=e.adapter||i.adapter,n.name=t,n._adapter=e.adapter,xt.emit("debug",["adapter","Picked adapter: ",e.adapter]),!xt.adapters[e.adapter]||!xt.adapters[e.adapter].valid())throw new Error("Invalid Adapter: "+e.adapter);kt.call(n),n.taskqueue=new Et,n.adapter=e.adapter,xt.adapters[e.adapter].call(n,e,function(t){if(t)return n.taskqueue.fail(t);Ot(n),n.emit("created",n),xt.emit("created",n.name),n.taskqueue.ready(n)})}function qt(t){t.debug=_i.a;var e={};t.on("debug",function(t){var n=t[0],r=t.slice(1);e[n]||(e[n]=_i()("pouchdb:"+n)),e[n].apply(null,r)})}function At(t,e){for(var n=t,r=0,i=e.length;r<i;r++){if(!(n=n[e[r]]))break}return n}function jt(t,e){return t<e?-1:t>e?1:0}function Lt(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var o=t[r];"."===o?r>0&&"\\"===t[r-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}function Dt(t){return Zi.indexOf(t)>-1}function zt(t){return Object.keys(t)[0]}function Tt(t){return t[zt(t)]}function Rt(t){var e={};return t.forEach(function(t){Object.keys(t).forEach(function(n){var r=t[n];if("object"!=typeof r&&(r={$eq:r}),Dt(n))e[n]=r instanceof Array?r.map(function(t){return Rt([t])}):Rt([r]);else{var i=e[n]=e[n]||{};Object.keys(r).forEach(function(t){var e=r[t];return"$gt"===t||"$gte"===t?Ct(t,e,i):"$lt"===t||"$lte"===t?Nt(t,e,i):"$ne"===t?Mt(e,i):"$eq"===t?Bt(e,i):void(i[t]=e)})}})}),e}function Ct(t,e,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}function Nt(t,e,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}function Mt(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}function Bt(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}function $t(t){var e=s(t),n=!1;"$and"in e&&(e=Rt(e.$and),n=!0),["$or","$nor"].forEach(function(t){t in e&&e[t].forEach(function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n],i=t[r];"object"==typeof i&&null!==i||(t[r]={$eq:i})}})}),"$not"in e&&(e.$not=Rt([e.$not]));for(var r=Object.keys(e),i=0;i<r.length;i++){var o=r[i],u=e[o];"object"!=typeof u||null===u?u={$eq:u}:"$ne"in u&&!n&&(u.$ne=[u.$ne]),e[o]=u}return e}function Ut(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}function Pt(t,e,n){return Ut(t,e,n)+t}function Ft(t,e){if(t===e)return 0;t=Kt(t),e=Kt(e);var n=Zt(t),r=Zt(e);if(n-r!=0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return Qt(t,e)}return Array.isArray(t)?Gt(t,e):Yt(t,e)}function Kt(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=Kt(e[r])}else{if(t instanceof Date)return t.toJSON();if(null!==t){t={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];void 0!==o&&(t[i]=Kt(o))}}}}return t}function Wt(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return te(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,o="";if(e)for(;++r<i;)o+=Jt(n[r]);else for(;++r<i;){var u=n[r];o+=Jt(u)+Jt(t[u])}return o}return""}function Jt(t){return t=Kt(t),Zt(t)+no+Wt(t)+"\0"}function Ht(t,e){var n,r=e;if("1"===t[e])n=0,e++;else{var i="0"===t[e];e++;var o="",u=t.substring(e,e+eo),s=parseInt(u,10)+to;for(i&&(s=-s),e+=eo;;){var a=t[e];if("\0"===a)break;o+=a,e++}o=o.split("."),n=1===o.length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:e-r}}function Vt(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===t.length-2){var u=t.pop();i[u]=n}else t.push(n)}}function Xt(t){for(var e=[],n=[],r=0;;){var i=t[r++];if("\0"!==i)switch(i){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var o=Ht(t,r);e.push(o.num),r+=o.length;break;case"4":for(var u="";;){var s=t[r];if("\0"===s)break;u+=s,r++}u=u.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(u);break;case"5":var a={element:[],index:e.length};e.push(a.element),n.push(a);break;case"6":var c={element:{},index:e.length};e.push(c.element),n.push(c);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===e.length)return e.pop();Vt(e,n)}}}function Gt(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=Ft(t[r],e[r]);if(0!==i)return i}return t.length===e.length?0:t.length>e.length?1:-1}function Qt(t,e){return t===e?0:t>e?1:-1}function Yt(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),o=0;o<i;o++){var u=Ft(n[o],r[o]);if(0!==u)return u;if(0!==(u=Ft(t[n[o]],e[r[o]])))return u}return n.length===r.length?0:n.length>r.length?1:-1}function Zt(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);return~n?null===t?1:Array.isArray(t)?5:n<3?n+2:n+3:Array.isArray(t)?5:void 0}function te(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,i=r?"0":"2",o=(r?-n:n)-to,u=Pt(o.toString(),"0",eo);i+=no+u;var s=Math.abs(parseFloat(e[0]));r&&(s=10-s);var a=s.toFixed(20);return a=a.replace(/\.?0+$/,""),i+=no+a}function ee(t){function e(e){return t.map(function(t){var n=zt(t),r=Lt(n);return At(e,r)})}return function(t,n){var r=e(t.doc),i=e(n.doc),o=Ft(r,i);return 0!==o?o:jt(t.doc._id,n.doc._id)}}function ne(t,e,n){if(t=t.filter(function(t){return re(t.doc,e.selector,n)}),e.sort){t=t.sort(ee(e.sort)),"string"!=typeof e.sort[0]&&"desc"===Tt(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var r=e.skip||0;t=t.slice(r,("limit"in e?e.limit:t.length)+r)}return t}function re(t,e,n){return n.every(function(n){var r=e[n],i=Lt(n),o=At(t,i);return Dt(n)?oe(n,r,t):ie(r,t,i,o)})}function ie(t,e,n,r){return!t||Object.keys(t).every(function(i){return ue(i,e,t[i],n,r)})}function oe(t,e,n){return"$or"===t?e.some(function(t){return re(n,t,Object.keys(t))}):"$not"===t?!re(n,e,Object.keys(e)):!e.find(function(t){return re(n,t,Object.keys(t))})}function ue(t,e,n,r,i){if(!ro[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return ro[t](e,n,r,i)}function se(t){return void 0!==t&&null!==t}function ae(t){return void 0!==t}function ce(t,e){var n=e[0],r=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===r}function fe(t,e){return e.some(function(e){return t instanceof Array?t.indexOf(e)>-1:t===e})}function he(t,e){return e.every(function(e){return t.indexOf(e)>-1})}function le(t,e){return t.length===e}function pe(t,e){return new RegExp(e).test(t)}function de(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}function ve(t,e){if("object"!=typeof e)throw new Error("Selector error: expected a JSON object");e=$t(e);var n={doc:t},r=ne([n],{selector:e},Object.keys(e));return r&&1===r.length}function _e(t){return U('"use strict";\nreturn '+t+";",{})}function ye(t){return U(["return function(doc) {",'  "use strict";',"  var emitted = false;","  var emit = function (a, b) {","    emitted = true;","  };","  var view = "+t+";","  view(doc);","  if (emitted) {","    return true;","  }","};"].join("\n"),{})}function ge(t,e){if(t.selector&&t.filter&&"_selector"!==t.filter){var n="string"==typeof t.filter?t.filter:"function";return e(new Error('selector invalid for filter "'+n+'"'))}e()}function me(t){t.view&&!t.filter&&(t.filter="_view"),t.selector&&!t.filter&&(t.filter="_selector"),t.filter&&"string"==typeof t.filter&&("_view"===t.filter?t.view=B(t.view):t.filter=B(t.filter))}function we(t,e){return e.filter&&"string"==typeof e.filter&&!e.doc_ids&&!C(t.db)}function be(t,e){var n=e.complete;if("_view"===e.filter){if(!e.view||"string"!=typeof e.view){var r=A($i,"`view` filter parameter not found or invalid.");return n(r)}var i=M(e.view);t.db.get("_design/"+i[0],function(r,o){if(t.isCancelled)return n(null,{status:"cancelled"});if(r)return n(j(r));var u=o&&o.views&&o.views[i[1]]&&o.views[i[1]].map;if(!u)return n(A(Li,o.views?"missing json key: "+i[1]:"missing json key: views"));e.filter=ye(u),t.doChanges(e)})}else if(e.selector)e.filter=function(t){return ve(t,e.selector)},t.doChanges(e);else{var o=M(e.filter);t.db.get("_design/"+o[0],function(r,i){if(t.isCancelled)return n(null,{status:"cancelled"});if(r)return n(j(r));var u=i&&i.filters&&i.filters[o[1]];if(!u)return n(A(Li,i&&i.filters?"missing json key: "+o[1]:"missing json key: filters"));e.filter=_e(u),t.doChanges(e)})}}function Se(t){t._changesFilterPlugin={validate:ge,normalize:me,shouldFilter:we,filter:be}}function ke(t){return t.reduce(function(t,e){return t[e]=!0,t},{})}function Ee(t){if(!/^\d+-./.test(t))return A(Ki);var e=t.indexOf("-"),n=t.substring(0,e),r=t.substring(e+1);return{prefix:parseInt(n,10),id:r}}function Ie(t,e){for(var n=t.start-t.ids.length+1,r=t.ids,i=[r[0],e,[]],o=1,u=r.length;o<u;o++)i=[r[o],{status:"missing"},[i]];return[{pos:n,ids:i}]}function Oe(t,e){var n,r,i,o={status:"available"};if(t._deleted&&(o.deleted=!0),e)if(t._id||(t._id=Qi()),r=K(),t._rev){if(i=Ee(t._rev),i.error)return i;t._rev_tree=[{pos:i.prefix,ids:[i.id,{status:"missing"},[[r,o,[]]]]}],n=i.prefix+1}else t._rev_tree=[{pos:1,ids:[r,o,[]]}],n=1;else if(t._revisions&&(t._rev_tree=Ie(t._revisions,o),n=t._revisions.start,r=t._revisions.ids[0]),!t._rev_tree){if(i=Ee(t._rev),i.error)return i;n=i.prefix,r=i.id,t._rev_tree=[{pos:n,ids:[r,o,[]]}]}R(t._id),t._rev=n+"-"+r;var u={metadata:{},data:{}};for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){var a="_"===s[0];if(a&&!oo[s]){var c=A(Bi,s);throw c.message=Bi.message+": "+s,c}a&&!uo[s]?u.metadata[s.slice(1)]=t[s]:u.data[s]=t[s]}return u}function xe(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}function qe(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function Ae(t,e){return xe([qe(t)],{type:e})}function je(t,e){return Ae(so(t),e)}function Le(t){for(var e="",n=new Uint8Array(t),r=n.byteLength,i=0;i<r;i++)e+=String.fromCharCode(n[i]);return e}function De(t,e){if("undefined"==typeof FileReader)return e(Le((new FileReaderSync).readAsArrayBuffer(t)));var n=new FileReader,r="function"==typeof n.readAsBinaryString;n.onloadend=function(t){var n=t.target.result||"";if(r)return e(n);e(Le(n))},r?n.readAsBinaryString(t):n.readAsArrayBuffer(t)}function ze(t,e){De(t,function(t){e(t)})}function Te(t,e){ze(t,function(t){e(ao(t))})}function Re(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}function Ce(t){return ao(t)}function Ne(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.slice(e,n)}function Me(t,e,n,r,i){(n>0||r<e.size)&&(e=Ne(e,n,r)),Re(e,function(e){t.append(e),i()})}function Be(t,e,n,r,i){(n>0||r<e.length)&&(e=e.substring(n,r)),t.appendBinary(e),i()}function $e(t,e){function n(){co(i)}function r(){var t=f.end(!0),n=Ce(t);e(n),f.destroy()}function i(){var e=c*s,i=e+s;c++,c<a?h(f,t,e,i,n):h(f,t,e,i,r)}var o="string"==typeof t,u=o?t.length:t.size,s=Math.min(fo,u),a=Math.ceil(u/s),c=0,f=o?new gi.a:new gi.a.ArrayBuffer,h=o?Be:Me;i()}function Ue(t){return gi.a.hash(t)}function Pe(t){try{return so(t)}catch(t){var e=A(Ni,"Attachment is not a valid base64 string");return{error:e}}}function Fe(t,e,n){var r=Pe(t.data);if(r.error)return n(r.error);t.length=r.length,t.data="blob"===e?Ae(r,t.content_type):"base64"===e?ao(r):r,$e(r,function(e){t.digest="md5-"+e,n()})}function Ke(t,e,n){$e(t.data,function(r){t.digest="md5-"+r,t.length=t.data.size||t.data.length||0,"binary"===e?ze(t.data,function(e){t.data=e,n()}):"base64"===e?Te(t.data,function(e){t.data=e,n()}):n()})}function We(t,e,n){if(t.stub)return n();"string"==typeof t.data?Fe(t,e,n):Ke(t,e,n)}function Je(t,e,n){function r(){o++,t.length===o&&(i?n(i):n())}if(!t.length)return n();var i,o=0;t.forEach(function(t){function n(t){i=t,++u===o.length&&r()}var o=t.data&&t.data._attachments?Object.keys(t.data._attachments):[],u=0;if(!o.length)return r();for(var s in t.data._attachments)t.data._attachments.hasOwnProperty(s)&&We(t.data._attachments[s],e,n)})}function He(t,e,n,r,i,o,u,s){if(st(e.rev_tree,n.metadata.rev))return r[i]=n,o();var a=e.winningRev||W(e),c="deleted"in e?e.deleted:ct(e,a),f="deleted"in n.metadata?n.metadata.deleted:ct(n.metadata),h=/^1-/.test(n.metadata.rev);if(c&&!f&&s&&h){var l=n.data;l._rev=a,l._id=n.metadata.id,n=Oe(l,s)}var p=ut(e.rev_tree,n.metadata.rev_tree[0],t);if(s&&(c&&f&&"new_leaf"!==p.conflicts||!c&&"new_leaf"!==p.conflicts||c&&!f&&"new_branch"===p.conflicts))return r[i]=A(Di),o();var d=n.metadata.rev;n.metadata.rev_tree=p.tree,n.stemmedRevs=p.stemmedRevs||[],e.rev_map&&(n.metadata.rev_map=e.rev_map);var v,_=W(n.metadata),y=ct(n.metadata,_),g=c===y?0:c<y?-1:1;v=d===_?y:ct(n.metadata,d),u(n,_,y,v,!0,g,i,o)}function Ve(t){return"missing"===t.metadata.rev_tree[0].ids[1].status}function Xe(t,e,n,r,i,o,u,s,a){function c(t,e,n){var r=W(t.metadata),i=ct(t.metadata,r);if("was_delete"in s&&i)return o[e]=A(Li,"deleted"),n();if(h&&Ve(t)){var a=A(Di);return o[e]=a,n()}u(t,r,i,i,!1,i?0:1,e,n)}function f(){++p===d&&a&&a()}t=t||1e3;var h=s.new_edits,l=new Ii,p=0,d=e.length;e.forEach(function(t,e){if(t._id&&ft(t._id)){return void n[t._deleted?"_removeLocal":"_putLocal"](t,{ctx:i},function(t,n){o[e]=t||n,f()})}var r=t.metadata.id;l.has(r)?(d--,l.get(r).push([t,e])):l.set(r,[[t,e]])}),l.forEach(function(e,n){function i(){++a<e.length?s():f()}function s(){var s=e[a],f=s[0],l=s[1];if(r.has(n))He(t,r.get(n),f,o,l,i,u,h);else{var p=ut([],f.metadata.rev_tree[0],t);f.metadata.rev_tree=p.tree,f.stemmedRevs=p.stemmedRevs||[],c(f,l,i)}}var a=0;s()})}function Ge(t){try{return JSON.parse(t)}catch(e){return wi.a.parse(t)}}function Qe(t){try{return JSON.stringify(t)}catch(e){return wi.a.stringify(t)}}function Ye(t){return function(e){var n="unknown_error";e.target&&e.target.error&&(n=e.target.error.name||e.target.error.message),t(A(Pi,n,e.type))}}function Ze(t,e,n){return{data:Qe(t),winningRev:e,deletedOrLocal:n?"1":"0",seq:t.seq,id:t.id}}function tn(t){if(!t)return null;var e=Ge(t.data);return e.winningRev=t.winningRev,e.deleted="1"===t.deletedOrLocal,e.seq=t.seq,e}function en(t){if(!t)return t;var e=t._doc_id_rev.lastIndexOf(":");return t._id=t._doc_id_rev.substring(0,e-1),t._rev=t._doc_id_rev.substring(e+1),delete t._doc_id_rev,t}function nn(t,e,n,r){n?r(t?"string"!=typeof t?t:je(t,e):xe([""],{type:e})):t?"string"!=typeof t?De(t,function(t){r(ao(t))}):r(t):r("")}function rn(t,e,n,r){function i(){++s===u.length&&r&&r()}function o(t,e){var r=t._attachments[e],o=r.digest;n.objectStore(vo).get(o).onsuccess=function(t){r.body=t.target.result.body,i()}}var u=Object.keys(t._attachments||{});if(!u.length)return r&&r();var s=0;u.forEach(function(n){e.attachments&&e.include_docs?o(t,n):(t._attachments[n].stub=!0,i())})}function on(t,e){return bi.all(t.map(function(t){if(t.doc&&t.doc._attachments){var n=Object.keys(t.doc._attachments);return bi.all(n.map(function(n){var r=t.doc._attachments[n];if("body"in r){var i=r.body,o=r.content_type;return new bi(function(u){nn(i,o,e,function(e){t.doc._attachments[n]=Ai(_(r,["digest","content_type"]),{data:e}),u()})})}}))}}))}function un(t,e,n){function r(){--c||i()}function i(){o.length&&o.forEach(function(t){a.index("digestSeq").count(IDBKeyRange.bound(t+"::",t+"::￿",!1,!1)).onsuccess=function(e){e.target.result||s.delete(t)}})}var o=[],u=n.objectStore(po),s=n.objectStore(vo),a=n.objectStore(_o),c=t.length;t.forEach(function(t){u.index("_doc_id_rev").getKey(e+"::"+t).onsuccess=function(t){var e=t.target.result;if("number"!=typeof e)return r();u.delete(e),a.index("seq").openCursor(IDBKeyRange.only(e)).onsuccess=function(t){var e=t.target.result;if(e){var n=e.value.digestSeq.split("::")[0];o.push(n),a.delete(e.primaryKey),e.continue()}else r()}}})}function sn(t,e,n){try{return{txn:t.transaction(e,n)}}catch(t){return{error:t}}}function an(t,e,n,r,i,o){function u(){var t=[lo,po,vo,go,_o,yo],e=sn(i,t,"readwrite");if(e.error)return o(e.error);m=e.txn,m.onabort=Ye(o),m.ontimeout=Ye(o),m.oncomplete=h,w=m.objectStore(lo),b=m.objectStore(po),S=m.objectStore(vo),k=m.objectStore(_o),E=m.objectStore(yo),E.get(yo).onsuccess=function(t){O=t.target.result,c()},p(function(t){if(t)return C=!0,o(t);f()})}function s(){D=!0,c()}function a(){Xe(t.revs_limit,x,r,R,m,T,d,n,s)}function c(){O&&D&&(O.docCount+=z,E.put(O))}function f(){function t(){++n===x.length&&a()}function e(e){var n=tn(e.target.result);n&&R.set(n.id,n),t()}if(x.length)for(var n=0,r=0,i=x.length;r<i;r++){var o=x[r];if(o._id&&ft(o._id))t();else{var u=w.get(o.metadata.id);u.onsuccess=e}}}function h(){C||(wo.notify(r._meta.name),o(null,T))}function l(t,e){S.get(t).onsuccess=function(n){if(n.target.result)e();else{var r=A(Wi,"unknown stub attachment with digest "+t);r.status=412,e(r)}}}function p(t){function e(){++i===n.length&&t(r)}var n=[];if(x.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var r=t.data._attachments[e];r.stub&&n.push(r.digest)})}),!n.length)return t();var r,i=0;n.forEach(function(t){l(t,function(t){t&&!r&&(r=t),e()})})}function d(t,e,n,r,i,o,u,s){t.metadata.winningRev=e,t.metadata.deleted=n;var a=t.data;if(a._id=t.metadata.id,a._rev=t.metadata.rev,r&&(a._deleted=!0),a._attachments&&Object.keys(a._attachments).length)return _(t,e,n,i,u,s);z+=o,c(),v(t,e,n,i,u,s)}function v(t,e,n,i,o,u){function s(o){var u=t.stemmedRevs||[];i&&r.auto_compaction&&(u=u.concat(G(t.metadata))),u&&u.length&&un(u,t.metadata.id,m),h.seq=o.target.result;var s=Ze(h,e,n);w.put(s).onsuccess=c}function a(t){t.preventDefault(),t.stopPropagation(),b.index("_doc_id_rev").getKey(f._doc_id_rev).onsuccess=function(t){b.put(f,t.target.result).onsuccess=s}}function c(){T[o]={ok:!0,id:h.id,rev:h.rev},R.set(t.metadata.id,t.metadata),y(t,h.seq,u)}var f=t.data,h=t.metadata;f._doc_id_rev=h.id+"::"+h.rev,delete f._id,delete f._rev;var l=b.put(f);l.onsuccess=s,l.onerror=a}function _(t,e,n,r,i,o){function u(){c===f.length&&v(t,e,n,r,i,o)}function s(){c++,u()}var a=t.data,c=0,f=Object.keys(a._attachments);f.forEach(function(n){var r=t.data._attachments[n];if(r.stub)c++,u();else{var i=r.data;delete r.data,r.revpos=parseInt(e,10);g(r.digest,i,s)}})}function y(t,e,n){function r(){++i===o.length&&n()}var i=0,o=Object.keys(t.data._attachments||{});if(!o.length)return n();for(var u=0;u<o.length;u++)!function(n){var i=t.data._attachments[n].digest,o=k.put({seq:e,digestSeq:i+"::"+e});o.onsuccess=r,o.onerror=function(t){t.preventDefault(),t.stopPropagation(),r()}}(o[u])}function g(t,e,n){S.count(t).onsuccess=function(r){if(r.target.result)return n();S.put({digest:t,body:e}).onsuccess=n}}for(var m,w,b,S,k,E,I,O,x=e.docs,q=0,j=x.length;q<j;q++){var L=x[q];L._id&&ft(L._id)||(L=x[q]=Oe(L,n.new_edits),L.error&&!I&&(I=L))}if(I)return o(I);var D=!1,z=0,T=new Array(x.length),R=new Ii,C=!1;Je(x,r._meta.blobSupport?"blob":"base64",function(t){if(t)return o(t);u()})}function cn(t,e,n,r,i){function o(t){f=t.target.result,c&&i(c,f,h)}function u(t){c=t.target.result,f&&i(c,f,h)}function s(){if(!c.length)return i();var n,s=c[c.length-1];if(e&&e.upper)try{n=IDBKeyRange.bound(s,e.upper,!0,e.upperOpen)}catch(t){if("DataError"===t.name&&0===t.code)return i()}else n=IDBKeyRange.lowerBound(s,!0);e=n,c=null,f=null,t.getAll(e,r).onsuccess=o,t.getAllKeys(e,r).onsuccess=u}function a(t){var e=t.target.result;if(!e)return i();i([e.key],[e.value],e)}var c,f,h,l="function"==typeof t.getAll&&"function"==typeof t.getAllKeys&&r>1&&!n;l?(h={continue:s},t.getAll(e,r).onsuccess=o,t.getAllKeys(e,r).onsuccess=u):n?t.openCursor(e,"prev").onsuccess=a:t.openCursor(e).onsuccess=a}function fn(t,e,n){function r(t){var e=t.target.result;e?(i.push(e.value),e.continue()):n({target:{result:i}})}if("function"==typeof t.getAll)return void(t.getAll(e).onsuccess=n);var i=[];t.openCursor(e).onsuccess=r}function hn(t,e,n,r,i){try{if(t&&e)return i?IDBKeyRange.bound(e,t,!n,!1):IDBKeyRange.bound(t,e,!1,!n);if(t)return i?IDBKeyRange.upperBound(t):IDBKeyRange.lowerBound(t);if(e)return i?IDBKeyRange.lowerBound(e,!n):IDBKeyRange.upperBound(e,!n);if(r)return IDBKeyRange.only(r)}catch(t){return{error:t}}return null}function ln(t,e,n){function r(e,n,r){I.get(e.id+"::"+r).onsuccess=function(r){if(n.doc=en(r.target.result),t.conflicts){var i=X(e);i.length&&(n.doc._conflicts=i)}rn(n.doc,t,w)}}function i(e,n){var i={id:n.id,key:n.id,value:{rev:e}},o=n.deleted;"ok"===t.deleted?(O.push(i),o?(i.value.deleted=!0,i.doc=null):t.include_docs&&r(n,i,e)):!o&&p--<=0&&(O.push(i),t.include_docs&&r(n,i,e))}function o(t){for(var e=0,n=t.length;e<n&&O.length!==d;e++){var r=t[e],o=tn(r);i(o.winningRev,o)}}function u(t,e,n){n&&(o(e),O.length<d&&n.continue())}function s(e){var n=e.target.result;t.descending&&(n=n.reverse()),o(n)}function a(){n(null,{total_rows:b,offset:t.skip,rows:O})}function c(){t.attachments?on(O,t.binary).then(a):a()}var f="startkey"in t&&t.startkey,h="endkey"in t&&t.endkey,l="key"in t&&t.key,p=t.skip||0,d="number"==typeof t.limit?t.limit:-1,v=!1!==t.inclusive_end,_=hn(f,h,v,l,t.descending),y=_&&_.error;if(y&&("DataError"!==y.name||0!==y.code))return n(A(Pi,y.name,y.message));var g=[lo,po,yo];t.attachments&&g.push(vo);var m=sn(e,g,"readonly");if(m.error)return n(m.error);var w=m.txn;w.oncomplete=c,w.onabort=Ye(n);var b,S=w.objectStore(lo),k=w.objectStore(po),E=w.objectStore(yo),I=k.index("_doc_id_rev"),O=[];return E.get(yo).onsuccess=function(t){b=t.target.result.docCount},y||0===d?void 0:-1===d?fn(S,_,s):void cn(S,_,t.descending,d+p,u)}function pn(t){return new bi(function(e){var n=xe([""]);t.objectStore(mo).put(n,"key").onsuccess=function(){var t=navigator.userAgent.match(/Chrome\/(\d+)/),n=navigator.userAgent.match(/Edge\//);e(n||!t||parseInt(t[1],10)>=43)},t.onabort=function(t){t.preventDefault(),t.stopPropagation(),e(!1)}}).catch(function(){return!1})}function dn(t,e){t.objectStore(lo).index("deletedOrLocal").count(IDBKeyRange.only("0")).onsuccess=function(t){e(t.target.result)}}function vn(t,e,n,r){try{t(e,n)}catch(e){r.emit("error",e)}}function _n(){!bo&&So.length&&(bo=!0,So.shift()())}function yn(t,e,n){So.push(function(){t(function(t,r){vn(e,t,r,n),bo=!1,di()(function(){_n(n)})})}),_n()}function gn(t,e,n,r){function i(e,n,r){function i(e,n){var r=t.processChange(n,e,t);l=r.seq=e.seq;var i=b(r);if("object"==typeof i)return t.complete(i);i&&(w++,d&&m.push(r),t.attachments&&t.include_docs?rn(n,t,v,function(){on([r],t.binary).then(function(){t.onChange(r)})}):t.onChange(r))}function o(){for(var t=0,e=s.length;t<e&&w!==p;t++){var n=s[t];if(n){i(a[t],n)}}w!==p&&r.continue()}if(r&&e.length){var s=new Array(e.length),a=new Array(e.length),c=0;n.forEach(function(t,n){u(en(t),e[n],function(t,r){a[n]=t,s[n]=r,++c===e.length&&o()})})}}function o(t,e,n,r){return n.seq!==e?r():n.winningRev===t._rev?r(n,t):void(g.get(t._id+"::"+n.winningRev).onsuccess=function(t){r(n,en(t.target.result))})}function u(t,e,n){if(h&&!h.has(t._id))return n();var r=S.get(t._id);if(r)return o(t,e,r,n);y.get(t._id).onsuccess=function(i){r=tn(i.target.result),S.set(t._id,r),o(t,e,r,n)}}function a(){t.complete(null,{results:m,last_seq:l})}function c(){!t.continuous&&t.attachments?on(m).then(a):a()}if(t=s(t),t.continuous){var f=n+":"+Qi();return wo.addListener(n,f,e,t),wo.notify(n),{cancel:function(){wo.removeListener(n,f)}}}var h=t.doc_ids&&new Ei(t.doc_ids);t.since=t.since||0;var l=t.since,p="limit"in t?t.limit:-1;0===p&&(p=1);var d;d="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var v,_,y,g,m=[],w=0,b=D(t),S=new Ii,k=[lo,po];t.attachments&&k.push(vo);var E=sn(r,k,"readonly");if(E.error)return t.complete(E.error);v=E.txn,v.onabort=Ye(t.complete),v.oncomplete=c,_=v.objectStore(po),y=v.objectStore(lo),g=_.index("_doc_id_rev"),cn(_,t.since&&!t.descending?IDBKeyRange.lowerBound(t.since,!0):null,t.descending,p,i)}function mn(t,e){var n=this;yn(function(e){wn(n,t,e)},e,n.constructor)}function wn(t,e,n){function r(t){var e=t.createObjectStore(lo,{keyPath:"id"});t.createObjectStore(po,{autoIncrement:!0}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0}),t.createObjectStore(vo,{keyPath:"digest"}),t.createObjectStore(yo,{keyPath:"id",autoIncrement:!1}),t.createObjectStore(mo),e.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),t.createObjectStore(go,{keyPath:"_id"});var n=t.createObjectStore(_o,{autoIncrement:!0});n.createIndex("seq","seq"),n.createIndex("digestSeq","digestSeq",{unique:!0})}function i(t,e){var n=t.objectStore(lo);n.createIndex("deletedOrLocal","deletedOrLocal",{unique:!1}),n.openCursor().onsuccess=function(t){var r=t.target.result;if(r){var i=r.value;i.deletedOrLocal=ct(i)?"1":"0",n.put(i),r.continue()}else e()}}function o(t){t.createObjectStore(go,{keyPath:"_id"}).createIndex("_doc_id_rev","_doc_id_rev",{unique:!0})}function u(t,e){var n=t.objectStore(go),r=t.objectStore(lo),i=t.objectStore(po);r.openCursor().onsuccess=function(t){var o=t.target.result;if(o){var u=o.value,s=u.id,a=ft(s),c=W(u);if(a){var f=s+"::"+c,h=s+"::",l=s+"::~",p=i.index("_doc_id_rev"),d=IDBKeyRange.bound(h,l,!1,!1),v=p.openCursor(d);v.onsuccess=function(t){if(v=t.target.result){var e=v.value;e._doc_id_rev===f&&n.put(e),i.delete(v.primaryKey),v.continue()}else r.delete(o.primaryKey),o.continue()}}else o.continue()}else e&&e()}}function s(t){var e=t.createObjectStore(_o,{autoIncrement:!0});e.createIndex("seq","seq"),e.createIndex("digestSeq","digestSeq",{unique:!0})}function a(t,e){var n=t.objectStore(po),r=t.objectStore(vo),i=t.objectStore(_o);r.count().onsuccess=function(t){if(!t.target.result)return e();n.openCursor().onsuccess=function(t){var n=t.target.result;if(!n)return e();for(var r=n.value,o=n.primaryKey,u=Object.keys(r._attachments||{}),s={},a=0;a<u.length;a++)s[r._attachments[u[a]].digest]=!0;var c=Object.keys(s);for(a=0;a<c.length;a++)i.put({seq:o,digestSeq:c[a]+"::"+o});n.continue()}}}function f(t){function e(t){return t.data?tn(t):(t.deleted="1"===t.deletedOrLocal,t)}var n=t.objectStore(po),r=t.objectStore(lo);r.openCursor().onsuccess=function(t){function i(){var t=Ze(u,u.winningRev,u.deleted);r.put(t).onsuccess=function(){o.continue()}}var o=t.target.result;if(o){var u=e(o.value);if(u.winningRev=u.winningRev||W(u),u.seq)return i();!function(){var t=u.id+"::",e=u.id+"::￿",r=n.index("_doc_id_rev").openCursor(IDBKeyRange.bound(t,e)),o=0;r.onsuccess=function(t){var e=t.target.result;if(!e)return u.seq=o,i();var n=e.primaryKey;n>o&&(o=n),e.continue()}}()}}}var h=e.name,l=null;t._meta=null,t._remote=!1,t.type=function(){return"idb"},t._id=c(function(e){e(null,t._meta.instanceId)}),t._bulkDocs=function(n,r,i){an(e,n,r,t,l,i)},t._get=function(t,e,n){function r(){n(u,{doc:i,metadata:o,ctx:s})}var i,o,u,s=e.ctx;if(!s){var a=sn(l,[lo,po,vo],"readonly");if(a.error)return n(a.error);s=a.txn}s.objectStore(lo).get(t).onsuccess=function(t){if(!(o=tn(t.target.result)))return u=A(Li,"missing"),r();var n;if(e.rev)n=e.latest?ht(e.rev,o):e.rev;else{n=o.winningRev;if(ct(o))return u=A(Li,"deleted"),r()}var a=s.objectStore(po),c=o.id+"::"+n;a.index("_doc_id_rev").get(c).onsuccess=function(t){if(i=t.target.result,i&&(i=en(i)),!i)return u=A(Li,"missing"),r();r()}}},t._getAttachment=function(t,e,n,r,i){var o;if(r.ctx)o=r.ctx;else{var u=sn(l,[lo,po,vo],"readonly");if(u.error)return i(u.error);o=u.txn}var s=n.digest,a=n.content_type;o.objectStore(vo).get(s).onsuccess=function(t){nn(t.target.result.body,a,r.binary,function(t){i(null,t)})}},t._info=function(e){var n,r,i=sn(l,[yo,po],"readonly");if(i.error)return e(i.error);var o=i.txn;o.objectStore(yo).get(yo).onsuccess=function(t){r=t.target.result.docCount},o.objectStore(po).openCursor(null,"prev").onsuccess=function(t){var e=t.target.result;n=e?e.key:0},o.oncomplete=function(){e(null,{doc_count:r,update_seq:n,idb_attachment_format:t._meta.blobSupport?"binary":"base64"})}},t._allDocs=function(t,e){ln(t,l,e)},t._changes=function(e){return gn(e,t,h,l)},t._close=function(t){l.close(),ko.delete(h),t()},t._getRevisionTree=function(t,e){var n=sn(l,[lo],"readonly");if(n.error)return e(n.error);n.txn.objectStore(lo).get(t).onsuccess=function(t){var n=tn(t.target.result);n?e(null,n.rev_tree):e(A(Li))}},t._doCompaction=function(t,e,n){var r=[lo,po,vo,_o],i=sn(l,r,"readwrite");if(i.error)return n(i.error);var o=i.txn;o.objectStore(lo).get(t).onsuccess=function(n){var r=tn(n.target.result);J(r.rev_tree,function(t,n,r,i,o){-1!==e.indexOf(n+"-"+r)&&(o.status="missing")}),un(e,t,o);var i=r.winningRev,u=r.deleted;o.objectStore(lo).put(Ze(r,i,u))},o.onabort=Ye(n),o.oncomplete=function(){n()}},t._getLocal=function(t,e){var n=sn(l,[go],"readonly");if(n.error)return e(n.error);var r=n.txn,i=r.objectStore(go).get(t);i.onerror=Ye(e),i.onsuccess=function(t){var n=t.target.result;n?(delete n._doc_id_rev,e(null,n)):e(A(Li))}},t._putLocal=function(t,e,n){"function"==typeof e&&(n=e,e={}),delete t._revisions;var r=t._rev,i=t._id;t._rev=r?"0-"+(parseInt(r.split("-")[1],10)+1):"0-1";var o,u=e.ctx;if(!u){var s=sn(l,[go],"readwrite");if(s.error)return n(s.error);u=s.txn,u.onerror=Ye(n),u.oncomplete=function(){o&&n(null,o)}}var a,c=u.objectStore(go);r?(a=c.get(i),a.onsuccess=function(i){var u=i.target.result;if(u&&u._rev===r){c.put(t).onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)}}else n(A(Di))}):(a=c.add(t),a.onerror=function(t){n(A(Di)),t.preventDefault(),t.stopPropagation()},a.onsuccess=function(){o={ok:!0,id:t._id,rev:t._rev},e.ctx&&n(null,o)})},t._removeLocal=function(t,e,n){"function"==typeof e&&(n=e,e={});var r=e.ctx;if(!r){var i=sn(l,[go],"readwrite");if(i.error)return n(i.error);r=i.txn,r.oncomplete=function(){o&&n(null,o)}}var o,u=t._id,s=r.objectStore(go),a=s.get(u);a.onerror=Ye(n),a.onsuccess=function(r){var i=r.target.result;i&&i._rev===t._rev?(s.delete(u),o={ok:!0,id:u,rev:"0-0"},e.ctx&&n(null,o)):n(A(Li))}},t._destroy=function(t,e){wo.removeAllListeners(h);var n=Eo.get(h);n&&n.result&&(n.result.close(),ko.delete(h));var r=indexedDB.deleteDatabase(h);r.onsuccess=function(){Eo.delete(h),b()&&h in localStorage&&delete localStorage[h],e(null,{ok:!0})},r.onerror=Ye(e)};var p=ko.get(h);if(p)return l=p.idb,t._meta=p.global,di()(function(){n(null,t)});var d;d=e.storage?bn(h,e.storage):indexedDB.open(h,ho),Eo.set(h,d),d.onupgradeneeded=function(t){function e(){var t=h[l-1];l++,t&&t(c,e)}var n=t.target.result;if(t.oldVersion<1)return r(n);var c=t.currentTarget.transaction;t.oldVersion<3&&o(n),t.oldVersion<4&&s(n);var h=[i,u,a,f],l=t.oldVersion;e()},d.onsuccess=function(e){function r(){void 0!==s&&f&&(t._meta={name:h,instanceId:a,blobSupport:s},ko.set(h,{idb:l,global:t._meta}),n(null,t))}function i(){if(void 0!==u&&void 0!==o){var t=h+"_id";t in o?a=o[t]:o[t]=a=Qi(),o.docCount=u,c.objectStore(yo).put(o)}}l=e.target.result,l.onversionchange=function(){l.close(),ko.delete(h)},l.onabort=function(t){E("error","Database has a global failure",t.target.error),l.close(),ko.delete(h)};var o,u,s,a,c=l.transaction([yo,mo,lo],"readwrite"),f=!1;c.objectStore(yo).get(yo).onsuccess=function(t){o=t.target.result||{id:yo},i()},dn(c,function(t){u=t,i()}),io||(io=pn(c)),io.then(function(t){s=t,r()}),c.oncomplete=function(){f=!0,r()}},d.onerror=function(){var t="Failed to open indexedDB, are you in private browsing mode?";E("error",t),n(A(Pi,t))}}function bn(t,e){try{return indexedDB.open(t,{version:ho,storage:e})}catch(e){return indexedDB.open(t,ho)}}function Sn(t){return decodeURIComponent(escape(t))}function kn(t){return t<65?t-48:t-55}function En(t,e,n){for(var r="";e<n;)r+=String.fromCharCode(kn(t.charCodeAt(e++))<<4|kn(t.charCodeAt(e++)));return r}function In(t,e,n){for(var r="";e<n;)r+=String.fromCharCode(kn(t.charCodeAt(e+2))<<12|kn(t.charCodeAt(e+3))<<8|kn(t.charCodeAt(e))<<4|kn(t.charCodeAt(e+1))),e+=4;return r}function On(t,e){return"UTF-8"===e?Sn(En(t,0,t.length)):In(t,0,t.length)}function xn(t){return"'"+t+"'"}function qn(t){return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"")}function An(t){return t.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,"")}function jn(t){return delete t._id,delete t._rev,JSON.stringify(t)}function Ln(t,e,n){return t=JSON.parse(t),t._id=e,t._rev=n,t}function Dn(t){for(var e="(";t--;)e+="?",t&&(e+=",");return e+")"}function zn(t,e,n,r,i){return"SELECT "+t+" FROM "+("string"==typeof e?e:e.join(" JOIN "))+(n?" ON "+n:"")+(r?" WHERE "+("string"==typeof r?r:r.join(" AND ")):"")+(i?" ORDER BY "+i:"")}function Tn(t,e,n){function r(){++o===t.length&&i()}function i(){if(u.length){var t="SELECT DISTINCT digest AS digest FROM "+Do+" WHERE seq IN "+Dn(u.length);n.executeSql(t,u,function(t,e){for(var n=[],r=0;r<e.rows.length;r++)n.push(e.rows.item(r).digest);if(n.length){t.executeSql("DELETE FROM "+Do+" WHERE seq IN ("+u.map(function(){return"?"}).join(",")+")",u,function(t){t.executeSql("SELECT digest FROM "+Do+" WHERE digest IN ("+n.map(function(){return"?"}).join(",")+")",n,function(t,e){for(var r=new Ei,i=0;i<e.rows.length;i++)r.add(e.rows.item(i).digest);n.forEach(function(e){r.has(e)||(t.executeSql("DELETE FROM "+Do+" WHERE digest=?",[e]),t.executeSql("DELETE FROM "+Ao+" WHERE digest=?",[e]))})})})}})}}if(t.length){var o=0,u=[];t.forEach(function(t){n.executeSql("SELECT seq FROM "+qo+" WHERE doc_id=? AND rev=?",[e,t],function(t,e){if(!e.rows.length)return r();var n=e.rows.item(0).seq;u.push(n),t.executeSql("DELETE FROM "+qo+" WHERE seq=?",[n],r)})})}}function Rn(t){return function(e){E("error","WebSQL threw an error",e);var n=e&&e.constructor.toString().match(/function ([^(]+)/),r=n&&n[1]||e.type;t(A(Fi,e.target||e.message,r))}}function Cn(t){return"size"in t?1e6*t.size:"undefined"!=typeof navigator&&/Android/.test(navigator.userAgent)?5e6:1}function Nn(t,e,n,r,i,o,u){function s(){if(m)return u(m);o.notify(r._name),u(null,w)}function a(t,e){g.executeSql("SELECT count(*) as cnt FROM "+Ao+" WHERE digest=?",[t],function(n,r){if(0===r.rows.item(0).cnt){var i=A(Wi,"unknown stub attachment with digest "+t);e(i)}else e()})}function c(t){function e(){++i===n.length&&t(r)}var n=[];if(_.forEach(function(t){t.data&&t.data._attachments&&Object.keys(t.data._attachments).forEach(function(e){var r=t.data._attachments[e];r.stub&&n.push(r.digest)})}),!n.length)return t();var r,i=0;n.forEach(function(t){a(t,function(t){t&&!r&&(r=t),e()})})}function f(t,e,n,i,o,u,s,a){function c(){function e(t,e){function r(){return++i===o.length&&e(),!1}var i=0,o=Object.keys(n._attachments||{});if(!o.length)return e();for(var u=0;u<o.length;u++)!function(e){g.executeSql("INSERT INTO "+Do+" (digest, seq) VALUES (?,?)",[n._attachments[e].digest,t],r,r)}(o[u])}var n=t.data,r=i?1:0,o=n._id,u=n._rev,s=jn(n);g.executeSql("INSERT INTO "+qo+" (doc_id, rev, json, deleted) VALUES (?, ?, ?, ?);",[o,u,s,r],function(t,n){var r=n.insertId;e(r,function(){l(t,r)})},function(){var t=zn("seq",qo,null,"doc_id=? AND rev=?");return g.executeSql(t,[o,u],function(t,n){var i=n.rows.item(0).seq;t.executeSql("UPDATE "+qo+" SET json=?, deleted=? WHERE doc_id=? AND rev=?;",[s,r,o,u],function(t){e(i,function(){l(t,i)})})}),!1})}function f(t){d||(t?(d=t,a(d)):v===_.length&&c())}function h(t){v++,f(t)}function l(n,i){var u=t.metadata.id,c=t.stemmedRevs||[];o&&r.auto_compaction&&(c=G(t.metadata).concat(c)),c.length&&Tn(c,u,n),t.metadata.seq=i;var f=t.metadata.rev;delete t.metadata.rev;var h=o?"UPDATE "+xo+" SET json=?, max_seq=?, winningseq=(SELECT seq FROM "+qo+" WHERE doc_id="+xo+".id AND rev=?) WHERE id=?":"INSERT INTO "+xo+" (id, winningseq, max_seq, json) VALUES (?,?,?,?);",l=Qe(t.metadata);n.executeSql(h,o?[l,i,e,u]:[u,i,i,l],function(){w[s]={ok:!0,id:t.metadata.id,rev:f},b.set(u,t.metadata),a()})}var d=null,v=0;t.data._id=t.metadata.id,t.data._rev=t.metadata.rev;var _=Object.keys(t.data._attachments||{});i&&(t.data._deleted=!0),_.forEach(function(n){var r=t.data._attachments[n];if(r.stub)v++,f();else{var i=r.data;delete r.data,r.revpos=parseInt(e,10);p(r.digest,i,h)}}),_.length||c()}function h(){Xe(t.revs_limit,_,r,b,g,w,f,n)}function l(t){function e(){++n===_.length&&t()}if(!_.length)return t();var n=0;_.forEach(function(t){if(t._id&&ft(t._id))return e();var n=t.metadata.id;g.executeSql("SELECT json FROM "+xo+" WHERE id = ?",[n],function(t,r){if(r.rows.length){var i=Ge(r.rows.item(0).json);b.set(n,i)}e()})})}function p(t,e,n){var r="SELECT digest FROM "+Ao+" WHERE digest=?";g.executeSql(r,[t],function(i,o){if(o.rows.length)return n();r="INSERT INTO "+Ao+" (digest, body, escaped) VALUES (?,?,1)",i.executeSql(r,[t,qn(e)],function(){n()},function(){return n(),!1})})}var d=n.new_edits,v=e.docs,_=v.map(function(t){return t._id&&ft(t._id)?t:Oe(t,d)}),y=_.filter(function(t){return t.error});if(y.length)return u(y[0]);var g,m,w=new Array(_.length),b=new Ii;Je(_,"binary",function(t){if(t)return u(t);i.transaction(function(t){g=t,c(function(t){t?m=t:l(h)})},Rn(u),s)})}function Mn(t){return t.websql(t.name,t.version,t.description,t.size)}function Bn(t){try{return{db:Mn(t)}}catch(t){return{error:t}}}function $n(t){var e=zo.get(t.name);return e||(e=Bn(t),zo.set(t.name,e)),e}function Un(t,e,n,r,i){function o(){++a===s.length&&i&&i()}function u(t,i){var u=t._attachments[i];n._getAttachment(t._id,i,u,{binary:e.binary,ctx:r},function(e,n){t._attachments[i]=Ai(_(u,["digest","content_type"]),{data:n}),o()})}var s=Object.keys(t._attachments||{});if(!s.length)return i&&i();var a=0;s.forEach(function(n){e.attachments&&e.include_docs?u(t,n):(t._attachments[n].stub=!0,o())})}function Pn(t,e){function n(){b()&&(window.localStorage["_pouch__websqldb_"+m._name]=!0),e(null,m)}function r(t,e){t.executeSql(Mo),t.executeSql("ALTER TABLE "+qo+" ADD COLUMN deleted TINYINT(1) DEFAULT 0",[],function(){t.executeSql(Co),t.executeSql("ALTER TABLE "+xo+" ADD COLUMN local TINYINT(1) DEFAULT 0",[],function(){t.executeSql("CREATE INDEX IF NOT EXISTS 'doc-store-local-idx' ON "+xo+" (local, id)"),t.executeSql("SELECT "+xo+".winningseq AS seq, "+xo+".json AS metadata FROM "+qo+" JOIN "+xo+" ON "+qo+".seq = "+xo+".winningseq",[],function(t,n){for(var r=[],i=[],o=0;o<n.rows.length;o++){var u=n.rows.item(o),s=u.seq,a=JSON.parse(u.metadata);ct(a)&&r.push(s),ft(a.id)&&i.push(a.id)}t.executeSql("UPDATE "+xo+"SET local = 1 WHERE id IN "+Dn(i.length),i,function(){t.executeSql("UPDATE "+qo+" SET deleted = 1 WHERE seq IN "+Dn(r.length),r,e)})})})})}function i(t,e){t.executeSql("CREATE TABLE IF NOT EXISTS "+jo+" (id UNIQUE, rev, json)",[],function(){t.executeSql("SELECT "+xo+".id AS id, "+qo+".json AS data FROM "+qo+" JOIN "+xo+" ON "+qo+".seq = "+xo+".winningseq WHERE local = 1",[],function(t,n){function r(){if(!i.length)return e(t);var n=i.shift(),o=JSON.parse(n.data)._rev;t.executeSql("INSERT INTO "+jo+" (id, rev, json) VALUES (?,?,?)",[n.id,o,n.data],function(t){t.executeSql("DELETE FROM "+xo+" WHERE id=?",[n.id],function(t){t.executeSql("DELETE FROM "+qo+" WHERE seq=?",[n.seq],function(){r()})})})}for(var i=[],o=0;o<n.rows.length;o++)i.push(n.rows.item(o));r()})})}function o(t,e){function n(n){function r(){if(!n.length)return e(t);var i=n.shift(),o=On(i.hex,g),u=o.lastIndexOf("::"),s=o.substring(0,u),a=o.substring(u+2);t.executeSql("UPDATE "+qo+" SET doc_id=?, rev=? WHERE doc_id_rev=?",[s,a,o],function(){r()})}r()}t.executeSql("ALTER TABLE "+qo+" ADD COLUMN doc_id",[],function(t){t.executeSql("ALTER TABLE "+qo+" ADD COLUMN rev",[],function(t){t.executeSql(No,[],function(t){t.executeSql("SELECT hex(doc_id_rev) as hex FROM "+qo,[],function(t,e){for(var r=[],i=0;i<e.rows.length;i++)r.push(e.rows.item(i));n(r)})})})})}function u(t,e){function n(t){t.executeSql("SELECT COUNT(*) AS cnt FROM "+Ao,[],function(t,n){function r(){var n=zn(Po+", "+xo+".id AS id",[xo,qo],Uo,null,xo+".id ");n+=" LIMIT "+o+" OFFSET "+i,i+=o,t.executeSql(n,[],function(t,n){if(!n.rows.length)return e(t);for(var i={},o=0;o<n.rows.length;o++)for(var u=n.rows.item(o),s=Ln(u.data,u.id,u.rev),a=Object.keys(s._attachments||{}),c=0;c<a.length;c++){var f=s._attachments[a[c]];!function(t,e){var n=i[t]=i[t]||[];-1===n.indexOf(e)&&n.push(e)}(f.digest,u.seq)}var h=[];if(Object.keys(i).forEach(function(t){i[t].forEach(function(e){h.push([t,e])})}),!h.length)return r();var l=0;h.forEach(function(e){t.executeSql("INSERT INTO "+Do+" (digest, seq) VALUES (?,?)",e,function(){++l===h.length&&r()})})})}if(!n.rows.item(0).cnt)return e(t);var i=0,o=10;r()})}t.executeSql("CREATE TABLE IF NOT EXISTS "+Do+" (digest, seq INTEGER)",[],function(t){t.executeSql($o,[],function(t){t.executeSql(Bo,[],n)})})}function a(t,e){t.executeSql("ALTER TABLE "+Ao+" ADD COLUMN escaped TINYINT(1) DEFAULT 0",[],e)}function f(t,e){t.executeSql("ALTER TABLE "+xo+" ADD COLUMN max_seq INTEGER",[],function(t){t.executeSql("UPDATE "+xo+" SET max_seq=(SELECT MAX(seq) FROM "+qo+" WHERE doc_id=id)",[],function(t){t.executeSql("CREATE UNIQUE INDEX IF NOT EXISTS 'doc-max-seq-idx' ON "+xo+" (max_seq)",[],e)})})}function h(t,e){t.executeSql('SELECT HEX("a") AS hex',[],function(t,n){var r=n.rows.item(0).hex;g=2===r.length?"UTF-8":"UTF-16",e()})}function l(){for(;k.length>0;){k.pop()(null,w)}}function p(t,e){if(0===e){var n="CREATE TABLE IF NOT EXISTS "+Lo+" (dbid, db_version INTEGER)",s="CREATE TABLE IF NOT EXISTS "+Ao+" (digest UNIQUE, escaped TINYINT(1), body BLOB)",c="CREATE TABLE IF NOT EXISTS "+Do+" (digest, seq INTEGER)",h="CREATE TABLE IF NOT EXISTS "+xo+" (id unique, json, winningseq, max_seq INTEGER UNIQUE)",p="CREATE TABLE IF NOT EXISTS "+qo+" (seq INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT, json, deleted TINYINT(1), doc_id, rev)",d="CREATE TABLE IF NOT EXISTS "+jo+" (id UNIQUE, rev, json)";t.executeSql(s),t.executeSql(d),t.executeSql(c,[],function(){t.executeSql(Bo),t.executeSql($o)}),t.executeSql(h,[],function(){t.executeSql(Mo),t.executeSql(p,[],function(){t.executeSql(Co),t.executeSql(No),t.executeSql(n,[],function(){var e="INSERT INTO "+Lo+" (db_version, dbid) VALUES (?,?)";w=Qi(),t.executeSql(e,[Oo,w],function(){l()})})})})}else{var v=function(){e<Oo&&t.executeSql("UPDATE "+Lo+" SET db_version = "+Oo),t.executeSql("SELECT dbid FROM "+Lo,[],function(t,e){w=e.rows.item(0).dbid,l()})},_=[r,i,o,u,a,f,v],y=e;!function t(e){_[y-1](e,t),y++}(t)}}function d(t){t.executeSql("SELECT sql FROM sqlite_master WHERE tbl_name = "+Lo,[],function(t,e){e.rows.length?/db_version/.test(e.rows.item(0).sql)?t.executeSql("SELECT db_version FROM "+Lo,[],function(t,e){p(t,e.rows.item(0).db_version)}):t.executeSql("ALTER TABLE "+Lo+" ADD COLUMN db_version INTEGER",[],function(){p(t,1)}):p(t,0)})}function v(t,e){t.executeSql("SELECT MAX(seq) AS seq FROM "+qo,[],function(t,n){var r=n.rows.item(0).seq||0;e(r)})}function _(t,e){t.executeSql(zn("COUNT("+xo+".id) AS 'num'",[xo,qo],Uo,qo+".deleted=0"),[],function(t,n){e(n.rows.item(0).num)})}function y(t,e,n,r,i){t.executeSql(zn(Po,[xo,qo],Uo,xo+".id=?"),[e],function(t,e){if(!e.rows.length){var o=A(Li,"missing");return i(o)}var u=e.rows.item(0),s=Ge(u.metadata);r(ht(n,s))})}var g,m=this,w=null,S=Cn(t),k=[];m._name=t.name;var E=Ai({},t,{version:Ro,description:t.name,size:S}),I=$n(E);if(I.error)return Rn(e)(I.error);var O=I.db;"function"!=typeof O.readTransaction&&(O.readTransaction=O.transaction),function(){O.transaction(function(t){h(t,function(){d(t)})},Rn(e),n)}(),m._remote=!1,m.type=function(){return"websql"},m._id=c(function(t){t(null,w)}),m._info=function(t){var e,n;O.readTransaction(function(t){v(t,function(t){e=t}),_(t,function(t){n=t})},Rn(t),function(){t(null,{doc_count:n,update_seq:e,websql_encoding:g})})},m._bulkDocs=function(e,n,r){Nn(t,e,n,m,O,To,r)},m._get=function(t,e,n){function r(t){n(t,{doc:i,metadata:o,ctx:u})}var i,o,u=e.ctx;if(!u)return O.readTransaction(function(r){m._get(t,Ai({ctx:r},e),n)});var s,a;if(e.rev){if(e.latest)return void y(u,t,e.rev,function(r){e.latest=!1,e.rev=r,m._get(t,e,n)},r);s=zn(Po,[xo,qo],xo+".id="+qo+".doc_id",[qo+".doc_id=?",qo+".rev=?"]),a=[t,e.rev]}else s=zn(Po,[xo,qo],Uo,xo+".id=?"),a=[t];u.executeSql(s,a,function(t,n){if(!n.rows.length){return r(A(Li,"missing"))}var u=n.rows.item(0);if(o=Ge(u.metadata),u.deleted&&!e.rev){return r(A(Li,"deleted"))}i=Ln(u.data,o.id,u.rev),r()})},m._allDocs=function(t,e){var n,r=[],i="startkey"in t&&t.startkey,o="endkey"in t&&t.endkey,u="key"in t&&t.key,s="descending"in t&&t.descending,a="limit"in t?t.limit:-1,c="skip"in t?t.skip:0,f=!1!==t.inclusive_end,h=[],l=[];if(!1!==u)l.push(xo+".id = ?"),h.push(u);else if(!1!==i||!1!==o){if(!1!==i&&(l.push(xo+".id "+(s?"<=":">=")+" ?"),h.push(i)),!1!==o){var p=s?">":"<";f&&(p+="="),l.push(xo+".id "+p+" ?"),h.push(o)}!1!==u&&(l.push(xo+".id = ?"),h.push(u))}"ok"!==t.deleted&&l.push(qo+".deleted = 0"),O.readTransaction(function(e){if(_(e,function(t){n=t}),0!==a){var i=zn(Po,[xo,qo],Uo,l,xo+".id "+(s?"DESC":"ASC"));i+=" LIMIT "+a+" OFFSET "+c,e.executeSql(i,h,function(e,n){for(var i=0,o=n.rows.length;i<o;i++){var u=n.rows.item(i),s=Ge(u.metadata),a=s.id,c=Ln(u.data,a,u.rev),f=c._rev,h={id:a,key:a,value:{rev:f}};if(t.include_docs){if(h.doc=c,h.doc._rev=f,t.conflicts){var l=X(s);l.length&&(h.doc._conflicts=l)}Un(h.doc,t,m,e)}if(u.deleted){if("ok"!==t.deleted)continue;h.value.deleted=!0,h.doc=null}r.push(h)}})}},Rn(e),function(){e(null,{total_rows:n,offset:t.skip,rows:r})})},m._changes=function(t){if(t=s(t),t.continuous){var e=m._name+":"+Qi();return To.addListener(m._name,e,m,t),To.notify(m._name),{cancel:function(){To.removeListener(m._name,e)}}}var n=t.descending;t.since=t.since&&!n?t.since:0;var r="limit"in t?t.limit:-1;0===r&&(r=1);var i;i="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var o=[],u=0;!function(){var e=xo+".json AS metadata, "+xo+".max_seq AS maxSeq, "+qo+".json AS winningDoc, "+qo+".rev AS winningRev ",s=xo+" JOIN "+qo,a=xo+".id="+qo+".doc_id AND "+xo+".winningseq="+qo+".seq",c=["maxSeq > ?"],f=[t.since];t.doc_ids&&(c.push(xo+".id IN "+Dn(t.doc_ids.length)),f=f.concat(t.doc_ids));var h="maxSeq "+(n?"DESC":"ASC"),l=zn(e,s,a,c,h),p=D(t);t.view||t.filter||(l+=" LIMIT "+r);var d=t.since||0;O.readTransaction(function(e){e.executeSql(l,f,function(e,n){function s(e){return function(){t.onChange(e)}}for(var a=0,c=n.rows.length;a<c;a++){var f=n.rows.item(a),h=Ge(f.metadata);d=f.maxSeq;var l=Ln(f.winningDoc,h.id,f.winningRev),v=t.processChange(l,h,t);v.seq=f.maxSeq;var _=p(v);if("object"==typeof _)return t.complete(_);if(_&&(u++,i&&o.push(v),t.attachments&&t.include_docs?Un(l,t,m,e,s(v)):s(v)()),u===r)break}})},Rn(t.complete),function(){t.continuous||t.complete(null,{results:o,last_seq:d})})}()},m._close=function(t){t()},m._getAttachment=function(t,e,n,r,i){var o,u=n.content_type;r.ctx.executeSql("SELECT escaped, CASE WHEN escaped = 1 THEN body ELSE HEX(body) END AS body FROM "+Ao+" WHERE digest=?",[n.digest],function(t,e){var n=e.rows.item(0),s=n.escaped?An(n.body):On(n.body,g);o=r.binary?Ae(s,u):ao(s),i(null,o)})},m._getRevisionTree=function(t,e){O.readTransaction(function(n){n.executeSql("SELECT json AS metadata FROM "+xo+" WHERE id = ?",[t],function(t,n){if(n.rows.length){var r=Ge(n.rows.item(0).metadata);e(null,r.rev_tree)}else e(A(Li))})})},m._doCompaction=function(t,e,n){if(!e.length)return n();O.transaction(function(n){n.executeSql("SELECT json AS metadata FROM "+xo+" WHERE id = ?",[t],function(n,r){var i=Ge(r.rows.item(0).metadata);J(i.rev_tree,function(t,n,r,i,o){-1!==e.indexOf(n+"-"+r)&&(o.status="missing")}),n.executeSql("UPDATE "+xo+" SET json = ? WHERE id = ?",[Qe(i),t])}),Tn(e,t,n)},Rn(n),function(){n()})},m._getLocal=function(t,e){O.readTransaction(function(n){n.executeSql("SELECT json, rev FROM "+jo+" WHERE id=?",[t],function(n,r){if(r.rows.length){var i=r.rows.item(0),o=Ln(i.json,t,i.rev);e(null,o)}else e(A(Li))})})},m._putLocal=function(t,e,n){function r(t){var r,c;o?(r="UPDATE "+jo+" SET rev=?, json=? WHERE id=? AND rev=?",c=[i,a,u,o]):(r="INSERT INTO "+jo+" (id, rev, json) VALUES (?,?,?)",c=[u,i,a]),t.executeSql(r,c,function(t,r){r.rowsAffected?(s={ok:!0,id:u,rev:i},e.ctx&&n(null,s)):n(A(Di))},function(){return n(A(Di)),!1})}"function"==typeof e&&(n=e,e={}),delete t._revisions;var i,o=t._rev,u=t._id;i=t._rev=o?"0-"+(parseInt(o.split("-")[1],10)+1):"0-1";var s,a=jn(t);e.ctx?r(e.ctx):O.transaction(r,Rn(n),function(){s&&n(null,s)})},m._removeLocal=function(t,e,n){function r(r){r.executeSql("DELETE FROM "+jo+" WHERE id=? AND rev=?",[t._id,t._rev],function(r,o){if(!o.rowsAffected)return n(A(Li));i={ok:!0,id:t._id,rev:"0-0"},e.ctx&&n(null,i)})}"function"==typeof e&&(n=e,e={});var i;e.ctx?r(e.ctx):O.transaction(r,Rn(n),function(){i&&n(null,i)})},m._destroy=function(t,e){To.removeAllListeners(m._name),O.transaction(function(t){[xo,qo,Ao,Lo,jo,Do].forEach(function(e){t.executeSql("DROP TABLE IF EXISTS "+e,[])})},Rn(e),function(){b()&&(delete window.localStorage["_pouch__websqldb_"+m._name],delete window.localStorage[m._name]),e(null,{ok:!0})})}}function Fn(){try{return openDatabase("_pouch_validate_websql",1,"",1),!0}catch(t){return!1}}function Kn(){if("undefined"==typeof indexedDB||null===indexedDB||!/iP(hone|od|ad)/.test(navigator.userAgent))return!0;var t=b(),e="_pouch__websqldb_valid_"+navigator.userAgent;if(t&&localStorage[e])return"1"===localStorage[e];var n=Fn();return t&&(localStorage[e]=n?"1":"0"),n}function Wn(){return"function"==typeof openDatabase&&Kn()}function Jn(t,e,n,r){return openDatabase(t,e,n,r)}function Hn(t,e){Pn.call(this,Ai({websql:Jn},t),e)}function Vn(){for(var t={},e=new bi(function(e,n){t.resolve=e,t.reject=n}),n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.promise=e,bi.resolve().then(function(){return fetch.apply(null,n)}).then(function(e){t.resolve(e)}).catch(function(e){t.reject(e)}),t}function Xn(t,e){var n,r,i,o=new Headers,u={method:t.method,credentials:"include",headers:o};return t.json&&(o.set("Accept","application/json"),o.set("Content-Type",t.headers["Content-Type"]||"application/json")),u.body=t.body&&t.processData&&"string"!=typeof t.body?JSON.stringify(t.body):"body"in t?t.body:null,Object.keys(t.headers).forEach(function(e){t.headers.hasOwnProperty(e)&&o.set(e,t.headers[e])}),n=Vn(t.url,u),t.timeout>0&&(r=setTimeout(function(){n.reject(new Error("Load timeout for resource: "+t.url))},t.timeout)),n.promise.then(function(e){return i={statusCode:e.status},t.timeout>0&&clearTimeout(r),i.statusCode>=200&&i.statusCode<300?t.binary?e.blob():e.text():e.json()}).then(function(t){i.statusCode>=200&&i.statusCode<300?e(null,i,t):(t.status=i.statusCode,e(t))}).catch(function(t){t||(t=new Error("canceled")),e(t)}),{abort:n.reject}}function Gn(t,e){var n,r,i=!1,o=function(){n.abort(),a()},u=function(){i=!0,n.abort(),a()},s={abort:o},a=function(){clearTimeout(r),s.abort=function(){},n&&(n.onprogress=void 0,n.upload&&(n.upload.onprogress=void 0),n.onreadystatechange=void 0,n=void 0)};n=t.xhr?new t.xhr:new XMLHttpRequest;try{n.open(t.method,t.url)}catch(t){return e(new Error(t.name||"Url is invalid"))}n.withCredentials=!("withCredentials"in t)||t.withCredentials,"GET"===t.method?delete t.headers["Content-Type"]:t.json&&(t.headers.Accept="application/json",t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json",t.body&&t.processData&&"string"!=typeof t.body&&(t.body=JSON.stringify(t.body))),t.binary&&(n.responseType="arraybuffer"),"body"in t||(t.body=null);for(var c in t.headers)t.headers.hasOwnProperty(c)&&n.setRequestHeader(c,t.headers[c]);return t.timeout>0&&(r=setTimeout(u,t.timeout),n.onprogress=function(){clearTimeout(r),4!==n.readyState&&(r=setTimeout(u,t.timeout))},void 0!==n.upload&&(n.upload.onprogress=n.onprogress)),n.onreadystatechange=function(){if(4===n.readyState){var r={statusCode:n.status};if(n.status>=200&&n.status<300){var o;o=t.binary?xe([n.response||""],{type:n.getResponseHeader("Content-Type")}):n.responseText,e(null,r,o)}else{var u={};if(i)u=new Error("ETIMEDOUT"),u.code="ETIMEDOUT";else if("string"==typeof n.response)try{u=JSON.parse(n.response)}catch(t){}u.status=n.status,e(u)}a()}},t.body&&t.body instanceof Blob?Re(t.body,function(t){n.send(t)}):n.send(t.body),s}function Qn(t,e){return Ko||t.xhr?Gn(t,e):Xn(t,e)}function Yn(){return""}function Zn(t,e){function n(e,n,r){if(!t.binary&&t.json&&"string"==typeof e)try{e=JSON.parse(e)}catch(t){return r(t)}Array.isArray(e)&&(e=e.map(function(t){return t.error||t.missing?j(t):t})),t.binary&&Wo(e,n),r(null,e,n)}return t=s(t),t=Ai({method:"GET",headers:{},json:!0,processData:!0,timeout:1e4,cache:!1},t),t.json&&(t.binary||(t.headers.Accept="application/json"),t.headers["Content-Type"]=t.headers["Content-Type"]||"application/json"),t.binary&&(t.encoding=null,t.json=!1),t.processData||(t.json=!1),Qn(t,function(r,i,o){if(r)return e(j(r));var u,s=i.headers&&i.headers["content-type"],a=o||Yn();if(!t.binary&&(t.json||!t.processData)&&"object"!=typeof a&&(/json/.test(s)||/^[\s]*\{/.test(a)&&/\}[\s]*$/.test(a)))try{a=JSON.parse(a.toString())}catch(t){}i.statusCode>=200&&i.statusCode<300?n(a,i,e):(u=j(a),u.status=i.statusCode,e(u))})}function tr(t,e){var n=navigator&&navigator.userAgent?navigator.userAgent.toLowerCase():"",r=-1!==n.indexOf("safari")&&-1===n.indexOf("chrome"),i=-1!==n.indexOf("msie"),o=-1!==n.indexOf("edge"),u=r||(i||o)&&"GET"===t.method,s=!("cache"in t)||t.cache;/^blob:/.test(t.url)||!u&&s||(t.url+=(-1!==t.url.indexOf("?")?"&":"?")+"_nonce="+Date.now());return Zn(t,e)}function er(t,e){return new bi(function(n,r){function i(){f++,t[h++]().then(u,s)}function o(){++l===p?c?r(c):n():a()}function u(){f--,o()}function s(t){f--,c=c||t,o()}function a(){for(;f<e&&h<p;)i()}var c,f=0,h=0,l=0,p=t.length;a()})}function nr(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];n.data=je(n.data,n.content_type)})}function rr(t){return/^_design/.test(t)?"_design/"+encodeURIComponent(t.slice(8)):/^_local/.test(t)?"_local/"+encodeURIComponent(t.slice(7)):encodeURIComponent(t)}function ir(t){return t._attachments&&Object.keys(t._attachments)?bi.all(Object.keys(t._attachments).map(function(e){var n=t._attachments[e];if(n.data&&"string"!=typeof n.data)return new bi(function(t){Te(n.data,t)}).then(function(t){n.data=t})})):bi.resolve()}function or(t){if(!t.prefix)return!1;var e=$(t.prefix).protocol;return"http"===e||"https"===e}function ur(t,e){if(or(e)){var n=e.name.substr(e.prefix.length);t=e.prefix+encodeURIComponent(n)}var r=$(t);(r.user||r.password)&&(r.auth={username:r.user,password:r.password});var i=r.path.replace(/(^\/|\/$)/g,"").split("/");return r.db=i.pop(),-1===r.db.indexOf("%")&&(r.db=encodeURIComponent(r.db)),r.path=i.join("/"),r}function sr(t,e){return ar(t,t.db+"/"+e)}function ar(t,e){var n=t.path?"/":"";return t.protocol+"://"+t.host+(t.port?":"+t.port:"")+"/"+t.path+n+e}function cr(t){return"?"+Object.keys(t).map(function(e){return e+"="+encodeURIComponent(t[e])}).join("&")}function fr(t,e){function n(t,e,n){var r=t.ajax||{},i=Ai(s(l),r,e),o=s(l.headers||{});return i.headers=Ai(o,r.headers,e.headers||{}),a.constructor.listeners("debug").length&&a.constructor.emit("debug",["http",i.method,i.url]),a._ajax(i,n)}function r(t,e){return new bi(function(r,i){n(t,e,function(t,e){if(t)return i(t);r(e)})})}function i(t,e){return h(t,ci()(function(t){o().then(function(){return e.apply(this,t)}).catch(function(e){t.pop()(e)})}))}function o(){return t.skipSetup||t.skip_setup?bi.resolve():y||(y=r({},{method:"GET",url:f}).catch(function(t){return t&&t.status&&404===t.status?(x(404,"PouchDB is just detecting if the remote exists."),r({},{method:"PUT",url:f})):bi.reject(t)}).catch(function(t){return!(!t||!t.status||412!==t.status)||bi.reject(t)}),y.catch(function(){y=null}),y)}function u(t){return t.split("/").map(encodeURIComponent).join("/")}var a=this,c=ur(t.name,t),f=sr(c,"");t=s(t);var l=t.ajax||{};if(t.auth||c.auth){var p=t.auth||c.auth,d=p.username+":"+p.password,v=ao(unescape(encodeURIComponent(d)));l.headers=l.headers||{},l.headers.Authorization="Basic "+v}a._ajax=tr;var y;di()(function(){e(null,a)}),a._remote=!0,a.type=function(){return"http"},a.id=i("id",function(t){n({},{method:"GET",url:ar(c,"")},function(e,n){var r=n&&n.uuid?n.uuid+c.db:sr(c,"");t(null,r)})}),a.request=i("request",function(t,e){t.url=sr(c,t.url),n({},t,e)}),a.compact=i("compact",function(t,e){"function"==typeof t&&(e=t,t={}),t=s(t),n(t,{url:sr(c,"_compact"),method:"POST"},function(){function n(){a.info(function(r,i){i&&!i.compact_running?e(null,{ok:!0}):setTimeout(n,t.interval||200)})}n()})}),a.bulkGet=h("bulkGet",function(t,e){function r(e){var r={};t.revs&&(r.revs=!0),t.attachments&&(r.attachments=!0),t.latest&&(r.latest=!0),n(t,{url:sr(c,"_bulk_get"+cr(r)),method:"POST",body:{docs:t.docs}},e)}function i(){for(var n=Ho,r=Math.ceil(t.docs.length/n),i=0,u=new Array(r),s=0;s<r;s++){var a=_(t,["revs","attachments","latest"]);a.ajax=l,a.docs=t.docs.slice(s*n,Math.min(t.docs.length,(s+1)*n)),m(o,a,function(t){return function(n,o){u[t]=o.results,++i===r&&e(null,{results:z(u)})}}(s))}}var o=this,u=ar(c,""),s=Go[u];"boolean"!=typeof s?r(function(t,n){t?(Go[u]=!1,x(t.status,"PouchDB is just detecting if the remote supports the _bulk_get API."),i()):(Go[u]=!0,e(null,n))}):s?r(e):i()}),a._info=function(t){o().then(function(){n({},{method:"GET",url:sr(c,"")},function(e,n){if(e)return t(e);n.host=sr(c,""),t(null,n)})}).catch(t)},a.get=i("get",function(t,e,n){function i(t){function n(n){var o=i[n],s=rr(t._id)+"/"+u(n)+"?rev="+t._rev;return r(e,{method:"GET",url:sr(c,s),binary:!0}).then(function(t){return e.binary?t:new bi(function(e){Te(t,e)})}).then(function(t){delete o.stub,delete o.length,o.data=t})}var i=t._attachments,o=i&&Object.keys(i);if(i&&o.length){return er(o.map(function(t){return function(){return n(t)}}),5)}}function o(t){return Array.isArray(t)?bi.all(t.map(function(t){if(t.ok)return i(t.ok)})):i(t)}"function"==typeof e&&(n=e,e={}),e=s(e);var a={};e.revs&&(a.revs=!0),e.revs_info&&(a.revs_info=!0),e.latest&&(a.latest=!0),e.open_revs&&("all"!==e.open_revs&&(e.open_revs=JSON.stringify(e.open_revs)),a.open_revs=e.open_revs),e.rev&&(a.rev=e.rev),e.conflicts&&(a.conflicts=e.conflicts),t=rr(t);var f={method:"GET",url:sr(c,t+cr(a))};r(e,f).then(function(t){return bi.resolve().then(function(){if(e.attachments)return o(t)}).then(function(){n(null,t)})}).catch(function(e){e.docId=t,n(e)})}),a.remove=i("remove",function(t,e,r,i){var o;"string"==typeof e?(o={_id:t,_rev:e},"function"==typeof r&&(i=r,r={})):(o=t,"function"==typeof e?(i=e,r={}):(i=r,r=e));var u=o._rev||r.rev;n(r,{method:"DELETE",url:sr(c,rr(o._id))+"?rev="+u},i)}),a.getAttachment=i("getAttachment",function(t,e,r,i){"function"==typeof r&&(i=r,r={});var o=r.rev?"?rev="+r.rev:"";n(r,{method:"GET",url:sr(c,rr(t))+"/"+u(e)+o,binary:!0},i)}),a.removeAttachment=i("removeAttachment",function(t,e,r,i){n({},{method:"DELETE",url:sr(c,rr(t)+"/"+u(e))+"?rev="+r},i)}),a.putAttachment=i("putAttachment",function(t,e,r,i,o,s){"function"==typeof o&&(s=o,o=i,i=r,r=null);var a=rr(t)+"/"+u(e),f=sr(c,a);if(r&&(f+="?rev="+r),"string"==typeof i){var h;try{h=so(i)}catch(t){return s(A(Ni,"Attachment is not a valid base64 string"))}i=h?Ae(h,o):""}n({},{headers:{"Content-Type":o},method:"PUT",url:f,processData:!1,body:i,timeout:l.timeout||6e4},s)}),a._bulkDocs=function(t,e,r){t.new_edits=e.new_edits,o().then(function(){return bi.all(t.docs.map(ir))}).then(function(){n(e,{method:"POST",url:sr(c,"_bulk_docs"),timeout:e.timeout,body:t},function(t,e){if(t)return r(t);e.forEach(function(t){t.ok=!0}),r(null,e)})}).catch(r)},a._put=function(t,e,r){o().then(function(){return ir(t)}).then(function(){n(e,{method:"PUT",url:sr(c,rr(t._id)),body:t},function(e,n){if(e)return e.docId=t&&t._id,r(e);r(null,n)})}).catch(r)},a.allDocs=i("allDocs",function(t,e){"function"==typeof t&&(e=t,t={}),t=s(t);var n,i={},o="GET";t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),t.include_docs&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.key&&(i.key=JSON.stringify(t.key)),t.start_key&&(t.startkey=t.start_key),t.startkey&&(i.startkey=JSON.stringify(t.startkey)),t.end_key&&(t.endkey=t.end_key),t.endkey&&(i.endkey=JSON.stringify(t.endkey)),void 0!==t.inclusive_end&&(i.inclusive_end=!!t.inclusive_end),void 0!==t.limit&&(i.limit=t.limit),void 0!==t.skip&&(i.skip=t.skip);var u=cr(i);void 0!==t.keys&&(o="POST",n={keys:t.keys}),r(t,{method:o,url:sr(c,"_all_docs"+u),body:n}).then(function(n){t.include_docs&&t.attachments&&t.binary&&n.rows.forEach(nr),e(null,n)}).catch(e)}),a._changes=function(t){var e="batch_size"in t?t.batch_size:Jo;t=s(t),!t.continuous||"heartbeat"in t||(t.heartbeat=Xo);var r="timeout"in t?t.timeout:"timeout"in l?l.timeout:3e4;"timeout"in t&&t.timeout&&r-t.timeout<Vo&&(r=t.timeout+Vo),"heartbeat"in t&&t.heartbeat&&r-t.heartbeat<Vo&&(r=t.heartbeat+Vo);var i={};"timeout"in t&&t.timeout&&(i.timeout=t.timeout);var u,a=void 0!==t.limit&&t.limit;u="return_docs"in t?t.return_docs:!("returnDocs"in t)||t.returnDocs;var f=a;if(t.style&&(i.style=t.style),(t.include_docs||t.filter&&"function"==typeof t.filter)&&(i.include_docs=!0),t.attachments&&(i.attachments=!0),t.continuous&&(i.feed="longpoll"),t.conflicts&&(i.conflicts=!0),t.descending&&(i.descending=!0),"heartbeat"in t&&t.heartbeat&&(i.heartbeat=t.heartbeat),t.filter&&"string"==typeof t.filter&&(i.filter=t.filter),t.view&&"string"==typeof t.view&&(i.filter="_view",i.view=t.view),t.query_params&&"object"==typeof t.query_params)for(var h in t.query_params)t.query_params.hasOwnProperty(h)&&(i[h]=t.query_params[h]);var p,d="GET";t.doc_ids?(i.filter="_doc_ids",d="POST",p={doc_ids:t.doc_ids}):t.selector&&(i.filter="_selector",d="POST",p={selector:t.selector});var v,_,y=function(u,s){if(!t.aborted){i.since=u,"object"==typeof i.since&&(i.since=JSON.stringify(i.since)),t.descending?a&&(i.limit=f):i.limit=!a||f>e?e:f;var h={method:d,url:sr(c,"_changes"+cr(i)),timeout:r,body:p};_=u,t.aborted||o().then(function(){v=n(t,h,s)}).catch(s)}},g={results:[]},m=function n(r,i){if(!t.aborted){var o=0;if(i&&i.results){o=i.results.length,g.last_seq=i.last_seq;({}).query=t.query_params,i.results=i.results.filter(function(e){f--;var n=D(t)(e);return n&&(t.include_docs&&t.attachments&&t.binary&&nr(e),u&&g.results.push(e),t.onChange(e)),n})}else if(r)return t.aborted=!0,void t.complete(r);i&&i.last_seq&&(_=i.last_seq);var s=a&&f<=0||i&&o<e||t.descending;(!t.continuous||a&&f<=0)&&s?t.complete(null,g):di()(function(){y(_,n)})}};return y(t.since||0,m),{cancel:function(){t.aborted=!0,v&&v.abort()}}},a.revsDiff=i("revsDiff",function(t,e,r){"function"==typeof e&&(r=e,e={}),n(e,{method:"POST",url:sr(c,"_revs_diff"),body:t},r)}),a._close=function(t){t()},a._destroy=function(t,e){n(t,{url:sr(c,""),method:"DELETE"},function(t,n){if(t&&t.status&&404!==t.status)return e(t);e(null,n)})}}function hr(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,hr)}catch(t){}}function lr(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,lr)}catch(t){}}function pr(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,pr)}catch(t){}}function dr(t,e){return e&&t.then(function(t){di()(function(){e(null,t)})},function(t){di()(function(){e(t)})}),t}function vr(t){return ci()(function(e){var n=e.pop(),r=t.apply(this,e);return"function"==typeof n&&dr(r,n),r})}function _r(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}function yr(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function gr(t){var e=new Ei(t),n=new Array(e.size),r=-1;return e.forEach(function(t){n[++r]=t}),n}function mr(t){var e=new Array(t.size),n=-1;return t.forEach(function(t,r){e[++n]=r}),e}function wr(t){return new pr("builtin "+t+" function requires map values to be numbers or number arrays")}function br(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];if("number"!=typeof i){if(!Array.isArray(i))throw wr("_sum");e="number"==typeof e?[e]:e;for(var o=0,u=i.length;o<u;o++){var s=i[o];if("number"!=typeof s)throw wr("_sum");void 0===e[o]?e.push(s):e[o]+=s}}else"number"==typeof e?e+=i:e[0]+=i}return e}function Sr(t,e){return U("return ("+t.replace(/;\s*$/,"")+");",{emit:e,sum:br,log:Yo,isArray:Zo,toJSON:tu})}function kr(){this.promise=new bi(function(t){t()})}function Er(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function Ir(t,e){return Er(t)+Er(e)+"undefined"}function Or(t,e,n,r,i,o){var u,s=Ir(n,r);if(!i&&(u=t._cachedViews=t._cachedViews||{},u[s]))return u[s];var a=t.info().then(function(a){function c(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var r=t.views[n]=t.views[n]||{};if(!r[f])return r[f]=!0,t}var f=a.db_name+"-mrview-"+(i?"temp":Ue(s));return P(t,"_local/"+o,c).then(function(){return t.registerDependentDatabase(f).then(function(e){var i=e.db;i.auto_compaction=!0;var o={name:f,db:i,sourceDB:t,adapter:t.adapter,mapFun:n,reduceFun:r};return o.db.get("_local/lastSeq").catch(function(t){if(404!==t.status)throw t}).then(function(t){return o.seq=t?t.seq:0,u&&o.db.once("destroyed",function(){delete u[s]}),o})})})});return u&&(u[s]=a),a}function xr(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function qr(t){return 1===t.length&&/^1-/.test(t[0].rev)}function Ar(t,e){try{t.emit("error",e)}catch(t){E("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),E("error",e)}}function jr(t){if(/^_sum/.test(t))return iu._sum;if(/^_count/.test(t))return iu._count;if(/^_stats/.test(t))return iu._stats;if(/^_/.test(t))throw new Error(t+" is not a supported reduce function.")}function Lr(t,e){if("function"==typeof t&&2===t.length){var n=t;return function(t){return n(t,e)}}return Sr(t.toString(),e)}function Dr(t){var e=t.toString(),n=jr(e);return n||Sr(e)}function zr(t,e){var n=t.views&&t.views[e];if("string"!=typeof n.map)throw new lr("ddoc "+t._id+" has no string view named "+e+", instead found object of type: "+typeof n.map)}function Tr(t,e,n){return ou.query.call(this,t,e,n)}function Rr(t){return ou.viewCleanup.call(this,t)}function Cr(t){return/^1-/.test(t)}function Nr(t,e,n){return!t._attachments||!t._attachments[n]||t._attachments[n].digest!==e._attachments[n].digest}function Mr(t,e){var n=Object.keys(e._attachments);return bi.all(n.map(function(n){return t.getAttachment(e._id,n,{rev:e._rev})}))}function Br(t,e,n){var r=C(e)&&!C(t),i=Object.keys(n._attachments);return r?t.get(n._id).then(function(r){return bi.all(i.map(function(i){return Nr(r,n,i)?e.getAttachment(n._id,i):t.getAttachment(r._id,i)}))}).catch(function(t){if(404!==t.status)throw t;return Mr(e,n)}):Mr(e,n)}function $r(t){var e=[];return Object.keys(t).forEach(function(n){t[n].missing.forEach(function(t){e.push({id:n,rev:t})})}),{docs:e,revs:!0,latest:!0}}function Ur(t,e,n,r){function i(){var i=$r(n);if(i.docs.length)return t.bulkGet(i).then(function(n){if(r.cancelled)throw new Error("cancelled");return bi.all(n.results.map(function(n){return bi.all(n.docs.map(function(n){var r=n.ok;return n.error&&(l=!1),r&&r._attachments?Br(e,t,r).then(function(t){var e=Object.keys(r._attachments);return t.forEach(function(t,n){var i=r._attachments[e[n]];delete i.stub,delete i.length,i.data=t}),r}):r}))})).then(function(t){h=h.concat(z(t).filter(Boolean))})})}function o(t){return t._attachments&&Object.keys(t._attachments).length>0}function u(t){return t._conflicts&&t._conflicts.length>0}function a(e){return t.allDocs({keys:e,include_docs:!0,conflicts:!0}).then(function(t){if(r.cancelled)throw new Error("cancelled");t.rows.forEach(function(t){t.deleted||!t.doc||!Cr(t.value.rev)||o(t.doc)||u(t.doc)||(t.doc._conflicts&&delete t.doc._conflicts,h.push(t.doc),delete n[t.id])})})}function c(){var t=Object.keys(n).filter(function(t){var e=n[t].missing;return 1===e.length&&Cr(e[0])});if(t.length>0)return a(t)}function f(){return{ok:l,docs:h}}n=s(n);var h=[],l=!0;return bi.resolve().then(c).then(i).then(f)}function Pr(t,e,n,r,i){return t.get(e).catch(function(n){if(404===n.status)return"http"!==t.adapter&&"https"!==t.adapter||x(404,"PouchDB is just checking if a remote checkpoint exists."),{session_id:r,_id:e,history:[],replicator:au,version:su};throw n}).then(function(o){if(!i.cancelled&&o.last_seq!==n)return o.history=(o.history||[]).filter(function(t){return t.session_id!==r}),o.history.unshift({last_seq:n,session_id:r}),o.history=o.history.slice(0,cu),o.version=su,o.replicator=au,o.session_id=r,o.last_seq=n,t.put(o).catch(function(o){if(409===o.status)return Pr(t,e,n,r,i);throw o})})}function Fr(t,e,n,r,i){this.src=t,this.target=e,this.id=n,this.returnValue=r,this.opts=i}function Kr(t,e){return t.session_id===e.session_id?{last_seq:t.last_seq,history:t.history}:Wr(t.history,e.history)}function Wr(t,e){var n=t[0],r=t.slice(1),i=e[0],o=e.slice(1);return n&&0!==e.length?Jr(n.session_id,e)?{last_seq:n.last_seq,history:t}:Jr(i.session_id,r)?{last_seq:i.last_seq,history:o}:Wr(r,o):{last_seq:fu,history:[]}}function Jr(t,e){var n=e[0],r=e.slice(1);return!(!t||0===e.length)&&(t===n.session_id||Jr(t,r))}function Hr(t){return"number"==typeof t.status&&4===Math.floor(t.status/100)}function Vr(t,e,n,r){if(!1===t.retry)return e.emit("error",n),void e.removeAllListeners();if("function"!=typeof t.back_off_function&&(t.back_off_function=O),e.emit("requestError",n),"active"===e.state||"pending"===e.state){e.emit("paused",n),e.state="stopped";var i=function(){t.current_back_off=lu};e.once("paused",function(){e.removeListener("active",i)}),e.once("active",i)}t.current_back_off=t.current_back_off||lu,t.current_back_off=t.back_off_function(t.current_back_off),setTimeout(r,t.current_back_off)}function Xr(t){return Object.keys(t).sort(Ft).reduce(function(e,n){return e[n]=t[n],e},{})}function Gr(t,e,n){var r=n.doc_ids?n.doc_ids.sort(Ft):"",i=n.filter?n.filter.toString():"",o="",u="",s="";return n.selector&&(s=JSON.stringify(n.selector)),n.filter&&n.query_params&&(o=JSON.stringify(Xr(n.query_params))),n.filter&&"_view"===n.filter&&(u=n.view.toString()),bi.all([t.id(),e.id()]).then(function(t){var e=t[0]+t[1]+i+u+o+r+s;return new bi(function(t){$e(e,t)})}).then(function(t){return"_local/"+(t=t.replace(/\//g,".").replace(/\+/g,"_"))})}function Qr(t,e,n,r,i){function o(){return k?bi.resolve():Gr(t,e,n).then(function(i){S=i;var o={};o=!1===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!1}:"source"===n.checkpoint?{writeSourceCheckpoint:!0,writeTargetCheckpoint:!1}:"target"===n.checkpoint?{writeSourceCheckpoint:!1,writeTargetCheckpoint:!0}:{writeSourceCheckpoint:!0,writeTargetCheckpoint:!0},k=new Fr(t,e,S,r,o)})}function u(){if(M=[],0!==b.docs.length){var t=b.docs;return e.bulkDocs({docs:t,new_edits:!1},{timeout:n.timeout}).then(function(e){if(r.cancelled)throw d(),new Error("cancelled");var n=Object.create(null);e.forEach(function(t){t.error&&(n[t.id]=t)});var o=Object.keys(n).length;i.doc_write_failures+=o,i.docs_written+=t.length-o,t.forEach(function(t){var e=n[t._id];if(e){if(i.errors.push(e),"unauthorized"!==e.name&&"forbidden"!==e.name)throw e;r.emit("denied",s(e))}else M.push(t)})},function(e){throw i.doc_write_failures+=t.length,e})}}function a(){if(b.error)throw new Error("There was a problem getting docs.");i.last_seq=j=b.seq;var t=s(i);return M.length&&(t.docs=M,r.emit("change",t)),O=!0,k.writeCheckpoint(b.seq,B).then(function(){if(O=!1,r.cancelled)throw d(),new Error("cancelled");b=void 0,g()}).catch(function(t){throw w(t),t})}function c(){var t={};return b.changes.forEach(function(e){"_user/"!==e.id&&(t[e.id]=e.changes.map(function(t){return t.rev}))}),e.revsDiff(t).then(function(t){if(r.cancelled)throw d(),new Error("cancelled");b.diffs=t})}function f(){return Ur(t,e,b.diffs,r).then(function(t){b.error=!t.ok,t.docs.forEach(function(t){delete b.diffs[t._id],i.docs_read++,b.docs.push(t)})})}function h(){if(!r.cancelled&&!b){if(0===E.length)return void l(!0);b=E.shift(),c().then(f).then(u).then(a).then(h).catch(function(t){p("batch processing terminated with error",t)})}}function l(t){if(0===I.changes.length)return void(0!==E.length||b||((L&&$.live||x)&&(r.state="pending",r.emit("paused")),x&&d()));(t||x||I.changes.length>=z)&&(E.push(I),I={seq:0,changes:[],docs:[]},"pending"!==r.state&&"stopped"!==r.state||(r.state="active",r.emit("active")),h())}function p(t,e){q||(e.message||(e.message=t),i.ok=!1,i.status="aborting",E=[],I={seq:0,changes:[],docs:[]},d(e))}function d(o){q||r.cancelled&&(i.status="cancelled",O)||(i.status=i.status||"complete",i.end_time=new Date,i.last_seq=j,q=!0,o?(o=A(o),o.result=i,"unauthorized"===o.name||"forbidden"===o.name?(r.emit("error",o),r.removeAllListeners()):Vr(n,r,o,function(){Qr(t,e,n,r)})):(r.emit("complete",i),r.removeAllListeners()))}function v(t){if(r.cancelled)return d();D(n)(t)&&(I.seq=t.seq,I.changes.push(t),l(0===E.length&&$.live))}function _(t){if(R=!1,r.cancelled)return d();if(t.results.length>0)$.since=t.last_seq,g(),l(!0);else{var e=function(){L?($.live=!0,g()):x=!0,l(!0)};b||0!==t.results.length?e():(O=!0,k.writeCheckpoint(t.last_seq,B).then(function(){O=!1,i.last_seq=j=t.last_seq,e()}).catch(w))}}function y(t){if(R=!1,r.cancelled)return d();p("changes rejected",t)}function g(){function e(){o.cancel()}function i(){r.removeListener("cancel",e)}if(!R&&!x&&E.length<T){R=!0,r._changes&&(r.removeListener("cancel",r._abortChanges),r._changes.cancel()),r.once("cancel",e);var o=t.changes($).on("change",v);o.then(i,i),o.then(_).catch(y),n.retry&&(r._changes=o,r._abortChanges=e)}}function m(){o().then(function(){return r.cancelled?void d():k.getCheckpoint().then(function(t){j=t,$={since:j,limit:z,batch_size:z,style:"all_docs",doc_ids:C,selector:N,return_docs:!0},n.filter&&("string"!=typeof n.filter?$.include_docs=!0:$.filter=n.filter),"heartbeat"in n&&($.heartbeat=n.heartbeat),"timeout"in n&&($.timeout=n.timeout),n.query_params&&($.query_params=n.query_params),n.view&&($.view=n.view),g()})}).catch(function(t){p("getCheckpoint rejected with ",t)})}function w(t){O=!1,p("writeCheckpoint completed with error",t)}var b,S,k,E=[],I={seq:0,changes:[],docs:[]},O=!1,x=!1,q=!1,j=0,L=n.continuous||n.live||!1,z=n.batch_size||100,T=n.batches_limit||10,R=!1,C=n.doc_ids,N=n.selector,M=[],B=Qi();i=i||{ok:!0,start_time:new Date,docs_read:0,docs_written:0,doc_write_failures:0,errors:[]};var $={};if(r.ready(t,e),r.cancelled)return void d();r._addedListeners||(r.once("cancel",d),"function"==typeof n.complete&&(r.once("error",n.complete),r.once("complete",function(t){n.complete(null,t)})),r._addedListeners=!0),void 0===n.since?m():o().then(function(){return O=!0,k.writeCheckpoint(n.since,B)}).then(function(){if(O=!1,r.cancelled)return void d();j=n.since,m()}).catch(w)}function Yr(){fi.EventEmitter.call(this),this.cancelled=!1,this.state="pending";var t=this,e=new bi(function(e,n){t.once("complete",e),t.once("error",n)});t.then=function(t,n){return e.then(t,n)},(t.catch=function(t){return e.catch(t)})(function(){})}function Zr(t,e){var n=e.PouchConstructor;return"string"==typeof t?new n(t,e):t}function ti(t,e,n,r){if("function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n.doc_ids&&!Array.isArray(n.doc_ids))throw A($i,"`doc_ids` filter parameter is not a list.");n.complete=r,n=s(n),n.continuous=n.continuous||n.live,n.retry="retry"in n&&n.retry,n.PouchConstructor=n.PouchConstructor||this;var i=new Yr(n);return Qr(Zr(t,n),Zr(e,n),n,i),i}function ei(t,e,n,r){return"function"==typeof n&&(r=n,n={}),void 0===n&&(n={}),n=s(n),n.PouchConstructor=n.PouchConstructor||this,t=Zr(t,n),e=Zr(e,n),new ni(t,e,n,r)}function ni(t,e,n,r){function i(t){d.emit("change",{direction:"pull",change:t})}function o(t){d.emit("change",{direction:"push",change:t})}function u(t){d.emit("denied",{direction:"push",doc:t})}function s(t){d.emit("denied",{direction:"pull",doc:t})}function a(){d.pushPaused=!0,d.pullPaused&&d.emit("paused")}function c(){d.pullPaused=!0,d.pushPaused&&d.emit("paused")}function f(){d.pushPaused=!1,d.pullPaused&&d.emit("active",{direction:"push"})}function h(){d.pullPaused=!1,d.pushPaused&&d.emit("active",{direction:"pull"})}function l(t){return function(e,n){var r="change"===e&&(n===i||n===o),l="denied"===e&&(n===s||n===u),p="paused"===e&&(n===c||n===a),v="active"===e&&(n===h||n===f);(r||l||p||v)&&(e in y||(y[e]={}),y[e][t]=!0,2===Object.keys(y[e]).length&&d.removeAllListeners(e))}}function p(t,e,n){-1==t.listeners(e).indexOf(n)&&t.on(e,n)}var d=this;this.canceled=!1;var v=n.push?Ai({},n,n.push):n,_=n.pull?Ai({},n,n.pull):n;this.push=ti(t,e,v),this.pull=ti(e,t,_),this.pushPaused=!0,this.pullPaused=!0;var y={};n.live&&(this.push.on("complete",d.pull.cancel.bind(d.pull)),this.pull.on("complete",d.push.cancel.bind(d.push))),this.on("newListener",function(t){"change"===t?(p(d.pull,"change",i),p(d.push,"change",o)):"denied"===t?(p(d.pull,"denied",s),p(d.push,"denied",u)):"active"===t?(p(d.pull,"active",h),p(d.push,"active",f)):"paused"===t&&(p(d.pull,"paused",c),p(d.push,"paused",a))}),this.on("removeListener",function(t){"change"===t?(d.pull.removeListener("change",i),d.push.removeListener("change",o)):"denied"===t?(d.pull.removeListener("denied",s),d.push.removeListener("denied",u)):"active"===t?(d.pull.removeListener("active",h),d.push.removeListener("active",f)):"paused"===t&&(d.pull.removeListener("paused",c),d.push.removeListener("paused",a))}),this.pull.on("removeListener",l("pull")),this.push.on("removeListener",l("push"));var g=bi.all([this.push,this.pull]).then(function(t){var e={push:t[0],pull:t[1]};return d.emit("complete",e),r&&r(null,e),d.removeAllListeners(),e},function(t){if(d.cancel(),r?r(t):d.emit("error",t),d.removeAllListeners(),r)throw t});this.then=function(t,e){return g.then(t,e)},this.catch=function(t){return g.catch(t)}}function ri(t){t.replicate=ti,t.sync=ei,Object.defineProperty(t.prototype,"replicate",{get:function(){var t=this;return{from:function(e,n,r){return t.constructor.replicate(e,t,n,r)},to:function(e,n,r){return t.constructor.replicate(t,e,n,r)}}}}),t.prototype.sync=function(t,e,n){return this.constructor.sync(this,t,e,n)}}var ii=n("qQO4"),oi=n.n(ii),ui=n("xz3w"),si=n.n(ui),ai=n("38I5"),ci=n.n(ai),fi=n("FRpO"),hi=(n.n(fi),n("4Bm0")),li=n.n(hi),pi=n("uUPe"),di=n.n(pi),vi=n("jcLW"),_i=n.n(vi),yi=n("13nb"),gi=n.n(yi),mi=n("cRy3"),wi=n.n(mi),bi="function"==typeof Promise?Promise:si.a,Si=Function.prototype.toString,ki=Si.call(Object);d.prototype.get=function(t){return this._store[l(t)]},d.prototype.set=function(t,e){return this._store[l(t)]=e,!0},d.prototype.has=function(t){return l(t)in this._store},d.prototype.delete=function(t){var e=l(t),n=e in this._store;return delete this._store[e],n},d.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var i=e[n],o=this._store[i];i=p(i),t(o,i)}},Object.defineProperty(d.prototype,"size",{get:function(){return Object.keys(this._store).length}}),v.prototype.add=function(t){return this._store.set(t,!0)},v.prototype.has=function(t){return this._store.has(t)},v.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(v.prototype,"size",{get:function(){return this._store.size}});var Ei,Ii;!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(Ei=v,Ii=d):(Ei=Set,Ii=Map);var Oi,xi=6;if(w())Oi=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),Oi=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){Oi=!1}li()(k,fi.EventEmitter),k.prototype.addListener=function(t,e,n,r){function i(){function t(){u=!1}if(o._listeners[e]){if(u)return void(u="waiting");u=!0;var s=_(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(s).on("change",function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))}).on("complete",function(){"waiting"===u&&di()(i),u=!1}).on("error",t)}}if(!this._listeners[e]){var o=this,u=!1;this._listeners[e]=i,this.on(t,i)}},k.prototype.removeListener=function(t,e){e in this._listeners&&(fi.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},k.prototype.notifyLocalWindows=function(t){w()?chrome.storage.local.set({dbName:t}):b()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},k.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var qi;qi="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var Ai=qi;li()(q,Error),q.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var ji=(new q(401,"unauthorized","Name or password is incorrect."),new q(400,"bad_request","Missing JSON list of 'docs'")),Li=new q(404,"not_found","missing"),Di=new q(409,"conflict","Document update conflict"),zi=new q(400,"bad_request","_id field must contain a string"),Ti=new q(412,"missing_id","_id is required for puts"),Ri=new q(400,"bad_request","Only reserved document ids may start with underscore."),Ci=(new q(412,"precondition_failed","Database not open"),new q(500,"unknown_error","Database encountered an unknown error")),Ni=new q(500,"badarg","Some query argument is invalid"),Mi=(new q(400,"invalid_request","Request was invalid"),new q(400,"query_parse_error","Some query parameter is invalid")),Bi=new q(500,"doc_validation","Bad special document member"),$i=new q(400,"bad_request","Something wrong with the request"),Ui=new q(400,"bad_request","Document must be a JSON object"),Pi=(new q(404,"not_found","Database not found"),new q(500,"indexed_db_went_bad","unknown")),Fi=new q(500,"web_sql_went_bad","unknown"),Ki=(new q(500,"levelDB_went_went_bad","unknown"),new q(403,"forbidden","Forbidden by design doc validate_doc_update function"),new q(400,"bad_request","Invalid rev format")),Wi=(new q(412,"file_exists","The database could not be created, the file already exists."),new q(412,"missing_stub","A pre-existing attachment stub wasn't found")),Ji=(new q(413,"invalid_url","Provided URL is invalid"),T.name);var Hi=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Vi="queryKey",Xi=/(?:^|&)([^&=]*)=?([^&]*)/g,Gi=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Qi=oi.a.v4;li()(pt,fi.EventEmitter),pt.prototype.cancel=function(){this.isCancelled=!0,this.db.taskqueue.isReady&&this.emit("cancel")},pt.prototype.validateChanges=function(t){var e=t.complete,n=this;xt._changesFilterPlugin?xt._changesFilterPlugin.validate(t,function(r){if(r)return e(r);n.doChanges(t)}):n.doChanges(t)},pt.prototype.doChanges=function(t){var e=this,n=t.complete;if(t=s(t),"live"in t&&!("continuous"in t)&&(t.continuous=t.live),t.processChange=dt,"latest"===t.since&&(t.since="now"),t.since||(t.since=0),"now"===t.since)return void this.db.info().then(function(r){if(e.isCancelled)return void n(null,{status:"cancelled"});t.since=r.update_seq,e.doChanges(t)},n);if(xt._changesFilterPlugin){if(xt._changesFilterPlugin.normalize(t),xt._changesFilterPlugin.shouldFilter(this,t))return xt._changesFilterPlugin.filter(this,t)}else["doc_ids","filter","selector","view"].forEach(function(e){e in t&&E("warn",'The "'+e+'" option was passed in to changes/replicate, but pouchdb-changes-filter plugin is not installed, so it was ignored. Please install the plugin to enable filtering.')});"descending"in t||(t.descending=!1),t.limit=0===t.limit?1:t.limit,t.complete=n;var r=this.db._changes(t);if(r&&"function"==typeof r.cancel){var i=e.cancel;e.cancel=ci()(function(t){r.cancel(),i.apply(this,t)})}},li()(kt,fi.EventEmitter),kt.prototype.post=h("post",function(t,e,n){if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(A(Ui));this.bulkDocs({docs:[t]},e,_t(n,t._id))}),kt.prototype.put=h("put",function(t,e,n){function r(n){"function"==typeof i._put&&!1!==e.new_edits?i._put(t,e,n):i.bulkDocs({docs:[t]},e,_t(n,t._id))}if("function"==typeof e&&(n=e,e={}),"object"!=typeof t||Array.isArray(t))return n(A(Ui));if(R(t._id),ft(t._id)&&"function"==typeof this._putLocal)return t._deleted?this._removeLocal(t,n):this._putLocal(t,n);var i=this;e.force&&t._rev?(!function(){var n=t._rev.split("-"),r=n[1],i=parseInt(n[0],10),o=i+1,u=K();t._revisions={start:o,ids:[u,r]},t._rev=o+"-"+u,e.new_edits=!1}(),r(function(e){n(e,e?null:{ok:!0,id:t._id,rev:t._rev})})):r(n)}),kt.prototype.putAttachment=h("putAttachment",function(t,e,n,r,i){function o(t){var n="_rev"in t?parseInt(t._rev,10):0;return t._attachments=t._attachments||{},t._attachments[e]={content_type:i,data:r,revpos:++n},u.put(t)}var u=this;return"function"==typeof i&&(i=r,r=n,n=null),void 0===i&&(i=r,r=n,n=null),i||E("warn","Attachment",e,"on document",t,"is missing content_type"),u.get(t).then(function(t){if(t._rev!==n)throw A(Di);return o(t)},function(e){if(e.reason===Li.message)return o({_id:t});throw e})}),kt.prototype.removeAttachment=h("removeAttachment",function(t,e,n,r){var i=this;i.get(t,function(t,o){return t?void r(t):o._rev!==n?void r(A(Di)):o._attachments?(delete o._attachments[e],0===Object.keys(o._attachments).length&&delete o._attachments,void i.put(o,r)):r()})}),kt.prototype.remove=h("remove",function(t,e,n,r){var i;"string"==typeof e?(i={_id:t,_rev:e},"function"==typeof n&&(r=n,n={})):(i=t,"function"==typeof e?(r=e,n={}):(r=n,n=e)),n=n||{},n.was_delete=!0;var o={_id:i._id,_rev:i._rev||n.rev};if(o._deleted=!0,ft(o._id)&&"function"==typeof this._removeLocal)return this._removeLocal(i,r);this.bulkDocs({docs:[o]},n,_t(r,o._id))}),kt.prototype.revsDiff=h("revsDiff",function(t,e,n){function r(t,e){s.has(t)||s.set(t,{missing:[]}),s.get(t).missing.push(e)}function i(e,n){var i=t[e].slice(0);J(n,function(t,n,o,u,s){var a=n+"-"+o,c=i.indexOf(a);-1!==c&&(i.splice(c,1),"available"!==s.status&&r(e,a))}),i.forEach(function(t){r(e,t)})}"function"==typeof e&&(n=e,e={});var o=Object.keys(t);if(!o.length)return n(null,{});var u=0,s=new Ii;o.map(function(e){this._getRevisionTree(e,function(r,a){if(r&&404===r.status&&"missing"===r.message)s.set(e,{missing:t[e]});else{if(r)return n(r);i(e,a)}if(++u===o.length){var c={};return s.forEach(function(t,e){c[e]=t}),n(null,c)}})},this)}),kt.prototype.bulkGet=h("bulkGet",function(t,e){m(this,t,e)}),kt.prototype.compactDocument=h("compactDocument",function(t,e,n){var r=this;this._getRevisionTree(t,function(i,o){if(i)return n(i);var u=mt(o),s=[],a=[];Object.keys(u).forEach(function(t){u[t]>e&&s.push(t)}),J(o,function(t,e,n,r,i){var o=e+"-"+n;"available"===i.status&&-1!==s.indexOf(o)&&a.push(o)}),r._doCompaction(t,a,n)})}),kt.prototype.compact=h("compact",function(t,e){"function"==typeof t&&(e=t,t={});var n=this;t=t||{},n._compactionQueue=n._compactionQueue||[],n._compactionQueue.push({opts:t,callback:e}),1===n._compactionQueue.length&&bt(n)}),kt.prototype._compact=function(t,e){function n(t){u.push(i.compactDocument(t.id,0))}function r(t){var n=t.last_seq;bi.all(u).then(function(){return P(i,"_local/compaction",function(t){return(!t.last_seq||t.last_seq<n)&&(t.last_seq=n,t)})}).then(function(){e(null,{ok:!0})}).catch(e)}var i=this,o={return_docs:!1,last_seq:t.last_seq||0},u=[];i.changes(o).on("change",n).on("complete",r).on("error",e)},kt.prototype.get=h("get",function(t,e,n){function r(){var r=[],u=i.length;if(!u)return n(null,r);i.forEach(function(i){o.get(t,{rev:i,revs:e.revs,latest:e.latest,attachments:e.attachments},function(t,e){if(t)r.push({missing:i});else{for(var o,s=0,a=r.length;s<a;s++)if(r[s].ok&&r[s].ok._rev===e._rev){o=!0;break}o||r.push({ok:e})}--u||n(null,r)})})}if("function"==typeof e&&(n=e,e={}),"string"!=typeof t)return n(A(zi));if(ft(t)&&"function"==typeof this._getLocal)return this._getLocal(t,n);var i=[],o=this;if(!e.open_revs)return this._get(t,e,function(r,i){if(r)return r.docId=t,n(r);var u=i.doc,s=i.metadata,a=i.ctx;if(e.conflicts){var c=X(s);c.length&&(u._conflicts=c)}if(ct(s,u._rev)&&(u._deleted=!0),e.revs||e.revs_info){for(var f=u._rev.split("-"),h=parseInt(f[0],10),l=f[1],p=Q(s.rev_tree),d=null,v=0;v<p.length;v++){var _=p[v],y=_.ids.map(function(t){return t.id}).indexOf(l);(y===h-1||!d&&-1!==y)&&(d=_)}var g=d.ids.map(function(t){return t.id}).indexOf(u._rev.split("-")[1])+1;if(d.ids.splice(g,d.ids.length-g),d.ids.reverse(),e.revs&&(u._revisions={start:d.pos+d.ids.length-1,ids:d.ids.map(function(t){return t.id})}),e.revs_info){var m=d.pos+d.ids.length;u._revs_info=d.ids.map(function(t){return m--,{rev:m+"-"+t.id,status:t.opts.status}})}}if(e.attachments&&u._attachments){var w=u._attachments,b=Object.keys(w).length;if(0===b)return n(null,u);Object.keys(w).forEach(function(t){this._getAttachment(u._id,t,w[t],{rev:u._rev,binary:e.binary,ctx:a},function(e,r){var i=u._attachments[t];i.data=r,delete i.stub,delete i.length,--b||n(null,u)})},o)}else{if(u._attachments)for(var S in u._attachments)u._attachments.hasOwnProperty(S)&&(u._attachments[S].stub=!0);n(null,u)}});if("all"===e.open_revs)this._getRevisionTree(t,function(t,e){if(t)return n(t);i=V(e).map(function(t){return t.rev}),r()});else{if(!Array.isArray(e.open_revs))return n(A(Ci,"function_clause"));i=e.open_revs;for(var u=0;u<i.length;u++){var s=i[u];if("string"!=typeof s||!/^\d+-/.test(s))return n(A(Ki))}r()}}),kt.prototype.getAttachment=h("getAttachment",function(t,e,n,r){var i=this;n instanceof Function&&(r=n,n={}),this._get(t,n,function(o,u){return o?r(o):u.doc._attachments&&u.doc._attachments[e]?(n.ctx=u.ctx,n.binary=!0,i._getAttachment(t,e,u.doc._attachments[e],n,r),void 0):r(A(Li))})}),kt.prototype.allDocs=h("allDocs",function(t,e){if("function"==typeof t&&(e=t,t={}),t.skip=void 0!==t.skip?t.skip:0,t.start_key&&(t.startkey=t.start_key),t.end_key&&(t.endkey=t.end_key),"keys"in t){if(!Array.isArray(t.keys))return e(new TypeError("options.keys must be an array"));var n=["startkey","endkey","key"].filter(function(e){return e in t})[0];if(n)return void e(A(Mi,"Query parameter `"+n+"` is not compatible with multi-get"));if(!C(this))return wt(this,t,e)}return this._allDocs(t,e)}),kt.prototype.changes=function(t,e){return"function"==typeof t&&(e=t,t={}),new pt(this,t,e)},kt.prototype.close=h("close",function(t){return this._closed=!0,this.emit("closed"),this._close(t)}),kt.prototype.info=h("info",function(t){var e=this;this._info(function(n,r){if(n)return t(n);r.db_name=r.db_name||e.name,r.auto_compaction=!(!e.auto_compaction||C(e)),r.adapter=e.adapter,t(null,r)})}),kt.prototype.id=h("id",function(t){return this._id(t)}),kt.prototype.type=function(){return"function"==typeof this._type?this._type():this.adapter},kt.prototype.bulkDocs=h("bulkDocs",function(t,e,n){if("function"==typeof e&&(n=e,e={}),e=e||{},Array.isArray(t)&&(t={docs:t}),!t||!t.docs||!Array.isArray(t.docs))return n(A(ji));for(var r=0;r<t.docs.length;++r)if("object"!=typeof t.docs[r]||Array.isArray(t.docs[r]))return n(A(Ui));var i;if(t.docs.forEach(function(t){t._attachments&&Object.keys(t._attachments).forEach(function(e){i=i||St(e),t._attachments[e].content_type||E("warn","Attachment",e,"on document",t._id,"is missing content_type")})}),i)return n(A($i,i));"new_edits"in e||(e.new_edits=!("new_edits"in t)||t.new_edits);var o=this;e.new_edits||C(o)||t.docs.sort(gt),yt(t.docs);var u=t.docs.map(function(t){return t._id});return this._bulkDocs(t,e,function(t,r){if(t)return n(t);if(e.new_edits||(r=r.filter(function(t){return t.error})),!C(o))for(var i=0,s=r.length;i<s;i++)r[i].id=r[i].id||u[i];n(null,r)})}),kt.prototype.registerDependentDatabase=h("registerDependentDatabase",function(t,e){function n(e){return e.dependentDbs=e.dependentDbs||{},!e.dependentDbs[t]&&(e.dependentDbs[t]=!0,e)}var r=new this.constructor(t,this.__opts);P(this,"_local/_pouch_dependentDbs",n).then(function(){e(null,{db:r})}).catch(e)}),kt.prototype.destroy=h("destroy",function(t,e){function n(){r._destroy(t,function(t,n){if(t)return e(t);r._destroyed=!0,r.emit("destroyed"),e(null,n||{ok:!0})})}"function"==typeof t&&(e=t,t={});var r=this,i=!("use_prefix"in r)||r.use_prefix;if(C(r))return n();r.get("_local/_pouch_dependentDbs",function(t,o){if(t)return 404!==t.status?e(t):n();var u=o.dependentDbs,s=r.constructor,a=Object.keys(u).map(function(t){var e=i?t.replace(new RegExp("^"+s.prefix),""):t;return new s(e,r.__opts).destroy()});bi.all(a).then(n,e)})}),Et.prototype.execute=function(){var t;if(this.failed)for(;t=this.queue.shift();)t(this.failed);else for(;t=this.queue.shift();)t()},Et.prototype.fail=function(t){this.failed=t,this.execute()},Et.prototype.ready=function(t){this.isReady=!0,this.db=t,this.execute()},Et.prototype.addTask=function(t){this.queue.push(t),this.failed&&this.execute()},li()(xt,kt),xt.adapters={},xt.preferredAdapters=[],xt.prefix="_pouch_";var Yi=new fi.EventEmitter;!function(t){Object.keys(fi.EventEmitter.prototype).forEach(function(e){"function"==typeof fi.EventEmitter.prototype[e]&&(t[e]=Yi[e].bind(Yi))});var e=t._destructionListeners=new Ii;t.on("ref",function(t){e.has(t.name)||e.set(t.name,[]),e.get(t.name).push(t)}),t.on("unref",function(t){if(e.has(t.name)){var n=e.get(t.name),r=n.indexOf(t);r<0||(n.splice(r,1),n.length>1?e.set(t.name,n):e.delete(t.name))}}),t.on("destroyed",function(t){if(e.has(t)){var n=e.get(t);e.delete(t),n.forEach(function(t){t.emit("destroyed",!0)})}})}(xt),xt.adapter=function(t,e,n){e.valid()&&(xt.adapters[t]=e,n&&xt.preferredAdapters.push(t))},xt.plugin=function(t){if("function"==typeof t)t(xt);else{if("object"!=typeof t||0===Object.keys(t).length)throw new Error('Invalid plugin: got "'+t+'", expected an object or a function');Object.keys(t).forEach(function(e){xt.prototype[e]=t[e]})}return this.__defaults&&(xt.__defaults=Ai({},this.__defaults)),xt},xt.defaults=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);n=n||{},t&&"object"==typeof t&&(n=t,t=n.name,delete n.name),n=Ai({},e.__defaults,n),xt.call(this,t,n)}return li()(e,xt),e.preferredAdapters=xt.preferredAdapters.slice(),Object.keys(xt).forEach(function(t){t in e||(e[t]=xt[t])}),e.__defaults=Ai({},this.__defaults,t),e};var Zi=["$or","$nor","$not"],to=-324,eo=3,no="",ro={$elemMatch:function(t,e,n,r){return!!Array.isArray(r)&&(0!==r.length&&r.some("object"==typeof r[0]?function(t){return re(t,e,Object.keys(e))}:function(r){return ie(e,t,n,r)}))},$allMatch:function(t,e,n,r){return!!Array.isArray(r)&&(0!==r.length&&r.every("object"==typeof r[0]?function(t){return re(t,e,Object.keys(e))}:function(r){return ie(e,t,n,r)}))},$eq:function(t,e,n,r){return ae(r)&&0===Ft(r,e)},$gte:function(t,e,n,r){return ae(r)&&Ft(r,e)>=0},$gt:function(t,e,n,r){return ae(r)&&Ft(r,e)>0},$lte:function(t,e,n,r){return ae(r)&&Ft(r,e)<=0},$lt:function(t,e,n,r){return ae(r)&&Ft(r,e)<0},$exists:function(t,e,n,r){return e?ae(r):!ae(r)},$mod:function(t,e,n,r){return se(r)&&ce(r,e)},$ne:function(t,e,n,r){return e.every(function(t){return 0!==Ft(r,t)})},$in:function(t,e,n,r){return se(r)&&fe(r,e)},$nin:function(t,e,n,r){return se(r)&&!fe(r,e)},$size:function(t,e,n,r){return se(r)&&le(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&he(r,e)},$regex:function(t,e,n,r){return se(r)&&pe(r,e)},$type:function(t,e,n,r){return de(r,e)}};xt.plugin(qt),xt.plugin(Se),xt.version="6.3.4";var io,oo=ke(["_id","_rev","_attachments","_deleted","_revisions","_revs_info","_conflicts","_deleted_conflicts","_local_seq","_rev_tree","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats","_removed"]),uo=ke(["_attachments","_replication_id","_replication_state","_replication_state_time","_replication_state_reason","_replication_stats"]),so=function(t){return atob(t)},ao=function(t){return btoa(t)},co=t.setImmediate||t.setTimeout,fo=32768,ho=5,lo="document-store",po="by-sequence",vo="attach-store",_o="attach-seq-store",yo="meta-store",go="local-store",mo="detect-blob-support",wo=new k,bo=!1,So=[],ko=new Ii,Eo=new Ii;mn.valid=function(){return!("undefined"!=typeof openDatabase&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform))&&"undefined"!=typeof indexedDB&&"undefined"!=typeof IDBKeyRange};var Io=function(t){t.adapter("idb",mn,!0)},Oo=7,xo=xn("document-store"),qo=xn("by-sequence"),Ao=xn("attach-store"),jo=xn("local-store"),Lo=xn("metadata-store"),Do=xn("attach-seq-store"),zo=new Ii,To=new k,Ro=1,Co="CREATE INDEX IF NOT EXISTS 'by-seq-deleted-idx' ON "+qo+" (seq, deleted)",No="CREATE UNIQUE INDEX IF NOT EXISTS 'by-seq-doc-id-rev' ON "+qo+" (doc_id, rev)",Mo="CREATE INDEX IF NOT EXISTS 'doc-winningseq-idx' ON "+xo+" (winningseq)",Bo="CREATE INDEX IF NOT EXISTS 'attach-seq-seq-idx' ON "+Do+" (seq)",$o="CREATE UNIQUE INDEX IF NOT EXISTS 'attach-seq-digest-idx' ON "+Do+" (digest, seq)",Uo=qo+".seq = "+xo+".winningseq",Po=qo+".seq AS seq, "+qo+".deleted AS deleted, "+qo+".json AS data, "+qo+".rev AS rev, "+xo+".json AS metadata";Hn.valid=Wn,Hn.use_prefix=!0;var Fo=function(t){t.adapter("websql",Hn,!0)},Ko=function(){try{return new XMLHttpRequest,!0}catch(t){return!1}}(),Wo=function(){},Jo=25,Ho=50,Vo=5e3,Xo=1e4,Go={};fr.valid=function(){return!0};var Qo=function(t){t.adapter("http",fr,!1),t.adapter("https",fr,!1)};li()(hr,Error),li()(lr,Error),li()(pr,Error);var Yo=E.bind(null,"log"),Zo=Array.isArray,tu=JSON.parse;kr.prototype.add=function(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()})},kr.prototype.finish=function(){return this.promise};var eu={},nu=new kr,ru=50,iu={_sum:function(t,e){return br(e)},_count:function(t,e){return e.length},_stats:function(t,e){return{sum:br(e),min:Math.min.apply(null,e),max:Math.max.apply(null,e),count:e.length,sumsqr:function(t){for(var e=0,n=0,r=t.length;n<r;n++){var i=t[n];e+=i*i}return e}(e)}}},ou=function(t,e,n,r){function i(t,e,n){try{e(n)}catch(e){Ar(t,e)}}function o(t,e,n,r,i){try{return{output:e(n,r,i)}}catch(e){return Ar(t,e),{error:e}}}function u(t,e){var n=Ft(t.key,e.key);return 0!==n?n:Ft(t.value,e.value)}function s(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function a(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function c(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var n=e[t];e[t].data=je(n.data,n.content_type)})})}function f(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&c(e),e}}function h(t,e,n,r){var i=e[t];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(t+"="+i))}function l(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function p(t){return t.group_level=l(t.group_level),t.limit=l(t.limit),t.skip=l(t.skip),t}function d(t){if(t){if("number"!=typeof t)return new hr('Invalid value for integer: "'+t+'"');if(t<0)return new hr('Invalid value for positive integer: "'+t+'"')}}function v(t,e){var n=t.descending?"endkey":"startkey",r=t.descending?"startkey":"endkey";if(void 0!==t[n]&&void 0!==t[r]&&Ft(t[n],t[r])>0)throw new hr("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new hr("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new hr("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var n=d(t[e]);if(n)throw n})}function _(t,e,n){var r,i=[],o="GET";if(h("reduce",n,i),h("include_docs",n,i),h("attachments",n,i),h("limit",n,i),h("descending",n,i),h("group",n,i),h("group_level",n,i),h("skip",n,i),h("stale",n,i),h("conflicts",n,i),h("startkey",n,i,!0),h("start_key",n,i,!0),h("endkey",n,i,!0),h("end_key",n,i,!0),h("inclusive_end",n,i),h("key",n,i,!0),i=i.join("&"),i=""===i?"":"?"+i,void 0!==n.keys){var u="keys="+encodeURIComponent(JSON.stringify(n.keys));u.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+u:(o="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var s=xr(e);return t.request({method:o,url:"_design/"+s[0]+"/_view/"+s[1]+i,body:r}).then(function(t){return t.rows.forEach(function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)}),t}).then(f(n))}return r=r||{},Object.keys(e).forEach(function(t){r[t]=Array.isArray(e[t])?e[t]:e[t].toString()}),t.request({method:"POST",url:"_temp_view"+i,body:r}).then(f(n))}function y(t,e,n){return new bi(function(r,i){t._query(e,n,function(t,e){if(t)return i(t);r(e)})})}function g(t){return new bi(function(e,n){t._viewCleanup(function(t,r){if(t)return n(t);e(r)})})}function m(t){return function(e){if(404===e.status)return t;throw e}}function w(t,e,n){function r(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):bi.resolve({rows:[]})}function i(t,e){for(var n=[],r=new Ei,i=0,o=e.rows.length;i<o;i++){var u=e.rows[i],s=u.doc;if(s&&(n.push(s),r.add(s._id),!(s._deleted=!a.has(s._id)))){var c=a.get(s._id);"value"in c&&(s.value=c.value)}}var f=mr(a);return f.forEach(function(t){if(!r.has(t)){var e={_id:t},i=a.get(t);"value"in i&&(e.value=i.value),n.push(e)}}),t.keys=gr(f.concat(t.keys)),n.push(t),n}var o="_local/doc_"+t,u={_id:o,keys:[]},s=n.get(t),a=s[0],c=s[1];return function(){return qr(c)?bi.resolve(u):e.db.get(o).catch(m(u))}().then(function(t){return r(t).then(function(e){return i(t,e)})})}function b(t,e,n){return t.db.get("_local/lastSeq").catch(m({_id:"_local/lastSeq",seq:0})).then(function(r){var i=mr(e);return bi.all(i.map(function(n){return w(n,t,e)})).then(function(e){var i=z(e);return r.seq=n,i.push(r),t.db.bulkDocs({docs:i})})})}function S(t){var e="string"==typeof t?t:t.name,n=eu[e];return n||(n=eu[e]=new kr),n}function k(t){return yr(S(t),function(){return E(t)})()}function E(t){function n(t,e){var n={id:h._id,key:Kt(t)};void 0!==e&&null!==e&&(n.value=Kt(e)),f.push(n)}function r(e,n){return function(){return b(t,e,n)}}function o(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:p,limit:ru}).then(s)}function s(t){var e=t.results;if(e.length){var n=a(e);if(d.add(r(n,p)),!(e.length<ru))return o()}}function a(e){for(var n=new Ii,r=0,o=e.length;r<o;r++){var s=e[r];if("_"!==s.doc._id[0]){f=[],h=s.doc,h._deleted||i(t.sourceDB,l,h),f.sort(u);n.set(s.doc._id,[c(f),s.changes])}p=s.seq}return n}function c(t){for(var e,n=new Ii,r=0,i=t.length;r<i;r++){var o=t[r],u=[o.key,o.id];r>0&&0===Ft(o.key,e)&&u.push(r),n.set(Jt(u),o),e=o.key}return n}var f,h,l=e(t.mapFun,n),p=t.seq||0,d=new kr;return o().then(function(){return d.finish()}).then(function(){t.seq=p})}function I(t,e,r){0===r.group_level&&delete r.group_level;var i=r.group||r.group_level,u=n(t.reduceFun),a=[],c=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;e.forEach(function(t){var e=a[a.length-1],n=i?t.key:null;if(i&&Array.isArray(n)&&(n=n.slice(0,c)),e&&0===Ft(e.groupKey,n))return e.keys.push([t.key,t.id]),void e.values.push(t.value);a.push({keys:[[t.key,t.id]],values:[t.value],groupKey:n})}),e=[];for(var f=0,h=a.length;f<h;f++){var l=a[f],p=o(t.sourceDB,u,l.keys,l.values,!1);if(p.error&&p.error instanceof pr)throw p.error;e.push({value:p.error?null:p.output,key:l.groupKey})}return{rows:s(e,r.limit,r.skip)}}function O(t,e){return yr(S(t),function(){return x(t,e)})()}function x(t,e){function n(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return i=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),n=["id","key","value"];if(!(e<n||e>n))return t.doc.value}var r=Xt(t.doc._id);return{key:r[0],id:r[1],value:"value"in t.doc?t.doc.value:null}})})}function r(n){var r;if(r=o?I(t,n,e):{total_rows:i,offset:u,rows:n},e.include_docs){var s=gr(n.map(a));return t.sourceDB.allDocs({keys:s,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e=new Ii;return t.rows.forEach(function(t){e.set(t.id,t.doc)}),n.forEach(function(t){var n=a(t),r=e.get(n);r&&(t.doc=r)}),r})}return r}var i,o=t.reduceFun&&!1!==e.reduce,u=e.skip||0;if(void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys),void 0!==e.keys){var s=e.keys,c=s.map(function(t){return n({startkey:Jt([t]),endkey:Jt([t,{}])})});return bi.all(c).then(z).then(r)}var f,h,l={descending:e.descending};if("start_key"in e&&(f=e.start_key),"startkey"in e&&(f=e.startkey),"end_key"in e&&(h=e.end_key),"endkey"in e&&(h=e.endkey),void 0!==f&&(l.startkey=Jt(e.descending?[f,{}]:[f])),void 0!==h){var p=!1!==e.inclusive_end;e.descending&&(p=!p),l.endkey=Jt(p?[h,{}]:[h])}if(void 0!==e.key){var d=Jt([e.key]),v=Jt([e.key,{}]);l.descending?(l.endkey=d,l.startkey=v):(l.startkey=d,l.endkey=v)}return o||("number"==typeof e.limit&&(l.limit=e.limit),l.skip=u),n(l).then(r)}function q(t){return t.request({method:"POST",url:"_view_cleanup"})}function A(e){return e.get("_local/"+t).then(function(t){var n=new Ii;Object.keys(t.views).forEach(function(t){var e=xr(t),r="_design/"+e[0],i=e[1],o=n.get(r);o||(o=new Ei,n.set(r,o)),o.add(i)});var r={keys:mr(n),include_docs:!0};return e.allDocs(r).then(function(r){var i={};r.rows.forEach(function(e){var r=e.key.substring(8);n.get(e.key).forEach(function(n){var o=r+"/"+n;t.views[o]||(o=n);var u=e.doc&&e.doc.views&&e.doc.views[n];Object.keys(t.views[o]).forEach(function(t){i[t]=i[t]||u})})});var o=Object.keys(i).filter(function(t){return!i[t]}),u=o.map(function(t){return yr(S(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return bi.all(u).then(function(){return{ok:!0}})})},m({ok:!0}))}function j(e,n,i){if("function"==typeof e._query)return y(e,n,i);if(C(e))return _(e,n,i);if("string"!=typeof n)return v(i,n),nu.add(function(){return Or(e,"temp_view/temp_view",n.map,n.reduce,!0,t).then(function(t){return _r(k(t).then(function(){return O(t,i)}),function(){return t.db.destroy()})})}),nu.finish();var o=n,u=xr(o),s=u[0],a=u[1];return e.get("_design/"+s).then(function(n){var u=n.views&&n.views[a];if(!u)throw new lr("ddoc "+n._id+" has no view named "+a);return r(n,a),v(i,u),Or(e,o,u.map,u.reduce,!1,t).then(function(t){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&di()(function(){k(t)}),O(t,i)):k(t).then(function(){return O(t,i)})})})}function L(t,e,n){var r=this;"function"==typeof e&&(n=e,e={}),e=e?p(e):{},"function"==typeof t&&(t={map:t});var i=bi.resolve().then(function(){return j(r,t,e)});return dr(i,n),i}return{query:L,viewCleanup:vr(function(){var t=this;return"function"==typeof t._viewCleanup?g(t):C(t)?q(t):A(t)})}}("mrviews",Lr,Dr,zr),uu={query:Tr,viewCleanup:Rr},su=1,au="pouchdb",cu=5,fu=0;Fr.prototype.writeCheckpoint=function(t,e){var n=this;return this.updateTarget(t,e).then(function(){return n.updateSource(t,e)})},Fr.prototype.updateTarget=function(t,e){return this.opts.writeTargetCheckpoint?Pr(this.target,this.id,t,e,this.returnValue):bi.resolve(!0)},Fr.prototype.updateSource=function(t,e){if(this.opts.writeSourceCheckpoint){var n=this;return this.readOnlySource?bi.resolve(!0):Pr(this.src,this.id,t,e,this.returnValue).catch(function(t){if(Hr(t))return n.readOnlySource=!0,!0;throw t})}return bi.resolve(!0)};var hu={undefined:function(t,e){return 0===Ft(t.last_seq,e.last_seq)?e.last_seq:0},1:function(t,e){return Kr(e,t).last_seq}};Fr.prototype.getCheckpoint=function(){var t=this;return t.target.get(t.id).then(function(e){return t.readOnlySource?bi.resolve(e.last_seq):t.src.get(t.id).then(function(t){if(e.version!==t.version)return fu;var n;return n=e.version?e.version.toString():"undefined",n in hu?hu[n](e,t):fu},function(n){if(404===n.status&&e.last_seq)return t.src.put({_id:t.id,last_seq:fu}).then(function(){return fu},function(n){return Hr(n)?(t.readOnlySource=!0,e.last_seq):fu});throw n})}).catch(function(t){if(404!==t.status)throw t;return fu})};var lu=0;li()(Yr,fi.EventEmitter),Yr.prototype.cancel=function(){this.cancelled=!0,this.state="cancelled",this.emit("cancel")},Yr.prototype.ready=function(t,e){function n(){i.cancel()}function r(){t.removeListener("destroyed",n),e.removeListener("destroyed",n)}var i=this;i._readyCalled||(i._readyCalled=!0,t.once("destroyed",n),e.once("destroyed",n),i.once("complete",r))},li()(ni,fi.EventEmitter),ni.prototype.cancel=function(){this.canceled||(this.canceled=!0,this.push.cancel(),this.pull.cancel())},xt.plugin(Io).plugin(Fo).plugin(Qo).plugin(uu).plugin(ri),e.a=xt}).call(e,n("h6ac"))},0:function(t,e,n){t.exports=n("pwNi")},"13nb":function(t){!function(e){t.exports=e()}(function(t){"use strict";function e(t,e){var n=t[0],r=t[1],i=t[2],o=t[3];n+=(r&i|~r&o)+e[0]-680876936|0,n=(n<<7|n>>>25)+r|0,o+=(n&r|~n&i)+e[1]-389564586|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&r)+e[2]+606105819|0,i=(i<<17|i>>>15)+o|0,r+=(i&o|~i&n)+e[3]-1044525330|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&o)+e[4]-176418897|0,n=(n<<7|n>>>25)+r|0,o+=(n&r|~n&i)+e[5]+1200080426|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&r)+e[6]-1473231341|0,i=(i<<17|i>>>15)+o|0,r+=(i&o|~i&n)+e[7]-45705983|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&o)+e[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,o+=(n&r|~n&i)+e[9]-1958414417|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&r)+e[10]-42063|0,i=(i<<17|i>>>15)+o|0,r+=(i&o|~i&n)+e[11]-1990404162|0,r=(r<<22|r>>>10)+i|0,n+=(r&i|~r&o)+e[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,o+=(n&r|~n&i)+e[13]-40341101|0,o=(o<<12|o>>>20)+n|0,i+=(o&n|~o&r)+e[14]-1502002290|0,i=(i<<17|i>>>15)+o|0,r+=(i&o|~i&n)+e[15]+1236535329|0,r=(r<<22|r>>>10)+i|0,n+=(r&o|i&~o)+e[1]-165796510|0,n=(n<<5|n>>>27)+r|0,o+=(n&i|r&~i)+e[6]-1069501632|0,o=(o<<9|o>>>23)+n|0,i+=(o&r|n&~r)+e[11]+643717713|0,i=(i<<14|i>>>18)+o|0,r+=(i&n|o&~n)+e[0]-373897302|0,r=(r<<20|r>>>12)+i|0,n+=(r&o|i&~o)+e[5]-701558691|0,n=(n<<5|n>>>27)+r|0,o+=(n&i|r&~i)+e[10]+38016083|0,o=(o<<9|o>>>23)+n|0,i+=(o&r|n&~r)+e[15]-660478335|0,i=(i<<14|i>>>18)+o|0,r+=(i&n|o&~n)+e[4]-405537848|0,r=(r<<20|r>>>12)+i|0,n+=(r&o|i&~o)+e[9]+568446438|0,n=(n<<5|n>>>27)+r|0,o+=(n&i|r&~i)+e[14]-1019803690|0,o=(o<<9|o>>>23)+n|0,i+=(o&r|n&~r)+e[3]-187363961|0,i=(i<<14|i>>>18)+o|0,r+=(i&n|o&~n)+e[8]+1163531501|0,r=(r<<20|r>>>12)+i|0,n+=(r&o|i&~o)+e[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,o+=(n&i|r&~i)+e[2]-51403784|0,o=(o<<9|o>>>23)+n|0,i+=(o&r|n&~r)+e[7]+1735328473|0,i=(i<<14|i>>>18)+o|0,r+=(i&n|o&~n)+e[12]-1926607734|0,r=(r<<20|r>>>12)+i|0,n+=(r^i^o)+e[5]-378558|0,n=(n<<4|n>>>28)+r|0,o+=(n^r^i)+e[8]-2022574463|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^r)+e[11]+1839030562|0,i=(i<<16|i>>>16)+o|0,r+=(i^o^n)+e[14]-35309556|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^o)+e[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,o+=(n^r^i)+e[4]+1272893353|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^r)+e[7]-155497632|0,i=(i<<16|i>>>16)+o|0,r+=(i^o^n)+e[10]-1094730640|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^o)+e[13]+681279174|0,n=(n<<4|n>>>28)+r|0,o+=(n^r^i)+e[0]-358537222|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^r)+e[3]-722521979|0,i=(i<<16|i>>>16)+o|0,r+=(i^o^n)+e[6]+76029189|0,r=(r<<23|r>>>9)+i|0,n+=(r^i^o)+e[9]-640364487|0,n=(n<<4|n>>>28)+r|0,o+=(n^r^i)+e[12]-421815835|0,o=(o<<11|o>>>21)+n|0,i+=(o^n^r)+e[15]+530742520|0,i=(i<<16|i>>>16)+o|0,r+=(i^o^n)+e[2]-995338651|0,r=(r<<23|r>>>9)+i|0,n+=(i^(r|~o))+e[0]-198630844|0,n=(n<<6|n>>>26)+r|0,o+=(r^(n|~i))+e[7]+1126891415|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~r))+e[14]-1416354905|0,i=(i<<15|i>>>17)+o|0,r+=(o^(i|~n))+e[5]-57434055|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~o))+e[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,o+=(r^(n|~i))+e[3]-1894986606|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~r))+e[10]-1051523|0,i=(i<<15|i>>>17)+o|0,r+=(o^(i|~n))+e[1]-2054922799|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~o))+e[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,o+=(r^(n|~i))+e[15]-30611744|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~r))+e[6]-1560198380|0,i=(i<<15|i>>>17)+o|0,r+=(o^(i|~n))+e[13]+1309151649|0,r=(r<<21|r>>>11)+i|0,n+=(i^(r|~o))+e[4]-145523070|0,n=(n<<6|n>>>26)+r|0,o+=(r^(n|~i))+e[11]-1120210379|0,o=(o<<10|o>>>22)+n|0,i+=(n^(o|~r))+e[2]+718787259|0,i=(i<<15|i>>>17)+o|0,r+=(o^(i|~n))+e[9]-343485551|0,r=(r<<21|r>>>11)+i|0,t[0]=n+t[0]|0,t[1]=r+t[1]|0,t[2]=i+t[2]|0,t[3]=o+t[3]|0}function n(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}function r(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t[e]+(t[e+1]<<8)+(t[e+2]<<16)+(t[e+3]<<24);return n}function i(t){var r,i,o,u,s,a,c=t.length,f=[1732584193,-271733879,-1732584194,271733878];for(r=64;r<=c;r+=64)e(f,n(t.substring(r-64,r)));for(t=t.substring(r-64),i=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],r=0;r<i;r+=1)o[r>>2]|=t.charCodeAt(r)<<(r%4<<3);if(o[r>>2]|=128<<(r%4<<3),r>55)for(e(f,o),r=0;r<16;r+=1)o[r]=0;return u=8*c,u=u.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(u[2],16),a=parseInt(u[1],16)||0,o[14]=s,o[15]=a,e(f,o),f}function o(t){var n,i,o,u,s,a,c=t.length,f=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=c;n+=64)e(f,r(t.subarray(n-64,n)));for(t=n-64<c?t.subarray(n-64):new Uint8Array(0),i=t.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],n=0;n<i;n+=1)o[n>>2]|=t[n]<<(n%4<<3);if(o[n>>2]|=128<<(n%4<<3),n>55)for(e(f,o),n=0;n<16;n+=1)o[n]=0;return u=8*c,u=u.toString(16).match(/(.*?)(.{0,8})$/),s=parseInt(u[2],16),a=parseInt(u[1],16)||0,o[14]=s,o[15]=a,e(f,o),f}function u(t){var e,n="";for(e=0;e<4;e+=1)n+=d[t>>8*e+4&15]+d[t>>8*e&15];return n}function s(t){var e;for(e=0;e<t.length;e+=1)t[e]=u(t[e]);return t.join("")}function a(t){return/[\u0080-\uFFFF]/.test(t)&&(t=unescape(encodeURIComponent(t))),t}function c(t,e){var n,r=t.length,i=new ArrayBuffer(r),o=new Uint8Array(i);for(n=0;n<r;n+=1)o[n]=t.charCodeAt(n);return e?o:i}function f(t){return String.fromCharCode.apply(null,new Uint8Array(t))}function h(t,e,n){var r=new Uint8Array(t.byteLength+e.byteLength);return r.set(new Uint8Array(t)),r.set(new Uint8Array(e),t.byteLength),n?r:r.buffer}function l(t){var e,n=[],r=t.length;for(e=0;e<r-1;e+=2)n.push(parseInt(t.substr(e,2),16));return String.fromCharCode.apply(String,n)}function p(){this.reset()}var d=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];return"5d41402abc4b2a76b9719d911017c592"!==s(i("hello"))&&function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},"undefined"==typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function e(t,e){return t=0|t||0,t<0?Math.max(t+e,0):Math.min(t,e)}ArrayBuffer.prototype.slice=function(n,r){var i,o,u,s,a=this.byteLength,c=e(n,a),f=a;return r!==t&&(f=e(r,a)),c>f?new ArrayBuffer(0):(i=f-c,o=new ArrayBuffer(i),u=new Uint8Array(o),s=new Uint8Array(this,c,i),u.set(s),o)}}(),p.prototype.append=function(t){return this.appendBinary(a(t)),this},p.prototype.appendBinary=function(t){this._buff+=t,this._length+=t.length;var r,i=this._buff.length;for(r=64;r<=i;r+=64)e(this._hash,n(this._buff.substring(r-64,r)));return this._buff=this._buff.substring(r-64),this},p.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r.charCodeAt(e)<<(e%4<<3);return this._finish(o,i),n=s(this._hash),t&&(n=l(n)),this.reset(),n},p.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash}},p.prototype.setState=function(t){return this._buff=t.buff,this._length=t.length,this._hash=t.hash,this},p.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},p.prototype._finish=function(t,n){var r,i,o,u=n;if(t[u>>2]|=128<<(u%4<<3),u>55)for(e(this._hash,t),u=0;u<16;u+=1)t[u]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),i=parseInt(r[2],16),o=parseInt(r[1],16)||0,t[14]=i,t[15]=o,e(this._hash,t)},p.hash=function(t,e){return p.hashBinary(a(t),e)},p.hashBinary=function(t,e){var n=i(t),r=s(n);return e?l(r):r},p.ArrayBuffer=function(){this.reset()},p.ArrayBuffer.prototype.append=function(t){var n,i=h(this._buff.buffer,t,!0),o=i.length;for(this._length+=t.byteLength,n=64;n<=o;n+=64)e(this._hash,r(i.subarray(n-64,n)));return this._buff=n-64<o?new Uint8Array(i.buffer.slice(n-64)):new Uint8Array(0),this},p.ArrayBuffer.prototype.end=function(t){var e,n,r=this._buff,i=r.length,o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<i;e+=1)o[e>>2]|=r[e]<<(e%4<<3);return this._finish(o,i),n=s(this._hash),t&&(n=l(n)),this.reset(),n},p.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},p.ArrayBuffer.prototype.getState=function(){var t=p.prototype.getState.call(this);return t.buff=f(t.buff),t},p.ArrayBuffer.prototype.setState=function(t){return t.buff=c(t.buff,!0),p.prototype.setState.call(this,t)},p.ArrayBuffer.prototype.destroy=p.prototype.destroy,p.ArrayBuffer.prototype._finish=p.prototype._finish,p.ArrayBuffer.hash=function(t,e){var n=o(new Uint8Array(t)),r=s(n);return e?l(r):r},p})},"1XVU":function(t,e,n){"use strict";function r(t,e,n){for(var r="",i=n-t.length;r.length<i;)r+=e;return r}function i(t,e,n){return r(t,e,n)+t}function o(t,e){if(t===e)return 0;t=u(t),e=u(e);var n=v(t),r=v(e);if(n-r!=0)return n-r;switch(typeof t){case"number":return t-e;case"boolean":return t<e?-1:1;case"string":return p(t,e)}return Array.isArray(t)?l(t,e):d(t,e)}function u(t){switch(typeof t){case"undefined":return null;case"number":return t===1/0||t===-1/0||isNaN(t)?null:t;case"object":var e=t;if(Array.isArray(t)){var n=t.length;t=new Array(n);for(var r=0;r<n;r++)t[r]=u(e[r])}else{if(t instanceof Date)return t.toJSON();if(null!==t){t={};for(var i in e)if(e.hasOwnProperty(i)){var o=e[i];void 0!==o&&(t[i]=u(o))}}}}return t}function s(t){if(null!==t)switch(typeof t){case"boolean":return t?1:0;case"number":return _(t);case"string":return t.replace(/\u0002/g,"").replace(/\u0001/g,"").replace(/\u0000/g,"");case"object":var e=Array.isArray(t),n=e?t:Object.keys(t),r=-1,i=n.length,o="";if(e)for(;++r<i;)o+=a(n[r]);else for(;++r<i;){var u=n[r];o+=a(u)+a(t[u])}return o}return""}function a(t){return t=u(t),v(t)+m+s(t)+"\0"}function c(t,e){var n,r=e;if("1"===t[e])n=0,e++;else{var i="0"===t[e];e++;var o="",u=t.substring(e,e+g),s=parseInt(u,10)+y;for(i&&(s=-s),e+=g;;){var a=t[e];if("\0"===a)break;o+=a,e++}o=o.split("."),n=1===o.length?parseInt(o,10):parseFloat(o[0]+"."+o[1]),i&&(n-=10),0!==s&&(n=parseFloat(n+"e"+s))}return{num:n,length:e-r}}function f(t,e){var n=t.pop();if(e.length){var r=e[e.length-1];n===r.element&&(e.pop(),r=e[e.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(n);else if(o===t.length-2){var u=t.pop();i[u]=n}else t.push(n)}}function h(t){for(var e=[],n=[],r=0;;){var i=t[r++];if("\0"!==i)switch(i){case"1":e.push(null);break;case"2":e.push("1"===t[r]),r++;break;case"3":var o=c(t,r);e.push(o.num),r+=o.length;break;case"4":for(var u="";;){var s=t[r];if("\0"===s)break;u+=s,r++}u=u.replace(/\u0001\u0001/g,"\0").replace(/\u0001\u0002/g,"").replace(/\u0002\u0002/g,""),e.push(u);break;case"5":var a={element:[],index:e.length};e.push(a.element),n.push(a);break;case"6":var h={element:{},index:e.length};e.push(h.element),n.push(h);break;default:throw new Error("bad collationIndex or unexpectedly reached end of input: "+i)}else{if(1===e.length)return e.pop();f(e,n)}}}function l(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=o(t[r],e[r]);if(0!==i)return i}return t.length===e.length?0:t.length>e.length?1:-1}function p(t,e){return t===e?0:t>e?1:-1}function d(t,e){for(var n=Object.keys(t),r=Object.keys(e),i=Math.min(n.length,r.length),u=0;u<i;u++){var s=o(n[u],r[u]);if(0!==s)return s;if(0!==(s=o(t[n[u]],e[r[u]])))return s}return n.length===r.length?0:n.length>r.length?1:-1}function v(t){var e=["boolean","number","string","object"],n=e.indexOf(typeof t);return~n?null===t?1:Array.isArray(t)?5:n<3?n+2:n+3:Array.isArray(t)?5:void 0}function _(t){if(0===t)return"1";var e=t.toExponential().split(/e\+?/),n=parseInt(e[1],10),r=t<0,o=r?"0":"2",u=(r?-n:n)-y,s=i(u.toString(),"0",g);o+=m+s;var a=Math.abs(parseFloat(e[0]));r&&(a=10-a);var c=a.toFixed(20);return c=c.replace(/\.?0+$/,""),o+=m+c}n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a}),n.d(e,"d",function(){return h});var y=-324,g=3,m=""},"1ipf":function(t,e){"use strict";e.ShoppingListRepository=function(){function t(){}return t.prototype.put=function(){},t.prototype.putBulk=function(){},t.prototype.get=function(){},t.prototype.find=function(){},t.prototype.delete=function(){},t.prototype.putItem=function(){},t.prototype.putItemsBulk=function(){},t.prototype.getItem=function(){},t.prototype.findItems=function(){},t.prototype.findItemsCountByList=function(){},t.prototype.deleteItem=function(){},t}()},"38I5":function(t){"use strict";function e(t){return function(){var e=arguments.length;if(e){for(var n=[],r=-1;++r<e;)n[r]=arguments[r];return t.call(this,n)}return t.call(this,[])}}t.exports=e},"435A":function(t){!function(e){"use strict";var n=0,r=Math.pow(36,4),i=function(t,e){var n="000000000"+t;return n.substr(n.length-e)},o=function(){return i((Math.random()*r<<0).toString(36),4)},u=function(){return n=n<r?n:0,++n-1},s=function(){var t,e=(new Date).getTime().toString(36),n=s.fingerprint(),r=o()+o();return t=i(u().toString(36),4),"c"+e+t+n+r};s.slug=function(){var t,e=(new Date).getTime().toString(36),n=s.fingerprint().slice(0,1)+s.fingerprint().slice(-1),r=o().slice(-2);return t=u().toString(36).slice(-4),e.slice(-2)+t+n+r},s.globalCount=function(){var t=function(){var t,e=0;for(t in window)e++;return e}();return s.globalCount=function(){return t},t},s.fingerprint=function(){return i((navigator.mimeTypes.length+navigator.userAgent.length).toString(36)+s.globalCount().toString(36),4)},e.register?e.register("cuid",s):t.exports=s}(this.applitude||this)},"4Bm0":function(t){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t}},"5euN":function(t,e,n){"use strict";var r=n("xz3w"),i=n.n(r);e.a="function"==typeof Promise?Promise:i.a},"6IAg":function(t){function e(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return n*c;case"days":case"day":case"d":return n*a;case"hours":case"hour":case"hrs":case"hr":case"h":return n*s;case"minutes":case"minute":case"mins":case"min":case"m":return n*u;case"seconds":case"second":case"secs":case"sec":case"s":return n*o;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}function n(t){return t>=a?Math.round(t/a)+"d":t>=s?Math.round(t/s)+"h":t>=u?Math.round(t/u)+"m":t>=o?Math.round(t/o)+"s":t+"ms"}function r(t){return i(t,a,"day")||i(t,s,"hour")||i(t,u,"minute")||i(t,o,"second")||t+" ms"}function i(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}var o=1e3,u=60*o,s=60*u,a=24*s,c=365.25*a;t.exports=function(t,i){i=i||{};var o=typeof t;if("string"===o&&t.length>0)return e(t);if("number"===o&&!1===isNaN(t))return i.long?r(t):n(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},"8/Wf":function(t,e,n){"use strict";function r(t,e){t=t||[],e=e||{};try{return new Blob(t,e)}catch(o){if("TypeError"!==o.name)throw o;for(var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof MSBlobBuilder?MSBlobBuilder:"undefined"!=typeof MozBlobBuilder?MozBlobBuilder:WebKitBlobBuilder,r=new n,i=0;i<t.length;i+=1)r.append(t[i]);return r.getBlob(e.type)}}function i(t){for(var e=t.length,n=new ArrayBuffer(e),r=new Uint8Array(n),i=0;i<e;i++)r[i]=t.charCodeAt(i);return n}function o(t,e){return r([i(t)],{type:e})}function u(t,e){return o(a(t),e)}function s(t,e){if("undefined"==typeof FileReader)return e((new FileReaderSync).readAsArrayBuffer(t));var n=new FileReader;n.onloadend=function(t){var n=t.target.result||new ArrayBuffer(0);e(n)},n.readAsArrayBuffer(t)}n.d(e,"a",function(){return c}),n.d(e,"c",function(){return u}),n.d(e,"b",function(){return s});var a=function(t){return atob(t)},c=function(t){return btoa(t)}},"9ETh":function(t,e,n){"use strict";(function(t){function n(){if("serviceWorker"in navigator){if(new URL(t.env.PUBLIC_URL,window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e=t.env.PUBLIC_URL+"/service-worker.js";o?i(e):r(e)})}}function r(t){navigator.serviceWorker.register(t).then(function(t){t.onupdatefound=function(){var e=t.installing;e.onstatechange=function(){"installed"===e.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(t){console.error("Error during service worker registration:",t)})}function i(t){fetch(t).then(function(e){404===e.status||-1===e.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(t){t.unregister().then(function(){window.location.reload()})}):r(t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}e.a=n;var o=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/))}).call(e,n("a6oe"))},"9oy1":function(t,e){"use strict";e.a={cloudant_url:"http://rajsingh:genjisan@127.0.0.1:5984/react-pwa"}},C9XX:function(t,e,n){"use strict";function r(t,e){for(var n=t,r=0,i=e.length;r<i;r++){if(!(n=n[e[r]]))break}return n}function i(t,e,n){for(var r=0,i=e.length;r<i-1;r++){t=t[e[r]]={}}t[e[i-1]]=n}function o(t,e){return t<e?-1:t>e?1:0}function u(t){for(var e=[],n="",r=0,i=t.length;r<i;r++){var o=t[r];"."===o?r>0&&"\\"===t[r-1]?n=n.substring(0,n.length-1)+".":(e.push(n),n=""):n+=o}return e.push(n),e}function s(t){return D.indexOf(t)>-1}function a(t){return Object.keys(t)[0]}function c(t){return t[a(t)]}function f(t){var e={};return t.forEach(function(t){Object.keys(t).forEach(function(n){var r=t[n];if("object"!=typeof r&&(r={$eq:r}),s(n))e[n]=r instanceof Array?r.map(function(t){return f([t])}):f([r]);else{var i=e[n]=e[n]||{};Object.keys(r).forEach(function(t){var e=r[t];return"$gt"===t||"$gte"===t?h(t,e,i):"$lt"===t||"$lte"===t?l(t,e,i):"$ne"===t?p(e,i):"$eq"===t?d(e,i):void(i[t]=e)})}})}),e}function h(t,e,n){void 0===n.$eq&&(void 0!==n.$gte?"$gte"===t?e>n.$gte&&(n.$gte=e):e>=n.$gte&&(delete n.$gte,n.$gt=e):void 0!==n.$gt?"$gte"===t?e>n.$gt&&(delete n.$gt,n.$gte=e):e>n.$gt&&(n.$gt=e):n[t]=e)}function l(t,e,n){void 0===n.$eq&&(void 0!==n.$lte?"$lte"===t?e<n.$lte&&(n.$lte=e):e<=n.$lte&&(delete n.$lte,n.$lt=e):void 0!==n.$lt?"$lte"===t?e<n.$lt&&(delete n.$lt,n.$lte=e):e<n.$lt&&(n.$lt=e):n[t]=e)}function p(t,e){"$ne"in e?e.$ne.push(t):e.$ne=[t]}function d(t,e){delete e.$gt,delete e.$gte,delete e.$lt,delete e.$lte,delete e.$ne,e.$eq=t}function v(t){var e=n.i(j.a)(t),r=!1;"$and"in e&&(e=f(e.$and),r=!0),["$or","$nor"].forEach(function(t){t in e&&e[t].forEach(function(t){for(var e=Object.keys(t),n=0;n<e.length;n++){var r=e[n],i=t[r];"object"==typeof i&&null!==i||(t[r]={$eq:i})}})}),"$not"in e&&(e.$not=f([e.$not]));for(var i=Object.keys(e),o=0;o<i.length;o++){var u=i[o],s=e[u];"object"!=typeof s||null===s?s={$eq:s}:"$ne"in s&&!r&&(s.$ne=[s.$ne]),e[u]=s}return e}function _(t){function e(e){return t.map(function(t){var n=a(t),i=u(n);return r(e,i)})}return function(t,r){var i=e(t.doc),u=e(r.doc),s=n.i(L.a)(i,u);return 0!==s?s:o(t.doc._id,r.doc._id)}}function y(t,e,n){if(t=t.filter(function(t){return g(t.doc,e.selector,n)}),e.sort){t=t.sort(_(e.sort)),"string"!=typeof e.sort[0]&&"desc"===c(e.sort[0])&&(t=t.reverse())}if("limit"in e||"skip"in e){var r=e.skip||0;t=t.slice(r,("limit"in e?e.limit:t.length)+r)}return t}function g(t,e,n){return n.every(function(n){var i=e[n],o=u(n),a=r(t,o);return s(n)?w(n,i,t):m(i,t,o,a)})}function m(t,e,n,r){return!t||Object.keys(t).every(function(i){return b(i,e,t[i],n,r)})}function w(t,e,n){return"$or"===t?e.some(function(t){return g(n,t,Object.keys(t))}):"$not"===t?!g(n,e,Object.keys(e)):!e.find(function(t){return g(n,t,Object.keys(t))})}function b(t,e,n,r,i){if(!z[t])throw new Error('unknown operator "'+t+'" - should be one of $eq, $lte, $lt, $gt, $gte, $exists, $ne, $in, $nin, $size, $mod, $regex, $elemMatch, $type, $allMatch or $all');return z[t](e,n,r,i)}function S(t){return void 0!==t&&null!==t}function k(t){return void 0!==t}function E(t,e){var n=e[0],r=e[1];if(0===n)throw new Error("Bad divisor, cannot divide by zero");if(parseInt(n,10)!==n)throw new Error("Divisor is not an integer");if(parseInt(r,10)!==r)throw new Error("Modulus is not an integer");return parseInt(t,10)===t&&t%n===r}function I(t,e){return e.some(function(e){return t instanceof Array?t.indexOf(e)>-1:t===e})}function O(t,e){return e.every(function(e){return t.indexOf(e)>-1})}function x(t,e){return t.length===e}function q(t,e){return new RegExp(e).test(t)}function A(t,e){switch(e){case"null":return null===t;case"boolean":return"boolean"==typeof t;case"number":return"number"==typeof t;case"string":return"string"==typeof t;case"array":return t instanceof Array;case"object":return"[object Object]"==={}.toString.call(t)}throw new Error(e+" not supported as a type.Please use one of object, string, array, number, boolean or null.")}n.d(e,"g",function(){return v}),n.d(e,"h",function(){return y}),n.d(e,"d",function(){return a}),n.d(e,"e",function(){return c}),n.d(e,"b",function(){return r}),n.d(e,"c",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"a",function(){return u});var j=n("mY35"),L=n("1XVU"),D=["$or","$nor","$not"],z={$elemMatch:function(t,e,n,r){return!!Array.isArray(r)&&(0!==r.length&&r.some("object"==typeof r[0]?function(t){return g(t,e,Object.keys(e))}:function(r){return m(e,t,n,r)}))},$allMatch:function(t,e,n,r){return!!Array.isArray(r)&&(0!==r.length&&r.every("object"==typeof r[0]?function(t){return g(t,e,Object.keys(e))}:function(r){return m(e,t,n,r)}))},$eq:function(t,e,r,i){return k(i)&&0===n.i(L.a)(i,e)},$gte:function(t,e,r,i){return k(i)&&n.i(L.a)(i,e)>=0},$gt:function(t,e,r,i){return k(i)&&n.i(L.a)(i,e)>0},$lte:function(t,e,r,i){return k(i)&&n.i(L.a)(i,e)<=0},$lt:function(t,e,r,i){return k(i)&&n.i(L.a)(i,e)<0},$exists:function(t,e,n,r){return e?k(r):!k(r)},$mod:function(t,e,n,r){return S(r)&&E(r,e)},$ne:function(t,e,r,i){return e.every(function(t){return 0!==n.i(L.a)(i,t)})},$in:function(t,e,n,r){return S(r)&&I(r,e)},$nin:function(t,e,n,r){return S(r)&&!I(r,e)},$size:function(t,e,n,r){return S(r)&&x(r,e)},$all:function(t,e,n,r){return Array.isArray(r)&&O(r,e)},$regex:function(t,e,n,r){return S(r)&&q(r,e)},$type:function(t,e,n,r){return A(r,e)}}},CR5u:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=n("KM04"),u=(n.n(o),n.i(o.h)("i",{className:"material-icons"},"close")),s=n.i(o.h)("i",{className:"material-icons"},"play_arrow"),a=n.i(o.h)("i",{className:"material-icons"},"mode_edit"),c=n.i(o.h)("i",{className:"material-icons"},"delete_forever");e.a=function(t){function e(){for(var e,i,s,a=arguments.length,c=Array(a),f=0;f<a;f++)c[f]=arguments[f];return e=i=r(this,t.call.apply(t,[this].concat(c))),i.state={editingName:!1,activeListId:"",oldName:"",newName:""},i.handleEditingStart=function(t,e){i.setState({editingName:!0,activeListId:t,oldName:e})},i.handleEditingDone=function(){i.setState({editingName:!1})},i.handleEditingSubmit=function(){i.props.renameListFunc(i.state.activeListId,i.state.newName),i.handleEditingDone()},i.updateName=function(t){i.setState({newName:t.target.value})},i.renderEditNameUI=function(){var t;return n.i(o.h)("div",{className:"editing"},n.i(o.h)("div",{className:"col s9"},n.i(o.h)("form",{onSubmit:i.handleEditingSubmit},n.i(o.h)("div",{className:"input-field",style:{"margin-top":"0.5rem"}},n.i(o.h)("input",{type:"text",id:"input-name",ref:function(t){i.nameInput=t},value:i.state.oldName,onChange:i.updateName,style:{height:"unset","font-size":"18pt","margin-bottom":"8px"}})))),n.i(o.h)("div",{className:"col s3"},n.i(o.h)("a",(t={className:"btn-flat btn-large",style:{padding:"0 0.5rem"}},t.style={padding:"0px"},t.onClick=i.handleEditingDone,t),u)))},s=e,r(i,s)}return i(e,t),e.prototype.componentDidUpdate=function(){!0===this.state.editingName&&this.nameInput.focus()},e.prototype.render=function(){for(var t=this,e=[],r=this.props.shoppingLists,i=Array.isArray(r),u=0,r=i?r:r[Symbol.iterator]();;){var f;if(i){if(u>=r.length)break;f=r[u++]}else{if(u=r.next(),u.done)break;f=u.value}var h=f;!function(r){e.push(n.i(o.h)("div",{className:"shoppinglist",key:r._id,style:{margin:"12px 0",padding:"12px"}},n.i(o.h)("div",{class:"row",style:"margin-bottom: 0px"},t.state.editingName&&t.state.activeListId===r._id?t.renderEditNameUI():n.i(o.h)("div",{className:"notediting"},n.i(o.h)("div",{className:"col s7"},n.i(o.h)("h5",null,n.i(o.h)("a",{href:"#",onClick:function(){return t.props.openListFunc(r._id)}},r.title))),n.i(o.h)("div",{className:"col s5 right-align"},n.i(o.h)("a",{className:"btn-flat btn-large itemactionbutton",style:{padding:"0 0.5rem"},onClick:function(){return t.props.openListFunc(r._id)}},s),n.i(o.h)("a",{className:"btn-flat btn-large itemactionbutton",style:{padding:"0 0.5rem"},onClick:function(){return t.handleEditingStart(r._id,r.title)}},a),n.i(o.h)("a",{className:"btn-flat btn-large itemactionbutton",style:{padding:"0 0.5rem"},onClick:function(){return t.props.deleteListFunc(r._id)}},c)))),n.i(o.h)("div",{className:"row"},n.i(o.h)("div",{className:"col s1"},n.i(o.h)("input",{type:"checkbox",id:"cb_"+r._id,onChange:function(){return t.props.checkAllFunc(r._id)},defaultChecked:!1}),n.i(o.h)("label",{for:"cb_"+r._id}," ")),n.i(o.h)("div",{className:"col s11"},(t.props.checkedCounts.get(r._id)||0)+" of "+(t.props.totalCounts.get(r._id)||0)+" items checked"))))}(h)}return n.i(o.h)("div",null,n.i(o.h)("div",null,e))},e}(o.Component)},FRpO:function(t){function e(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(t){return"function"==typeof t}function r(t){return"number"==typeof t}function i(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=e,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._maxListeners=void 0,e.defaultMaxListeners=10,e.prototype.setMaxListeners=function(t){if(!r(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},e.prototype.emit=function(t){var e,r,u,s,a,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||i(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(r=this._events[t],o(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(i(r))for(s=Array.prototype.slice.call(arguments,1),c=r.slice(),u=c.length,a=0;a<u;a++)c[a].apply(this,s);return!0},e.prototype.addListener=function(t,r){var u;if(!n(r))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,n(r.listener)?r.listener:r),this._events[t]?i(this._events[t])?this._events[t].push(r):this._events[t]=[this._events[t],r]:this._events[t]=r,i(this._events[t])&&!this._events[t].warned&&(u=o(this._maxListeners)?e.defaultMaxListeners:this._maxListeners)&&u>0&&this._events[t].length>u&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace()),this},e.prototype.on=e.prototype.addListener,e.prototype.once=function(t,e){function r(){this.removeListener(t,r),i||(i=!0,e.apply(this,arguments))}if(!n(e))throw TypeError("listener must be a function");var i=!1;return r.listener=e,this.on(t,r),this},e.prototype.removeListener=function(t,e){var r,o,u,s;if(!n(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(r=this._events[t],u=r.length,o=-1,r===e||n(r.listener)&&r.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(i(r)){for(s=u;s-- >0;)if(r[s]===e||r[s].listener&&r[s].listener===e){o=s;break}if(o<0)return this;1===r.length?(r.length=0,delete this._events[t]):r.splice(o,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},e.prototype.removeAllListeners=function(t){var e,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[t],n(r))this.removeListener(t,r);else if(r)for(;r.length;)this.removeListener(t,r[r.length-1]);return delete this._events[t],this},e.prototype.listeners=function(t){return this._events&&this._events[t]?n(this._events[t])?[this._events[t]]:this._events[t].slice():[]},e.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(n(e))return 1;if(e)return e.length}return 0},e.listenerCount=function(t,e){return t.listenerCount(e)}},HSMo:function(t,e,n){"use strict";var r=n("YrHc"),i=r.ShoppingListFactory,o=n("1ipf"),u=o.ShoppingListRepository,s=n("wdwc"),a=s.ShoppingListRepositoryPouchDB;e.ShoppingListFactory=i,e.ShoppingListRepository=u,e.ShoppingListRepositoryPouchDB=a},JkW7:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("KM04"),i=(n.n(r),n("HSMo")),o=(n.n(i),n("+bp/")),u=n("rsNZ"),s=n("9oy1"),a=n("9ETh"),c=n("S03M"),f=(n.n(c),n("UuX/"));o.a.plugin(u.a);var h=new o.a("shopping_list_react"),l=new o.a(s.a.cloudant_url),p=new i.ShoppingListFactory,d=new i.ShoppingListRepositoryPouchDB(h);n.i(a.a)();var v=n.i(r.h)(f.a,{shoppingListFactory:p,shoppingListRepository:d,localDB:h,remoteDB:l});d.ensureIndexes().then(function(){n.i(r.render)(v,document.body)}).catch(function(t){console.log("ERROR in ensureIndexes"),console.log(t)})},KM04:function(t){!function(){"use strict";function e(){}function n(t,n){var r,i,o,u,s=z;for(u=arguments.length;u-- >2;)D.push(arguments[u]);for(n&&null!=n.children&&(D.length||D.push(n.children),delete n.children);D.length;)if((i=D.pop())&&void 0!==i.pop)for(u=i.length;u--;)D.push(i[u]);else"boolean"==typeof i&&(i=null),(o="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i+="":"string"!=typeof i&&(o=!1)),o&&r?s[s.length-1]+=i:s===z?s=[i]:s.push(i),r=o;var a=new e;return a.nodeName=t,a.children=s,a.attributes=null==n?void 0:n,a.key=null==n?void 0:n.key,void 0!==L.vnode&&L.vnode(a),a}function r(t,e){for(var n in e)t[n]=e[n];return t}function i(t,e){return n(t.nodeName,r(r({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}function o(t){!t.__d&&(t.__d=!0)&&1==C.push(t)&&(L.debounceRendering||T)(u)}function u(){var t,e=C;for(C=[];t=e.pop();)t.__d&&O(t)}function s(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&a(t,e.nodeName):n||t._componentConstructor===e.nodeName}function a(t,e){return t.__n===e||t.nodeName.toLowerCase()===e.toLowerCase()}function c(t){var e=r({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===e[i]&&(e[i]=n[i]);return e}function f(t,e){var n=e?document.createElementNS("http://www.w3.org/2000/svg",t):document.createElement(t);return n.__n=t,n}function h(t){var e=t.parentNode;e&&e.removeChild(t)}function l(t,e,n,r,i){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)n&&n(null),r&&r(t);else if("class"!==e||i)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var o in n)o in r||(t.style[o]="");for(var o in r)t.style[o]="number"==typeof r[o]&&!1===R.test(o)?r[o]+"px":r[o]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var u=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,d,u):t.removeEventListener(e,d,u),(t.__l||(t.__l={}))[e]=r}else if("list"!==e&&"type"!==e&&!i&&e in t)p(t,e,null==r?"":r),null!=r&&!1!==r||t.removeAttribute(e);else{var s=i&&e!==(e=e.replace(/^xlink\:?/,""));null==r||!1===r?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function p(t,e,n){try{t[e]=n}catch(t){}}function d(t){return this.__l[t.type](L.event&&L.event(t)||t)}function v(){for(var t;t=N.pop();)L.afterMount&&L.afterMount(t),t.componentDidMount&&t.componentDidMount()}function _(t,e,n,r,i,o){M++||(B=null!=i&&void 0!==i.ownerSVGElement,$=null!=t&&!("__preactattr_"in t));var u=y(t,e,n,r,o);return i&&u.parentNode!==i&&i.appendChild(u),--M||($=!1,o||v()),u}function y(t,e,n,r,i){var o=t,u=B;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||i)?t.nodeValue!=e&&(t.nodeValue=e):(o=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(o,t),m(t,!0))),o.__preactattr_=!0,o;var s=e.nodeName;if("function"==typeof s)return x(t,e,n,r);if(B="svg"===s||"foreignObject"!==s&&B,s+="",(!t||!a(t,s))&&(o=f(s,B),t)){for(;t.firstChild;)o.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(o,t),m(t,!0)}var c=o.firstChild,h=o.__preactattr_,l=e.children;if(null==h){h=o.__preactattr_={};for(var p=o.attributes,d=p.length;d--;)h[p[d].name]=p[d].value}return!$&&l&&1===l.length&&"string"==typeof l[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=l[0]&&(c.nodeValue=l[0]):(l&&l.length||null!=c)&&g(o,l,n,r,$||null!=h.dangerouslySetInnerHTML),b(o,e.attributes,h),B=u,o}function g(t,e,n,r,i){var o,u,a,c,f,l=t.childNodes,p=[],d={},v=0,_=0,g=l.length,w=0,b=e?e.length:0;if(0!==g)for(var S=0;S<g;S++){var k=l[S],E=k.__preactattr_,I=b&&E?k._component?k._component.__k:E.key:null;null!=I?(v++,d[I]=k):(E||(void 0!==k.splitText?!i||k.nodeValue.trim():i))&&(p[w++]=k)}if(0!==b)for(var S=0;S<b;S++){c=e[S],f=null;var I=c.key;if(null!=I)v&&void 0!==d[I]&&(f=d[I],d[I]=void 0,v--);else if(!f&&_<w)for(o=_;o<w;o++)if(void 0!==p[o]&&s(u=p[o],c,i)){f=u,p[o]=void 0,o===w-1&&w--,o===_&&_++;break}f=y(f,c,n,r),a=l[S],f&&f!==t&&f!==a&&(null==a?t.appendChild(f):f===a.nextSibling?h(a):t.insertBefore(f,a))}if(v)for(var S in d)void 0!==d[S]&&m(d[S],!1);for(;_<=w;)void 0!==(f=p[w--])&&m(f,!1)}function m(t,e){var n=t._component;n?q(n):(null!=t.__preactattr_&&t.__preactattr_.ref&&t.__preactattr_.ref(null),!1!==e&&null!=t.__preactattr_||h(t),w(t))}function w(t){for(t=t.lastChild;t;){var e=t.previousSibling;m(t,!0),t=e}}function b(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||l(t,r,n[r],n[r]=void 0,B);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||l(t,r,n[r],n[r]=e[r],B)}function S(t){var e=t.constructor.name;(U[e]||(U[e]=[])).push(t)}function k(t,e,n){var r,i=U[t.name];if(t.prototype&&t.prototype.render?(r=new t(e,n),A.call(r,e,n)):(r=new A(e,n),r.constructor=t,r.render=E),i)for(var o=i.length;o--;)if(i[o].constructor===t){r.__b=i[o].__b,i.splice(o,1);break}return r}function E(t,e,n){return this.constructor(t,n)}function I(t,e,n,r,i){t.__x||(t.__x=!0,(t.__r=e.ref)&&delete e.ref,(t.__k=e.key)&&delete e.key,!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r),r&&r!==t.context&&(t.__c||(t.__c=t.context),t.context=r),t.__p||(t.__p=t.props),t.props=e,t.__x=!1,0!==n&&(1!==n&&!1===L.syncComponentUpdates&&t.base?o(t):O(t,1,i)),t.__r&&t.__r(t))}function O(t,e,n,i){if(!t.__x){var o,u,s,a=t.props,f=t.state,h=t.context,l=t.__p||a,p=t.__s||f,d=t.__c||h,y=t.base,g=t.__b,w=y||g,b=t._component,S=!1;if(y&&(t.props=l,t.state=p,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(a,f,h)?S=!0:t.componentWillUpdate&&t.componentWillUpdate(a,f,h),t.props=a,t.state=f,t.context=h),t.__p=t.__s=t.__c=t.__b=null,t.__d=!1,!S){o=t.render(a,f,h),t.getChildContext&&(h=r(r({},h),t.getChildContext()));var E,x,A=o&&o.nodeName;if("function"==typeof A){var j=c(o);u=b,u&&u.constructor===A&&j.key==u.__k?I(u,j,1,h,!1):(E=u,t._component=u=k(A,j,h),u.__b=u.__b||g,u.__u=t,I(u,j,0,h,!1),O(u,1,n,!0)),x=u.base}else s=w,E=b,E&&(s=t._component=null),(w||1===e)&&(s&&(s._component=null),x=_(s,o,h,n||!y,w&&w.parentNode,!0));if(w&&x!==w&&u!==b){var D=w.parentNode;D&&x!==D&&(D.replaceChild(x,w),E||(w._component=null,m(w,!1)))}if(E&&q(E),t.base=x,x&&!i){for(var z=t,T=t;T=T.__u;)(z=T).base=x;x._component=z,x._componentConstructor=z.constructor}}if(!y||n?N.unshift(t):S||(t.componentDidUpdate&&t.componentDidUpdate(l,p,d),L.afterUpdate&&L.afterUpdate(t)),null!=t.__h)for(;t.__h.length;)t.__h.pop().call(t);M||i||v()}}function x(t,e,n,r){for(var i=t&&t._component,o=i,u=t,s=i&&t._componentConstructor===e.nodeName,a=s,f=c(e);i&&!a&&(i=i.__u);)a=i.constructor===e.nodeName;return i&&a&&(!r||i._component)?(I(i,f,3,n,r),t=i.base):(o&&!s&&(q(o),t=u=null),i=k(e.nodeName,f,n),t&&!i.__b&&(i.__b=t,u=null),I(i,f,1,n,r),t=i.base,u&&t!==u&&(u._component=null,m(u,!1))),t}function q(t){L.beforeUnmount&&L.beforeUnmount(t);var e=t.base;t.__x=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?q(n):e&&(e.__preactattr_&&e.__preactattr_.ref&&e.__preactattr_.ref(null),t.__b=e,h(e),S(t),w(e)),t.__r&&t.__r(null)}function A(t,e){this.__d=!0,this.context=e,this.props=t,this.state=this.state||{}}function j(t,e,n){return _(n,t,{},!1,e,!1)}var L={},D=[],z=[],T="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout,R=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,C=[],N=[],M=0,B=!1,$=!1,U={};r(A.prototype,{setState:function(t,e){var n=this.state;this.__s||(this.__s=r({},n)),r(n,"function"==typeof t?t(n,this.props):t),e&&(this.__h=this.__h||[]).push(e),o(this)},forceUpdate:function(t){t&&(this.__h=this.__h||[]).push(t),O(this,2)},render:function(){}});var P={h:n,createElement:n,cloneElement:i,Component:A,render:j,rerender:u,options:L};t.exports=P}()},NPHD:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=n("KM04"),u=(n.n(o),n.i(o.h)("i",{className:"material-icons"},"close")),s=n.i(o.h)("i",{className:"material-icons"},"mode_edit"),a=n.i(o.h)("i",{className:"material-icons"},"delete_forever"),c=n.i(o.h)("div",{className:"divider"});e.a=function(t){function e(){for(var e,i,s,a=arguments.length,c=Array(a),f=0;f<a;f++)c[f]=arguments[f];return e=i=r(this,t.call.apply(t,[this].concat(c))),i.state={editingName:!1,activeItemId:"",oldName:"",newName:""},i.handleEditingStart=function(t,e){i.setState({editingName:!0,activeItemId:t,oldName:e})},i.handleEditingDone=function(){i.setState({editingName:!1})},i.handleEditingSubmit=function(){i.props.renameItemFunc(i.state.activeItemId,i.state.newName),i.handleEditingDone()},i.updateName=function(t){i.setState({newName:t.target.value})},i.renderEditNameUI=function(){return n.i(o.h)("div",null,n.i(o.h)("div",{className:"col s6"},n.i(o.h)("form",{onSubmit:i.handleEditingSubmit},n.i(o.h)("div",{className:"input-field",style:{"margin-top":"0.5rem"}},n.i(o.h)("input",{type:"text",id:"input-name",ref:function(t){i.nameInput=t},value:i.state.oldName,onChange:i.updateName,style:{height:"unset","margin-bottom":"8px"}})))),n.i(o.h)("div",{className:"col s1"},n.i(o.h)("a",{className:"btn-flat",onClick:i.handleEditingDone,style:{padding:"0px"}},u)))},s=e,r(i,s)}return i(e,t),e.prototype.componentDidUpdate=function(){!0===this.state.editingName&&this.nameInput.focus()},e.prototype.render=function(){for(var t=this,e=[],r=this.props.shoppingListItems,i=Array.isArray(r),u=0,r=i?r:r[Symbol.iterator]();;){var f;if(i){if(u>=r.length)break;f=r[u++]}else{if(u=r.next(),u.done)break;f=u.value}var h=f;!function(r){e.push(n.i(o.h)("div",null,n.i(o.h)("div",{className:"row shoppinglistitem",key:"listitem_"+r._id,style:{margin:"0.5rem 0 0.5rem 0"}},n.i(o.h)("div",{className:"col s1"},n.i(o.h)("input",{type:"checkbox",id:"cb_"+r._id,onChange:function(){return t.props.toggleItemCheckFunc(r._id)},defaultChecked:r.checked}),n.i(o.h)("label",{for:"cb_"+r._id}," ")),t.state.editingName&&t.state.activeItemId===r._id?t.renderEditNameUI():n.i(o.h)("div",{className:"col s7"},n.i(o.h)("span",{className:r.checked?"checkeditem":"uci"},r.title)),n.i(o.h)("div",{className:"col s4 right-align"},n.i(o.h)("a",{class:"btn-flat itemactionbutton",onClick:function(){return t.handleEditingStart(r._id,r.title)}},s),n.i(o.h)("a",{class:"btn-flat itemactionbutton",onClick:function(){return t.props.deleteFunc(r._id)}},a))),c))}(h)}return n.i(o.h)("div",null,n.i(o.h)("div",null,e))},e}(o.Component)},S03M:function(){},"T/c0":function(t,e,n){"use strict";function r(t){this.status=400,this.name="query_parse_error",this.message=t,this.error=!0;try{Error.captureStackTrace(this,r)}catch(t){}}function i(t){this.status=404,this.name="not_found",this.message=t,this.error=!0;try{Error.captureStackTrace(this,i)}catch(t){}}function o(t){this.status=500,this.name="invalid_value",this.message=t,this.error=!0;try{Error.captureStackTrace(this,o)}catch(t){}}function u(t,e){return e&&t.then(function(t){n.i(v.h)(function(){e(null,t)})},function(t){n.i(v.h)(function(){e(t)})}),t}function s(t){return d()(function(e){var n=e.pop(),r=t.apply(this,e);return"function"==typeof n&&u(r,n),r})}function a(t,e){return t.then(function(t){return e().then(function(){return t})},function(t){return e().then(function(){throw t})})}function c(t,e){return function(){var n=arguments,r=this;return t.add(function(){return e.apply(r,n)})}}function f(t){var e=new l.b(t),n=new Array(e.size),r=-1;return e.forEach(function(t){n[++r]=t}),n}function h(t){var e=new Array(t.size),n=-1;return t.forEach(function(t,r){e[++n]=r}),e}n.d(e,"c",function(){return f}),n.d(e,"d",function(){return c}),n.d(e,"f",function(){return a}),n.d(e,"i",function(){return s}),n.d(e,"h",function(){return u}),n.d(e,"b",function(){return h}),n.d(e,"a",function(){return r}),n.d(e,"g",function(){return i}),n.d(e,"e",function(){return o});var l=n("qpbW"),p=n("38I5"),d=n.n(p),v=n("mY35"),_=n("4Bm0"),y=n.n(_);y()(r,Error),y()(i,Error),y()(o,Error)},UUq2:function(t,e,n){(function(t){function n(t,e){for(var n=0,r=t.length-1;r>=0;r--){var i=t[r];"."===i?t.splice(r,1):".."===i?(t.splice(r,1),n++):n&&(t.splice(r,1),n--)}if(e)for(;n--;n)t.unshift("..");return t}function r(t,e){if(t.filter)return t.filter(e);for(var n=[],r=0;r<t.length;r++)e(t[r],r,t)&&n.push(t[r]);return n}var i=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,o=function(t){return i.exec(t).slice(1)};e.resolve=function(){for(var e="",i=!1,o=arguments.length-1;o>=-1&&!i;o--){var u=o>=0?arguments[o]:t.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,i="/"===u.charAt(0))}return e=n(r(e.split("/"),function(t){return!!t}),!i).join("/"),(i?"/":"")+e||"."},e.normalize=function(t){var i=e.isAbsolute(t),o="/"===u(t,-1);return t=n(r(t.split("/"),function(t){return!!t}),!i).join("/"),t||i||(t="."),t&&o&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(r(t,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,n){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var n=t.length-1;n>=0&&""===t[n];n--);return e>n?[]:t.slice(e,n-e+1)}t=e.resolve(t).substr(1),n=e.resolve(n).substr(1);for(var i=r(t.split("/")),o=r(n.split("/")),u=Math.min(i.length,o.length),s=u,a=0;a<u;a++)if(i[a]!==o[a]){s=a;break}for(var c=[],a=s;a<i.length;a++)c.push("..");return c=c.concat(o.slice(s)),c.join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=o(t),n=e[0],r=e[1];return n||r?(r&&(r=r.substr(0,r.length-1)),n+r):"."},e.basename=function(t,e){var n=o(t)[2];return e&&n.substr(-1*e.length)===e&&(n=n.substr(0,n.length-e.length)),n},e.extname=function(t){return o(t)[3]};var u="b"==="ab".substr(-1)?function(t,e,n){return t.substr(e,n)}:function(t,e,n){return e<0&&(e=t.length+e),t.substr(e,n)}}).call(e,n("a6oe"))},"UuX/":function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=n("KM04"),u=(n.n(o),n("Zuze")),s=(n.n(u),n("HSMo")),a=(n.n(s),n("NPHD")),c=n("CR5u"),f=n.i(o.h)("h5",null,"Click the + sign above to create a shopping list."),h=n.i(o.h)("h5",null,"Click the + sign above to create a shopping list item."),l=n.i(o.h)("i",{className:"material-icons"},"keyboard_backspace"),p=n.i(o.h)("span",null),d=n.i(o.h)("span",null);e.a=function(t){function e(e){var i=r(this,t.call(this,e));return i.componentDidMount=function(){i.getShoppingLists(),i.props.localDB.sync(i.props.remoteDB,{live:!0,retry:!0}).on("change",function(){}).on("error",function(){return console.log("uh oh! an error occured.")})},i.getShoppingLists=function(){var t=n.i(u.List)(),e=n.i(u.List)(),r=null;i.props.shoppingListRepository.find().then(function(t){return r=t,t}).then(function(){return i.props.shoppingListRepository.findItemsCountByList()}).then(function(t){return e=t,i.props.shoppingListRepository.findItemsCountByList({selector:{type:"item",checked:!0},fields:["list"]})}).then(function(n){t=n,i.setState({view:"lists",shoppingLists:r,shoppingList:null,shoppingListItems:null,checkedTotalShoppingListItemCount:t,totalShoppingListItemCount:e})}).catch(function(t){console.log("ERROR in getShoppingLists"),console.log(t)})},i.openShoppingList=function(t){i.props.shoppingListRepository.get(t).then(function(t){return t}).then(function(e){i.getShoppingListItems(t).then(function(t){i.setState({view:"items",shoppingList:e,shoppingListItems:t})})})},i.getShoppingListItems=function(t){return i.props.shoppingListRepository.findItems({selector:{type:"item",list:t}})},i.refreshShoppingListItems=function(t){i.props.shoppingListRepository.findItems({selector:{type:"item",list:t}}).then(function(t){i.setState({view:"items",shoppingListItems:t})})},i.renameShoppingListItem=function(t,e){console.log("IN renameShoppingListItem with id="+t+", name="+e),i.props.shoppingListRepository.getItem(t).then(function(t){return t=t.set("title",e),i.props.shoppingListRepository.putItem(t)}).then(i.refreshShoppingListItems(i.state.shoppingList._id))},i.deleteShoppingListItem=function(t){i.props.shoppingListRepository.getItem(t).then(function(t){return i.props.shoppingListRepository.deleteItem(t)}).then(i.refreshShoppingListItems(i.state.shoppingList._id))},i.toggleItemCheck=function(t){i.props.shoppingListRepository.getItem(t).then(function(t){return t=t.set("checked",!t.checked),i.props.shoppingListRepository.putItem(t)}).then(i.refreshShoppingListItems(i.state.shoppingList._id))},i.checkAllListItems=function(t){var e=!0;i.getShoppingListItems(t).then(function(t){var n=[];t.forEach(function(t){t.checked||n.push(t.mergeDeep({checked:!0}))},i),0==n.length&&(e=!1,t.forEach(function(t){n.push(t.mergeDeep({checked:!1}))},i));var r=i.props.shoppingListFactory.newListOfShoppingListItems(n);return i.props.shoppingListRepository.putItemsBulk(r)}).then(function(){return i.props.shoppingListRepository.get(t)}).then(function(t){return t=t.set("checked",e),i.props.shoppingListRepository.put(t)}).then(function(){i.getShoppingLists()})},i.deleteShoppingList=function(t){i.props.shoppingListRepository.get(t).then(function(t){return t=t.set("_deleted",!0),i.props.shoppingListRepository.put(t)}).then(function(){i.getShoppingLists()})},i.renameShoppingList=function(t,e){console.log("HERE IN renameShoppingList with id="+t+", title="+e),i.props.shoppingListRepository.get(t).then(function(t){return t=t.set("title",e),i.props.shoppingListRepository.put(t)}).then(i.getShoppingLists)},i.createNewShoppingListOrItem=function(t){if(t.preventDefault(),i.setState({adding:!1}),"lists"===i.state.view){var e=i.props.shoppingListFactory.newShoppingList({title:i.state.newName});i.props.shoppingListRepository.put(e).then(i.getShoppingLists)}else if("items"===i.state.view){var n=i.props.shoppingListFactory.newShoppingListItem({title:i.state.newName},i.state.shoppingList);i.props.shoppingListRepository.putItem(n).then(function(){i.getShoppingListItems(i.state.shoppingList._id).then(function(t){i.setState({view:"items",shoppingListItems:t})})})}},i.updateName=function(t){i.setState({newName:t.target.value})},i.displayAddingUI=function(){i.setState({adding:!0})},i.renderNewNameUI=function(){return n.i(o.h)("form",{onSubmit:i.createNewShoppingListOrItem,style:{marginTop:"12px"}},n.i(o.h)("div",{class:"input-field"},n.i(o.h)("input",{className:"validate",type:"text",placeholder:"Name...",id:"input-name",onChange:i.updateName,fullWidth:!1,style:{padding:"0px 12px",width:"calc(100% - 24px)"},underlineStyle:{width:"calc(100% - 24px)"}})))},i.renderShoppingLists=function(){return i.state.shoppingLists.length<1?f:n.i(o.h)(c.a,{shoppingLists:i.state.shoppingLists,openListFunc:i.openShoppingList,deleteListFunc:i.deleteShoppingList,renameListFunc:i.renameShoppingList,checkAllFunc:i.checkAllListItems,totalCounts:i.state.totalShoppingListItemCount,checkedCounts:i.state.checkedTotalShoppingListItemCount})},i.renderShoppingListItems=function(){return i.state.shoppingListItems.size<1?h:n.i(o.h)(a.a,{shoppingListItems:i.state.shoppingListItems,deleteFunc:i.deleteShoppingListItem,toggleItemCheckFunc:i.toggleItemCheck,renameItemFunc:i.renameShoppingListItem})},i.renderBackButton=function(){return"items"===i.state.view?n.i(o.h)("a",{className:"btn-flat btn-large white-text backbutton",onClick:i.getShoppingLists,style:{padding:"0px","vertical-align":"top"}},l):p},i.state={shoppingList:null,shoppingLists:[],totalShoppingListItemCount:n.i(u.List)(),checkedTotalShoppingListItemCount:n.i(u.List)(),shoppingListItems:null,adding:!1,view:"lists",newName:""},i}return i(e,t),e.prototype.render=function(){var t="Shopping Lists";return"items"===this.state.view&&(t=this.state.shoppingList.title),n.i(o.h)("div",{className:"App"},n.i(o.h)("nav",null,n.i(o.h)("div",{className:"nav-wrapper"},n.i(o.h)("div",{className:"brand-logo left"},this.renderBackButton(),n.i(o.h)("span",null,t)),n.i(o.h)("div",{className:"right"},n.i(o.h)("a",{className:"btn-floating pink lighten-2",style:{"margin-right":"8px"},onClick:this.displayAddingUI},n.i(o.h)("i",{className:"material-icons",style:{"line-height":"unset"}},"add"))))),n.i(o.h)("div",{className:"listsanditems container",style:{margin:"8px",backgroundColor:"white"}},this.state.adding?this.renderNewNameUI():d,"lists"===this.state.view?this.renderShoppingLists():this.renderShoppingListItems()))},e}(o.Component)},YrHc:function(t,e,n){"use strict";var r=n("435A"),i=n("d18E"),o=i.Record,u=i.List;e.ShoppingListFactory=function(){function t(){this._ShoppingList=o({_id:void 0,_rev:void 0,_deleted:!1,type:"list",version:1,title:void 0,checked:!1,place:void 0,createdAt:void 0,updatedAt:void 0}),this._ShoppingListItem=o({_id:void 0,_rev:void 0,_deleted:!1,type:"item",version:1,list:void 0,title:void 0,checked:!1,createdAt:void 0,updatedAt:void 0})}return t.prototype._guardShoppingList=function(t){if(!o.isRecord(t))throw new Error("Shopping List must be a Record");if("list"!=t.type)throw new Error("Shopping List type must be list")},t.prototype._guardListOfShoppingLists=function(t){var e=this;t.forEach(function(t){return e._guardShoppingList(t)})},t.prototype._guardShoppingListItem=function(t){if(!o.isRecord(t))throw new Error("Shopping List Item must be a Record");if("item"!=t.type)throw new Error("Shopping List Item type must be item")},t.prototype._guardListOfShoppingListItems=function(t){var e=this;t.forEach(function(t){return e._guardShoppingListItem(t)})},t.prototype.newShoppingList=function(t){var e=new this._ShoppingList(t);return void 0===e._id&&(e=e.set("_id","list:"+r())),e},t.prototype.newListOfShoppingLists=function(t){var e=new u(t);return this._guardListOfShoppingLists(e),e},t.prototype.newShoppingListItem=function(t,e){var n=new this._ShoppingListItem(t);return void 0===n._id&&(n=n.set("_id","item:"+r())),void 0===n.list&&e&&(n=n.set("list",e._id)),n},t.prototype.newListOfShoppingListItems=function(t){var e=new u(t);return this._guardListOfShoppingListItems(e),e},t}()},ZfEw:function(t,e,n){"use strict";(function(){function t(t){return i.a.hash(t)}n.d(e,"a",function(){return t});var r=(n("8/Wf"),n("13nb")),i=n.n(r)}).call(e,n("h6ac"))},Zuze:function(t){!function(e,n){t.exports=n()}(0,function(){"use strict";function t(t,e){e&&(t.prototype=Object.create(e.prototype)),t.prototype.constructor=t}function e(t){return o(t)?t:A(t)}function n(t){return u(t)?t:j(t)}function r(t){return s(t)?t:L(t)}function i(t){return o(t)&&!a(t)?t:D(t)}function o(t){return!(!t||!t[an])}function u(t){return!(!t||!t[cn])}function s(t){return!(!t||!t[fn])}function a(t){return u(t)||s(t)}function c(t){return!(!t||!t[hn])}function f(t){return t.value=!1,t}function h(t){t&&(t.value=!0)}function l(){}function p(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function d(t){return void 0===t.size&&(t.size=t.__iterate(_)),t.size}function v(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?d(t)+e:e}function _(){return!0}function y(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function g(t,e){return w(t,e,0)}function m(t,e){return w(t,e,e)}function w(t,e,n){return void 0===t?n:t<0?Math.max(0,e+t):void 0===e?t:Math.min(e,t)}function b(t){this.next=t}function S(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function k(){return{value:void 0,done:!0}}function E(t){return!!x(t)}function I(t){return t&&"function"==typeof t.next}function O(t){var e=x(t);return e&&e.call(t)}function x(t){var e=t&&(bn&&t[bn]||t[Sn]);if("function"==typeof e)return e}function q(t){return t&&"number"==typeof t.length}function A(t){return null===t||void 0===t?M():o(t)?t.toSeq():U(t)}function j(t){return null===t||void 0===t?M().toKeyedSeq():o(t)?u(t)?t.toSeq():t.fromEntrySeq():B(t)}function L(t){return null===t||void 0===t?M():o(t)?u(t)?t.entrySeq():t.toIndexedSeq():$(t)}function D(t){return(null===t||void 0===t?M():o(t)?u(t)?t.entrySeq():t:$(t)).toSetSeq()}function z(t){this._array=t,this.size=t.length}function T(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}function R(t){this._iterable=t,this.size=t.length||t.size}function C(t){this._iterator=t,this._iteratorCache=[]}function N(t){return!(!t||!t[En])}function M(){return In||(In=new z([]))}function B(t){var e=Array.isArray(t)?new z(t).fromEntrySeq():I(t)?new C(t).fromEntrySeq():E(t)?new R(t).fromEntrySeq():"object"==typeof t?new T(t):void 0;if(!e)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+t);return e}function $(t){var e=P(t);if(!e)throw new TypeError("Expected Array or iterable object of values: "+t);return e}function U(t){var e=P(t)||"object"==typeof t&&new T(t);if(!e)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+t);return e}function P(t){return q(t)?new z(t):I(t)?new C(t):E(t)?new R(t):void 0}function F(t,e,n,r){var i=t._cache;if(i){for(var o=i.length-1,u=0;u<=o;u++){var s=i[n?o-u:u];if(!1===e(s[1],r?s[0]:u,t))return u+1}return u}return t.__iterateUncached(e,n)}function K(t,e,n,r){var i=t._cache;if(i){var o=i.length-1,u=0;return new b(function(){var t=i[n?o-u:u];return u++>o?k():S(e,r?t[0]:u-1,t[1])})}return t.__iteratorUncached(e,n)}function W(t,e){return e?J(e,t,"",{"":t}):H(t)}function J(t,e,n,r){return Array.isArray(e)?t.call(r,n,L(e).map(function(n,r){return J(t,n,r,e)})):V(e)?t.call(r,n,j(e).map(function(n,r){return J(t,n,r,e)})):e}function H(t){return Array.isArray(t)?L(t).map(H).toList():V(t)?j(t).map(H).toMap():t}function V(t){return t&&(t.constructor===Object||void 0===t.constructor)}function X(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!("function"!=typeof t.equals||"function"!=typeof e.equals||!t.equals(e))}function G(t,e){if(t===e)return!0;if(!o(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||u(t)!==u(e)||s(t)!==s(e)||c(t)!==c(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!a(t);if(c(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&X(i[1],t)&&(n||X(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var f=t;t=e,e=f}var h=!0,l=e.__iterate(function(e,r){if(n?!t.has(e):i?!X(e,t.get(r,vn)):!X(t.get(r,vn),e))return h=!1,!1});return h&&t.size===l}function Q(t,e){if(!(this instanceof Q))return new Q(t,e);if(this._value=t,0===(this.size=void 0===e?1/0:Math.max(0,e))){if(On)return On;On=this}}function Y(t,e,n){if(!(this instanceof Y))return new Y(t,e,n);if(t=t||0,void 0===e&&(e=1/0),n=void 0===n?1:Math.abs(n),e<t&&(n=-n),this._start=t,this._end=e,this._step=n,0===(this.size=Math.max(0,Math.ceil((e-t)/n-1)+1))){if(xn)return xn;xn=this}}function Z(){throw TypeError("Abstract")}function tt(){}function et(){}function nt(){}function rt(t){return t>>>1&1073741824|3221225471&t}function it(t){if(!1===t||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return rt(n)}if("string"===e)return t.length>Rn?ot(t):ut(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return st(t);if("function"==typeof t.toString)return ut(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function ot(t){var e=Mn[t];return void 0===e&&(e=ut(t),Nn===Cn&&(Nn=0,Mn={}),Nn++,Mn[t]=e),e}function ut(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return rt(e)}function st(t){var e;if(Dn&&void 0!==(e=qn.get(t)))return e;if(void 0!==(e=t[Tn]))return e;if(!Ln){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[Tn]))return e;if(void 0!==(e=at(t)))return e}if(e=++zn,1073741824&zn&&(zn=0),Dn)qn.set(t,e);else{if(void 0!==jn&&!1===jn(t))throw new Error("Non-extensible objects are not allowed as keys.");if(Ln)Object.defineProperty(t,Tn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[Tn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[Tn]=e}}return e}function at(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function ct(){}function ft(t){return null===t||void 0===t?bt():ht(t)&&!c(t)?t:bt().withMutations(function(e){var r=n(t);ct(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function ht(t){return!(!t||!t[Bn])}function lt(t,e){this.ownerID=t,this.entries=e}function pt(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n}function dt(t,e,n){this.ownerID=t,this.count=e,this.nodes=n}function vt(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n}function _t(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n}function yt(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&mt(t._root)}function gt(t,e){return S(t,e[0],e[1])}function mt(t,e){return{node:t,index:0,__prev:e}}function wt(t,e,n,r){var i=Object.create($n);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function bt(){return Un||(Un=wt(0))}function St(t,e,n){var r,i;if(t._root){var o=f(_n),u=f(yn);if(r=kt(t._root,t.__ownerID,0,void 0,e,n,o,u),!u.value)return t;i=t.size+(o.value?n===vn?-1:1:0)}else{if(n===vn)return t;i=1,r=new lt(t.__ownerID,[[e,n]])}return t.__ownerID?(t.size=i,t._root=r,t.__hash=void 0,t.__altered=!0,t):r?wt(i,r):bt()}function kt(t,e,n,r,i,o,u,s){return t?t.update(e,n,r,i,o,u,s):o===vn?t:(h(s),h(u),new _t(e,r,[i,o]))}function Et(t){return t.constructor===_t||t.constructor===vt}function It(t,e,n,r,i){if(t.keyHash===r)return new vt(e,r,[t.entry,i]);var o,u=(0===n?t.keyHash:t.keyHash>>>n)&dn,s=(0===n?r:r>>>n)&dn;return new pt(e,1<<u|1<<s,u===s?[It(t,e,n+ln,r,i)]:(o=new _t(e,r,i),u<s?[t,o]:[o,t]))}function Ot(t,e,n,r){t||(t=new l);for(var i=new _t(t,it(n),[n,r]),o=0;o<e.length;o++){var u=e[o];i=i.update(t,0,void 0,u[0],u[1])}return i}function xt(t,e,n,r){for(var i=0,o=0,u=new Array(n),s=0,a=1,c=e.length;s<c;s++,a<<=1){var f=e[s];void 0!==f&&s!==r&&(i|=a,u[o++]=f)}return new pt(t,i,u)}function qt(t,e,n,r,i){for(var o=0,u=new Array(pn),s=0;0!==n;s++,n>>>=1)u[s]=1&n?e[o++]:void 0;return u[r]=i,new dt(t,o+1,u)}function At(t,e,r){for(var i=[],u=0;u<r.length;u++){var s=r[u],a=n(s);o(s)||(a=a.map(function(t){return W(t)})),i.push(a)}return Dt(t,e,i)}function jt(t,e){return t&&t.mergeDeep&&o(e)?t.mergeDeep(e):X(t,e)?t:e}function Lt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&o(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return X(e,i)?e:i}}function Dt(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,vn,function(t){return t===vn?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function zt(t,e,n,r){var i=t===vn,o=e.next();if(o.done){var u=i?n:t,s=r(u);return s===u?t:s}var a=o.value,c=i?vn:t.get(a,vn),f=zt(c,e,n,r);return f===c?t:f===vn?t.remove(a):(i?bt():t).set(a,f)}function Tt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Rt(t,e,n,r){var i=r?t:p(t);return i[e]=n,i}function Ct(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),u=0,s=0;s<i;s++)s===e?(o[s]=n,u=-1):o[s]=t[s+u];return o}function Nt(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,u=0;u<r;u++)u===e&&(o=1),i[u]=t[u+o];return i}function Mt(t){var e=Ft();if(null===t||void 0===t)return e;if(Bt(t))return t;var n=r(t),i=n.size;return 0===i?e:(ct(i),i>0&&i<pn?Pt(0,i,ln,null,new $t(n.toArray())):e.withMutations(function(t){t.setSize(i),n.forEach(function(e,n){return t.set(n,e)})}))}function Bt(t){return!(!t||!t[Wn])}function $t(t,e){this.array=t,this.ownerID=e}function Ut(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===s?a&&a.array:t&&t.array,i=n>o?0:o-n,c=u-n;return c>pn&&(c=pn),function(){if(i===c)return Vn;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var s,a=t&&t.array,c=i>o?0:o-i>>r,f=1+(u-i>>r);return f>pn&&(f=pn),function(){for(;;){if(s){var t=s();if(t!==Vn)return t;s=null}if(c===f)return Vn;var o=e?--f:c++;s=n(a&&a[o],r-ln,i+(o<<r))}}}var o=t._origin,u=t._capacity,s=Gt(u),a=t._tail;return n(t._root,t._level,0)}function Pt(t,e,n,r,i,o,u){var s=Object.create(Jn);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=u,s.__altered=!1,s}function Ft(){return Hn||(Hn=Pt(0,0,ln))}function Kt(t,e,n){if((e=v(t,e))!==e)return t;if(e>=t.size||e<0)return t.withMutations(function(t){e<0?Vt(t,e).set(0,n):Vt(t,0,e+1).set(e,n)});e+=t._origin;var r=t._tail,i=t._root,o=f(yn);return e>=Gt(t._capacity)?r=Wt(r,t.__ownerID,0,e,n,o):i=Wt(i,t.__ownerID,t._level,e,n,o),o.value?t.__ownerID?(t._root=i,t._tail=r,t.__hash=void 0,t.__altered=!0,t):Pt(t._origin,t._capacity,t._level,i,r):t}function Wt(t,e,n,r,i,o){var u=r>>>n&dn,s=t&&u<t.array.length;if(!s&&void 0===i)return t;var a;if(n>0){var c=t&&t.array[u],f=Wt(c,e,n-ln,r,i,o);return f===c?t:(a=Jt(t,e),a.array[u]=f,a)}return s&&t.array[u]===i?t:(h(o),a=Jt(t,e),void 0===i&&u===a.array.length-1?a.array.pop():a.array[u]=i,a)}function Jt(t,e){return e&&t&&e===t.ownerID?t:new $t(t?t.array.slice():[],e)}function Ht(t,e){if(e>=Gt(t._capacity))return t._tail;if(e<1<<t._level+ln){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&dn],r-=ln;return n}}function Vt(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var r=t.__ownerID||new l,i=t._origin,o=t._capacity,u=i+e,s=void 0===n?o:n<0?o+n:i+n;if(u===i&&s===o)return t;if(u>=s)return t.clear();for(var a=t._level,c=t._root,f=0;u+f<0;)c=new $t(c&&c.array.length?[void 0,c]:[],r),a+=ln,f+=1<<a;f&&(u+=f,i+=f,s+=f,o+=f);for(var h=Gt(o),p=Gt(s);p>=1<<a+ln;)c=new $t(c&&c.array.length?[c]:[],r),a+=ln;var d=t._tail,v=p<h?Ht(t,s-1):p>h?new $t([],r):d;if(d&&p>h&&u<o&&d.array.length){c=Jt(c,r);for(var _=c,y=a;y>ln;y-=ln){var g=h>>>y&dn;_=_.array[g]=Jt(_.array[g],r)}_.array[h>>>ln&dn]=d}if(s<o&&(v=v&&v.removeAfter(r,0,s)),u>=p)u-=p,s-=p,a=ln,c=null,v=v&&v.removeBefore(r,0,u);else if(u>i||p<h){for(f=0;c;){var m=u>>>a&dn;if(m!==p>>>a&dn)break;m&&(f+=(1<<a)*m),a-=ln,c=c.array[m]}c&&u>i&&(c=c.removeBefore(r,a,u-f)),c&&p<h&&(c=c.removeAfter(r,a,p-f)),f&&(u-=f,s-=f)}return t.__ownerID?(t.size=s-u,t._origin=u,t._capacity=s,t._level=a,t._root=c,t._tail=v,t.__hash=void 0,t.__altered=!0,t):Pt(u,s,a,c,v)}function Xt(t,e,n){for(var i=[],u=0,s=0;s<n.length;s++){var a=n[s],c=r(a);c.size>u&&(u=c.size),o(a)||(c=c.map(function(t){return W(t)})),i.push(c)}return u>t.size&&(t=t.setSize(u)),Dt(t,e,i)}function Gt(t){return t<pn?0:t-1>>>ln<<ln}function Qt(t){return null===t||void 0===t?te():Yt(t)?t:te().withMutations(function(e){var r=n(t);ct(r.size),r.forEach(function(t,n){return e.set(n,t)})})}function Yt(t){return ht(t)&&c(t)}function Zt(t,e,n,r){var i=Object.create(Qt.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function te(){return Xn||(Xn=Zt(bt(),Ft()))}function ee(t,e,n){var r,i,o=t._map,u=t._list,s=o.get(e),a=void 0!==s;if(n===vn){if(!a)return t;u.size>=pn&&u.size>=2*o.size?(i=u.filter(function(t,e){return void 0!==t&&s!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=s===u.size-1?u.pop():u.set(s,void 0))}else if(a){if(n===u.get(s)[1])return t;r=o,i=u.set(s,[e,n])}else r=o.set(e,u.size),i=u.set(u.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):Zt(r,i)}function ne(t,e){this._iter=t,this._useKeys=e,this.size=t.size}function re(t){this._iter=t,this.size=t.size}function ie(t){this._iter=t,this.size=t.size}function oe(t){this._iter=t,this.size=t.size}function ue(t){var e=xe(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=qe,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===wn){var r=t.__iterator(e,n);return new b(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===mn?gn:mn,n)},e}function se(t,e,n){var r=xe(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,vn);return o===vn?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,u){return!1!==r(e.call(n,t,i,u),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(wn,i);return new b(function(){var i=o.next();if(i.done)return i;var u=i.value,s=u[0];return S(r,s,e.call(n,u[1],s,t),i)})},r}function ae(t,e){var n=xe(t);return n._iter=t,n.size=t.size,n.reverse=function(){return t},t.flip&&(n.flip=function(){var e=ue(t);return e.reverse=function(){return t.flip()},e}),n.get=function(n,r){return t.get(e?n:-1-n,r)},n.has=function(n){return t.has(e?n:-1-n)},n.includes=function(e){return t.includes(e)},n.cacheResult=qe,n.__iterate=function(e,n){var r=this;return t.__iterate(function(t,n){return e(t,n,r)},!n)},n.__iterator=function(e,n){return t.__iterator(e,!n)},n}function ce(t,e,n,r){var i=xe(t);return r&&(i.has=function(r){var i=t.get(r,vn);return i!==vn&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,vn);return o!==vn&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var u=this,s=0;return t.__iterate(function(t,o,a){if(e.call(n,t,o,a))return s++,i(t,r?o:s-1,u)},o),s},i.__iteratorUncached=function(i,o){var u=t.__iterator(wn,o),s=0;return new b(function(){for(;;){var o=u.next();if(o.done)return o;var a=o.value,c=a[0],f=a[1];if(e.call(n,f,c,t))return S(i,r?c:s++,f,o)}})},i}function fe(t,e,n){var r=ft().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function he(t,e,n){var r=u(t),i=(c(t)?Qt():ft()).asMutable();t.__iterate(function(o,u){i.update(e.call(n,o,u,t),function(t){return t=t||[],t.push(r?[u,o]:o),t})});var o=Oe(t);return i.map(function(e){return ke(t,o(e))})}function le(t,e,n,r){var i=t.size;if(void 0!==e&&(e|=0),void 0!==n&&(n===1/0?n=i:n|=0),y(e,n,i))return t;var o=g(e,i),u=m(n,i);if(o!==o||u!==u)return le(t.toSeq().cacheResult(),e,n,r);var s,a=u-o;a===a&&(s=a<0?0:a);var c=xe(t);return c.size=0===s?s:t.size&&s||void 0,!r&&N(t)&&s>=0&&(c.get=function(e,n){return e=v(this,e),e>=0&&e<s?t.get(e+o,n):n}),c.__iterateUncached=function(e,n){var i=this;if(0===s)return 0;if(n)return this.cacheResult().__iterate(e,n);var u=0,a=!0,c=0;return t.__iterate(function(t,n){if(!a||!(a=u++<o))return c++,!1!==e(t,r?n:c-1,i)&&c!==s}),c},c.__iteratorUncached=function(e,n){if(0!==s&&n)return this.cacheResult().__iterator(e,n);var i=0!==s&&t.__iterator(e,n),u=0,a=0;return new b(function(){for(;u++<o;)i.next();if(++a>s)return k();var t=i.next();return r||e===mn?t:e===gn?S(e,a-1,void 0,t):S(e,a-1,t.value[1],t)})},c}function pe(t,e,n){var r=xe(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var u=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++u&&r(t,i,o)}),u},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var u=t.__iterator(wn,i),s=!0;return new b(function(){if(!s)return k();var t=u.next();if(t.done)return t;var i=t.value,a=i[0],c=i[1];return e.call(n,c,a,o)?r===wn?t:S(r,a,c,t):(s=!1,k())})},r}function de(t,e,n,r){var i=xe(t);return i.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,a=0;return t.__iterate(function(t,o,c){if(!s||!(s=e.call(n,t,o,c)))return a++,i(t,r?o:a-1,u)}),a},i.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(wn,o),a=!0,c=0;return new b(function(){var t,o,f;do{if(t=s.next(),t.done)return r||i===mn?t:i===gn?S(i,c++,void 0,t):S(i,c++,t.value[1],t);var h=t.value;o=h[0],f=h[1],a&&(a=e.call(n,f,o,u))}while(a);return i===wn?t:S(i,o,f,t)})},i}function ve(t,e){var r=u(t),i=[t].concat(e).map(function(t){return o(t)?r&&(t=n(t)):t=r?B(t):$(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===i.length)return t;if(1===i.length){var a=i[0];if(a===t||r&&u(a)||s(t)&&s(a))return a}var c=new z(i);return r?c=c.toKeyedSeq():s(t)||(c=c.toSetSeq()),c=c.flatten(!0),c.size=i.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),c}function _e(t,e,n){var r=xe(t);return r.__iterateUncached=function(r,i){function u(t,c){var f=this;t.__iterate(function(t,i){return(!e||c<e)&&o(t)?u(t,c+1):!1===r(t,n?i:s++,f)&&(a=!0),!a},i)}var s=0,a=!1;return u(t,0),s},r.__iteratorUncached=function(r,i){var u=t.__iterator(r,i),s=[],a=0;return new b(function(){for(;u;){var t=u.next();if(!1===t.done){var c=t.value;if(r===wn&&(c=c[1]),e&&!(s.length<e)||!o(c))return n?t:S(r,a++,c,t);s.push(u),u=c.__iterator(r,i)}else u=s.pop()}return k()})},r}function ye(t,e,n){var r=Oe(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function ge(t,e){var n=xe(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(mn,r),u=0;return new b(function(){return(!i||u%2)&&(i=o.next(),i.done)?i:u%2?S(n,u++,e):S(n,u++,i.value,i)})},n}function me(t,e,n){e||(e=Ae);var r=u(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?j(o):s(t)?L(o):D(o)}function we(t,e,n){if(e||(e=Ae),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return be(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return be(e,t,n)?n:t})}function be(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function Se(t,n,r){var i=xe(t);return i.size=new z(r).map(function(t){return t.size}).min(),i.__iterate=function(t,e){for(var n,r=this.__iterator(mn,e),i=0;!(n=r.next()).done&&!1!==t(n.value,i++,this););return i},i.__iteratorUncached=function(t,i){var o=r.map(function(t){return t=e(t),O(i?t.reverse():t)}),u=0,s=!1;return new b(function(){var e;return s||(e=o.map(function(t){return t.next()}),s=e.some(function(t){return t.done})),s?k():S(t,u++,n.apply(null,e.map(function(t){return t.value})))})},i}function ke(t,e){return N(t)?e:t.constructor(e)}function Ee(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function Ie(t){return ct(t.size),d(t)}function Oe(t){return u(t)?n:s(t)?r:i}function xe(t){return Object.create((u(t)?j:s(t)?L:D).prototype)}function qe(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):A.prototype.cacheResult.call(this)}function Ae(t,e){return t>e?1:t<e?-1:0}function je(t){var n=O(t);if(!n){if(!q(t))throw new TypeError("Expected iterable or array-like: "+t);n=O(e(t))}return n}function Le(t,e){var n,r=function(o){if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var u=Object.keys(t);Te(i,u),i.size=u.length,i._name=e,i._keys=u,i._defaultValues=t}this._map=ft(o)},i=r.prototype=Object.create(Gn);return i.constructor=r,r}function De(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._map=e,r.__ownerID=n,r}function ze(t){return t._name||t.constructor.name||"Record"}function Te(t,e){try{e.forEach(Re.bind(void 0,t))}catch(t){}}function Re(t,e){Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){this.set(e,t)}})}function Ce(t){return null===t||void 0===t?$e():Ne(t)&&!c(t)?t:$e().withMutations(function(e){var n=i(t);ct(n.size),n.forEach(function(t){return e.add(t)})})}function Ne(t){return!(!t||!t[Qn])}function Me(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function Be(t,e){var n=Object.create(Yn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function $e(){return Zn||(Zn=Be(bt()))}function Ue(t){return null===t||void 0===t?Ke():Pe(t)?t:Ke().withMutations(function(e){var n=i(t);ct(n.size),n.forEach(function(t){return e.add(t)})})}function Pe(t){return Ne(t)&&c(t)}function Fe(t,e){var n=Object.create(tr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function Ke(){return er||(er=Fe(te()))}function We(t){return null===t||void 0===t?Ve():Je(t)?t:Ve().unshiftAll(t)}function Je(t){return!(!t||!t[nr])}function He(t,e,n,r){var i=Object.create(rr);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function Ve(){return ir||(ir=He(0))}function Xe(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function Ge(t,e){return e}function Qe(t,e){return[e,t]}function Ye(t){return function(){return!t.apply(this,arguments)}}function Ze(t){return function(){return-t.apply(this,arguments)}}function tn(t){return"string"==typeof t?JSON.stringify(t):String(t)}function en(){return p(arguments)}function nn(t,e){return t<e?1:t>e?-1:0}function rn(t){if(t.size===1/0)return 0;var e=c(t),n=u(t),r=e?1:0;return on(t.__iterate(n?e?function(t,e){r=31*r+un(it(t),it(e))|0}:function(t,e){r=r+un(it(t),it(e))|0}:e?function(t){r=31*r+it(t)|0}:function(t){r=r+it(t)|0}),r)}function on(t,e){return e=An(e,3432918353),e=An(e<<15|e>>>-15,461845907),e=An(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=An(e^e>>>16,2246822507),e=An(e^e>>>13,3266489909),e=rt(e^e>>>16)}function un(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}var sn=Array.prototype.slice;t(n,e),t(r,e),t(i,e),e.isIterable=o,e.isKeyed=u,e.isIndexed=s,e.isAssociative=a,e.isOrdered=c,e.Keyed=n,e.Indexed=r,e.Set=i;var an="@@__IMMUTABLE_ITERABLE__@@",cn="@@__IMMUTABLE_KEYED__@@",fn="@@__IMMUTABLE_INDEXED__@@",hn="@@__IMMUTABLE_ORDERED__@@",ln=5,pn=1<<ln,dn=pn-1,vn={},_n={value:!1},yn={value:!1},gn=0,mn=1,wn=2,bn="function"==typeof Symbol&&Symbol.iterator,Sn="@@iterator",kn=bn||Sn;b.prototype.toString=function(){return"[Iterator]"},b.KEYS=gn,b.VALUES=mn,b.ENTRIES=wn,b.prototype.inspect=b.prototype.toSource=function(){return this.toString()},b.prototype[kn]=function(){return this},t(A,e),A.of=function(){return A(arguments)},A.prototype.toSeq=function(){return this},A.prototype.toString=function(){return this.__toString("Seq {","}")},A.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},A.prototype.__iterate=function(t,e){return F(this,t,e,!0)},A.prototype.__iterator=function(t,e){return K(this,t,e,!0)},t(j,A),j.prototype.toKeyedSeq=function(){return this},t(L,A),L.of=function(){return L(arguments)},L.prototype.toIndexedSeq=function(){return this},L.prototype.toString=function(){return this.__toString("Seq [","]")},L.prototype.__iterate=function(t,e){return F(this,t,e,!1)},L.prototype.__iterator=function(t,e){return K(this,t,e,!1)},t(D,A),D.of=function(){return D(arguments)},D.prototype.toSetSeq=function(){return this},A.isSeq=N,A.Keyed=j,A.Set=D,A.Indexed=L;var En="@@__IMMUTABLE_SEQ__@@";A.prototype[En]=!0,t(z,L),z.prototype.get=function(t,e){return this.has(t)?this._array[v(this,t)]:e},z.prototype.__iterate=function(t,e){for(var n=this._array,r=n.length-1,i=0;i<=r;i++)if(!1===t(n[e?r-i:i],i,this))return i+1;return i},z.prototype.__iterator=function(t,e){var n=this._array,r=n.length-1,i=0;return new b(function(){return i>r?k():S(t,i,n[e?r-i++:i++])})},t(T,j),T.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},T.prototype.has=function(t){return this._object.hasOwnProperty(t)},T.prototype.__iterate=function(t,e){for(var n=this._object,r=this._keys,i=r.length-1,o=0;o<=i;o++){var u=r[e?i-o:o];if(!1===t(n[u],u,this))return o+1}return o},T.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length-1,o=0;return new b(function(){var u=r[e?i-o:o];return o++>i?k():S(t,u,n[u])})},T.prototype[hn]=!0,t(R,L),R.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var n=this._iterable,r=O(n),i=0;if(I(r))for(var o;!(o=r.next()).done&&!1!==t(o.value,i++,this););return i},R.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterable,r=O(n);if(!I(r))return new b(k);var i=0;return new b(function(){var e=r.next();return e.done?e:S(t,i++,e.value)})},t(C,L),C.prototype.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);for(var n=this._iterator,r=this._iteratorCache,i=0;i<r.length;)if(!1===t(r[i],i++,this))return i;for(var o;!(o=n.next()).done;){var u=o.value;if(r[i]=u,!1===t(u,i++,this))break}return i},C.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new b(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return S(t,i,r[i++])})};var In;t(Q,L),Q.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Q.prototype.get=function(t,e){return this.has(t)?this._value:e},Q.prototype.includes=function(t){return X(this._value,t)},Q.prototype.slice=function(t,e){var n=this.size;return y(t,e,n)?this:new Q(this._value,m(e,n)-g(t,n))},Q.prototype.reverse=function(){return this},Q.prototype.indexOf=function(t){return X(this._value,t)?0:-1},Q.prototype.lastIndexOf=function(t){return X(this._value,t)?this.size:-1},Q.prototype.__iterate=function(t){for(var e=0;e<this.size;e++)if(!1===t(this._value,e,this))return e+1;return e},Q.prototype.__iterator=function(t){var e=this,n=0;return new b(function(){return n<e.size?S(t,n++,e._value):k()})},Q.prototype.equals=function(t){return t instanceof Q?X(this._value,t._value):G(t)};var On;t(Y,L),Y.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},Y.prototype.get=function(t,e){return this.has(t)?this._start+v(this,t)*this._step:e},Y.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},Y.prototype.slice=function(t,e){return y(t,e,this.size)?this:(t=g(t,this.size),e=m(e,this.size),e<=t?new Y(0,0):new Y(this.get(t,this._end),this.get(e,this._end),this._step))},Y.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},Y.prototype.lastIndexOf=function(t){return this.indexOf(t)},Y.prototype.__iterate=function(t,e){for(var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;o<=n;o++){if(!1===t(i,o,this))return o+1;i+=e?-r:r}return o},Y.prototype.__iterator=function(t,e){var n=this.size-1,r=this._step,i=e?this._start+n*r:this._start,o=0;return new b(function(){var u=i;return i+=e?-r:r,o>n?k():S(t,o++,u)})},Y.prototype.equals=function(t){return t instanceof Y?this._start===t._start&&this._end===t._end&&this._step===t._step:G(this,t)};var xn;t(Z,e),t(tt,Z),t(et,Z),t(nt,Z),Z.Keyed=tt,Z.Indexed=et,Z.Set=nt;var qn,An="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},jn=Object.isExtensible,Ln=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),Dn="function"==typeof WeakMap;Dn&&(qn=new WeakMap);var zn=0,Tn="__immutablehash__";"function"==typeof Symbol&&(Tn=Symbol(Tn));var Rn=16,Cn=255,Nn=0,Mn={};t(ft,tt),ft.of=function(){var t=sn.call(arguments,0);return bt().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},ft.prototype.toString=function(){return this.__toString("Map {","}")},ft.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},ft.prototype.set=function(t,e){return St(this,t,e)},ft.prototype.setIn=function(t,e){return this.updateIn(t,vn,function(){return e})},ft.prototype.remove=function(t){return St(this,t,vn)},ft.prototype.deleteIn=function(t){return this.updateIn(t,function(){return vn})},ft.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},ft.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=zt(this,je(t),e,n);return r===vn?void 0:r},ft.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):bt()},ft.prototype.merge=function(){return At(this,void 0,arguments)},ft.prototype.mergeWith=function(t){return At(this,t,sn.call(arguments,1))},ft.prototype.mergeIn=function(t){var e=sn.call(arguments,1);return this.updateIn(t,bt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},ft.prototype.mergeDeep=function(){return At(this,jt,arguments)},ft.prototype.mergeDeepWith=function(t){var e=sn.call(arguments,1);return At(this,Lt(t),e)},ft.prototype.mergeDeepIn=function(t){var e=sn.call(arguments,1);return this.updateIn(t,bt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},ft.prototype.sort=function(t){return Qt(me(this,t))},ft.prototype.sortBy=function(t,e){return Qt(me(this,e,t))},ft.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},ft.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new l)},ft.prototype.asImmutable=function(){return this.__ensureOwner()},ft.prototype.wasAltered=function(){return this.__altered},ft.prototype.__iterator=function(t,e){return new yt(this,t,e)},ft.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},ft.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?wt(this.size,this._root,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},ft.isMap=ht;var Bn="@@__IMMUTABLE_MAP__@@",$n=ft.prototype;$n[Bn]=!0,$n.delete=$n.remove,$n.removeIn=$n.deleteIn,lt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(X(n,i[o][0]))return i[o][1];return r},lt.prototype.update=function(t,e,n,r,i,o,u){for(var s=i===vn,a=this.entries,c=0,f=a.length;c<f&&!X(r,a[c][0]);c++);var l=c<f;if(l?a[c][1]===i:s)return this;if(h(u),(s||!l)&&h(o),!s||1!==a.length){if(!l&&!s&&a.length>=Pn)return Ot(t,a,r,i);var d=t&&t===this.ownerID,v=d?a:p(a);return l?s?c===f-1?v.pop():v[c]=v.pop():v[c]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new lt(t,v)}},pt.prototype.get=function(t,e,n,r){void 0===e&&(e=it(n));var i=1<<((0===t?e:e>>>t)&dn),o=this.bitmap;return 0==(o&i)?r:this.nodes[Tt(o&i-1)].get(t+ln,e,n,r)},pt.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=it(r));var s=(0===e?n:n>>>e)&dn,a=1<<s,c=this.bitmap,f=0!=(c&a);if(!f&&i===vn)return this;var h=Tt(c&a-1),l=this.nodes,p=f?l[h]:void 0,d=kt(p,t,e+ln,n,r,i,o,u);if(d===p)return this;if(!f&&d&&l.length>=Fn)return qt(t,l,c,s,d);if(f&&!d&&2===l.length&&Et(l[1^h]))return l[1^h];if(f&&d&&1===l.length&&Et(d))return d;var v=t&&t===this.ownerID,_=f?d?c:c^a:c|a,y=f?d?Rt(l,h,d,v):Nt(l,h,v):Ct(l,h,d,v);return v?(this.bitmap=_,this.nodes=y,this):new pt(t,_,y)},dt.prototype.get=function(t,e,n,r){void 0===e&&(e=it(n));var i=(0===t?e:e>>>t)&dn,o=this.nodes[i];return o?o.get(t+ln,e,n,r):r},dt.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=it(r));var s=(0===e?n:n>>>e)&dn,a=i===vn,c=this.nodes,f=c[s];if(a&&!f)return this;var h=kt(f,t,e+ln,n,r,i,o,u);if(h===f)return this;var l=this.count;if(f){if(!h&&--l<Kn)return xt(t,c,l,s)}else l++;var p=t&&t===this.ownerID,d=Rt(c,s,h,p);return p?(this.count=l,this.nodes=d,this):new dt(t,l,d)},vt.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(X(n,i[o][0]))return i[o][1];return r},vt.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=it(r));var s=i===vn;if(n!==this.keyHash)return s?this:(h(u),h(o),It(this,t,e,n,[r,i]));for(var a=this.entries,c=0,f=a.length;c<f&&!X(r,a[c][0]);c++);var l=c<f;if(l?a[c][1]===i:s)return this;if(h(u),(s||!l)&&h(o),s&&2===f)return new _t(t,this.keyHash,a[1^c]);var d=t&&t===this.ownerID,v=d?a:p(a);return l?s?c===f-1?v.pop():v[c]=v.pop():v[c]=[r,i]:v.push([r,i]),d?(this.entries=v,this):new vt(t,this.keyHash,v)},_t.prototype.get=function(t,e,n,r){return X(n,this.entry[0])?this.entry[1]:r},_t.prototype.update=function(t,e,n,r,i,o,u){var s=i===vn,a=X(r,this.entry[0]);return(a?i===this.entry[1]:s)?this:(h(u),s?void h(o):a?t&&t===this.ownerID?(this.entry[1]=i,this):new _t(t,this.keyHash,[r,i]):(h(o),It(this,t,e,it(r),[r,i])))},lt.prototype.iterate=vt.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},pt.prototype.iterate=dt.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},_t.prototype.iterate=function(t){return t(this.entry)},t(yt,b),yt.prototype.next=function(){for(var t=this._type,e=this._stack;e;){var n,r=e.node,i=e.index++;if(r.entry){if(0===i)return gt(t,r.entry)}else if(r.entries){if(n=r.entries.length-1,i<=n)return gt(t,r.entries[this._reverse?n-i:i])}else if(n=r.nodes.length-1,i<=n){var o=r.nodes[this._reverse?n-i:i];if(o){if(o.entry)return gt(t,o.entry);e=this._stack=mt(o,e)}continue}e=this._stack=this._stack.__prev}return k()};var Un,Pn=pn/4,Fn=pn/2,Kn=pn/4;t(Mt,et),Mt.of=function(){return this(arguments)},Mt.prototype.toString=function(){return this.__toString("List [","]")},Mt.prototype.get=function(t,e){if((t=v(this,t))>=0&&t<this.size){t+=this._origin;var n=Ht(this,t);return n&&n.array[t&dn]}return e},Mt.prototype.set=function(t,e){return Kt(this,t,e)},Mt.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},Mt.prototype.insert=function(t,e){return this.splice(t,0,e)},Mt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=ln,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):Ft()},Mt.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Vt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},Mt.prototype.pop=function(){return Vt(this,0,-1)},Mt.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Vt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},Mt.prototype.shift=function(){return Vt(this,1)},Mt.prototype.merge=function(){return Xt(this,void 0,arguments)},Mt.prototype.mergeWith=function(t){return Xt(this,t,sn.call(arguments,1))},Mt.prototype.mergeDeep=function(){return Xt(this,jt,arguments)},Mt.prototype.mergeDeepWith=function(t){var e=sn.call(arguments,1);return Xt(this,Lt(t),e)},Mt.prototype.setSize=function(t){return Vt(this,0,t)},Mt.prototype.slice=function(t,e){var n=this.size;return y(t,e,n)?this:Vt(this,g(t,n),m(e,n))},Mt.prototype.__iterator=function(t,e){var n=0,r=Ut(this,e);return new b(function(){var e=r();return e===Vn?k():S(t,n++,e)})},Mt.prototype.__iterate=function(t,e){for(var n,r=0,i=Ut(this,e);(n=i())!==Vn&&!1!==t(n,r++,this););return r},Mt.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Pt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):(this.__ownerID=t,this)},Mt.isList=Bt;var Wn="@@__IMMUTABLE_LIST__@@",Jn=Mt.prototype;Jn[Wn]=!0,Jn.delete=Jn.remove,Jn.setIn=$n.setIn,Jn.deleteIn=Jn.removeIn=$n.removeIn,Jn.update=$n.update,Jn.updateIn=$n.updateIn,Jn.mergeIn=$n.mergeIn,Jn.mergeDeepIn=$n.mergeDeepIn,Jn.withMutations=$n.withMutations,Jn.asMutable=$n.asMutable,Jn.asImmutable=$n.asImmutable,Jn.wasAltered=$n.wasAltered,$t.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&dn;if(r>=this.array.length)return new $t([],t);var i,o=0===r;if(e>0){var u=this.array[r];if((i=u&&u.removeBefore(t,e-ln,n))===u&&o)return this}if(o&&!i)return this;var s=Jt(this,t);if(!o)for(var a=0;a<r;a++)s.array[a]=void 0;return i&&(s.array[r]=i),s},$t.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&dn;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if((i=o&&o.removeAfter(t,e-ln,n))===o&&r===this.array.length-1)return this}var u=Jt(this,t);return u.array.splice(r+1),i&&(u.array[r]=i),u};var Hn,Vn={};t(Qt,ft),Qt.of=function(){return this(arguments)},Qt.prototype.toString=function(){return this.__toString("OrderedMap {","}")},Qt.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},Qt.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):te()},Qt.prototype.set=function(t,e){return ee(this,t,e)},Qt.prototype.remove=function(t){return ee(this,t,vn)},Qt.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},Qt.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},Qt.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},Qt.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Zt(e,n,t,this.__hash):(this.__ownerID=t,this._map=e,this._list=n,this)},Qt.isOrderedMap=Yt,Qt.prototype[hn]=!0,Qt.prototype.delete=Qt.prototype.remove;var Xn;t(ne,j),ne.prototype.get=function(t,e){return this._iter.get(t,e)},ne.prototype.has=function(t){return this._iter.has(t)},ne.prototype.valueSeq=function(){return this._iter.valueSeq()},ne.prototype.reverse=function(){var t=this,e=ae(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},ne.prototype.map=function(t,e){var n=this,r=se(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},ne.prototype.__iterate=function(t,e){var n,r=this;return this._iter.__iterate(this._useKeys?function(e,n){return t(e,n,r)}:(n=e?Ie(this):0,function(i){return t(i,e?--n:n++,r)}),e)},ne.prototype.__iterator=function(t,e){if(this._useKeys)return this._iter.__iterator(t,e);var n=this._iter.__iterator(mn,e),r=e?Ie(this):0;return new b(function(){var i=n.next();return i.done?i:S(t,e?--r:r++,i.value,i)})},ne.prototype[hn]=!0,t(re,L),re.prototype.includes=function(t){return this._iter.includes(t)},re.prototype.__iterate=function(t,e){var n=this,r=0;return this._iter.__iterate(function(e){return t(e,r++,n)},e)},re.prototype.__iterator=function(t,e){var n=this._iter.__iterator(mn,e),r=0;return new b(function(){var e=n.next();return e.done?e:S(t,r++,e.value,e)})},t(ie,D),ie.prototype.has=function(t){return this._iter.includes(t)},ie.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},ie.prototype.__iterator=function(t,e){var n=this._iter.__iterator(mn,e);return new b(function(){var e=n.next();return e.done?e:S(t,e.value,e.value,e)})},t(oe,j),oe.prototype.entrySeq=function(){return this._iter.toSeq()},oe.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){Ee(e);var r=o(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},oe.prototype.__iterator=function(t,e){var n=this._iter.__iterator(mn,e);return new b(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){Ee(r);var i=o(r);return S(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},re.prototype.cacheResult=ne.prototype.cacheResult=ie.prototype.cacheResult=oe.prototype.cacheResult=qe,t(Le,tt),Le.prototype.toString=function(){return this.__toString(ze(this)+" {","}")},Le.prototype.has=function(t){return this._defaultValues.hasOwnProperty(t)},Le.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._defaultValues[t];return this._map?this._map.get(t,n):n},Le.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var t=this.constructor;return t._empty||(t._empty=De(this,bt()))},Le.prototype.set=function(t,e){if(!this.has(t))throw new Error('Cannot set unknown key "'+t+'" on '+ze(this));if(this._map&&!this._map.has(t)){if(e===this._defaultValues[t])return this}var n=this._map&&this._map.set(t,e);return this.__ownerID||n===this._map?this:De(this,n)},Le.prototype.remove=function(t){if(!this.has(t))return this;var e=this._map&&this._map.remove(t);return this.__ownerID||e===this._map?this:De(this,e)},Le.prototype.wasAltered=function(){return this._map.wasAltered()},Le.prototype.__iterator=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterator(t,e)},Le.prototype.__iterate=function(t,e){var r=this;return n(this._defaultValues).map(function(t,e){return r.get(e)}).__iterate(t,e)},Le.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map&&this._map.__ensureOwner(t);return t?De(this,e,t):(this.__ownerID=t,this._map=e,this)};var Gn=Le.prototype;Gn.delete=Gn.remove,Gn.deleteIn=Gn.removeIn=$n.removeIn,Gn.merge=$n.merge,Gn.mergeWith=$n.mergeWith,Gn.mergeIn=$n.mergeIn,Gn.mergeDeep=$n.mergeDeep,Gn.mergeDeepWith=$n.mergeDeepWith,Gn.mergeDeepIn=$n.mergeDeepIn,Gn.setIn=$n.setIn,Gn.update=$n.update,Gn.updateIn=$n.updateIn,Gn.withMutations=$n.withMutations,Gn.asMutable=$n.asMutable,Gn.asImmutable=$n.asImmutable,t(Ce,nt),Ce.of=function(){return this(arguments)},Ce.fromKeys=function(t){return this(n(t).keySeq())},Ce.prototype.toString=function(){return this.__toString("Set {","}")},Ce.prototype.has=function(t){return this._map.has(t)},Ce.prototype.add=function(t){return Me(this,this._map.set(t,!0))},Ce.prototype.remove=function(t){return Me(this,this._map.remove(t))},Ce.prototype.clear=function(){return Me(this,this._map.clear())},Ce.prototype.union=function(){var t=sn.call(arguments,0);return t=t.filter(function(t){return 0!==t.size}),0===t.length?this:0!==this.size||this.__ownerID||1!==t.length?this.withMutations(function(e){for(var n=0;n<t.length;n++)i(t[n]).forEach(function(t){return e.add(t)})}):this.constructor(t[0])},Ce.prototype.intersect=function(){var t=sn.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.every(function(t){return t.includes(e)})||n.remove(e)})})},Ce.prototype.subtract=function(){var t=sn.call(arguments,0);if(0===t.length)return this;t=t.map(function(t){return i(t)});var e=this;return this.withMutations(function(n){e.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.remove(e)})})},Ce.prototype.merge=function(){return this.union.apply(this,arguments)},Ce.prototype.mergeWith=function(){return this.union.apply(this,sn.call(arguments,1))},Ce.prototype.sort=function(t){return Ue(me(this,t))},Ce.prototype.sortBy=function(t,e){return Ue(me(this,e,t))},Ce.prototype.wasAltered=function(){return this._map.wasAltered()},Ce.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},Ce.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},Ce.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):(this.__ownerID=t,this._map=e,this)},Ce.isSet=Ne;var Qn="@@__IMMUTABLE_SET__@@",Yn=Ce.prototype;Yn[Qn]=!0,Yn.delete=Yn.remove,Yn.mergeDeep=Yn.merge,Yn.mergeDeepWith=Yn.mergeWith,Yn.withMutations=$n.withMutations,Yn.asMutable=$n.asMutable,Yn.asImmutable=$n.asImmutable,Yn.__empty=$e,Yn.__make=Be;var Zn;t(Ue,Ce),Ue.of=function(){return this(arguments)},Ue.fromKeys=function(t){return this(n(t).keySeq())},Ue.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Ue.isOrderedSet=Pe;var tr=Ue.prototype;tr[hn]=!0,tr.__empty=Ke,tr.__make=Fe;var er;t(We,et),We.of=function(){return this(arguments)},We.prototype.toString=function(){return this.__toString("Stack [","]")},We.prototype.get=function(t,e){var n=this._head;for(t=v(this,t);n&&t--;)n=n.next;return n?n.value:e},We.prototype.peek=function(){return this._head&&this._head.value},We.prototype.push=function(){if(0===arguments.length)return this;for(var t=this.size+arguments.length,e=this._head,n=arguments.length-1;n>=0;n--)e={value:arguments[n],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):He(t,e)},We.prototype.pushAll=function(t){if(t=r(t),0===t.size)return this;ct(t.size);var e=this.size,n=this._head;return t.reverse().forEach(function(t){e++,n={value:t,next:n}}),this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):He(e,n)},We.prototype.pop=function(){return this.slice(1)},We.prototype.unshift=function(){return this.push.apply(this,arguments)},We.prototype.unshiftAll=function(t){return this.pushAll(t)},We.prototype.shift=function(){return this.pop.apply(this,arguments)},We.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Ve()},We.prototype.slice=function(t,e){if(y(t,e,this.size))return this;var n=g(t,this.size);if(m(e,this.size)!==this.size)return et.prototype.slice.call(this,t,e);for(var r=this.size-n,i=this._head;n--;)i=i.next;return this.__ownerID?(this.size=r,this._head=i,this.__hash=void 0,this.__altered=!0,this):He(r,i)},We.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?He(this.size,this._head,t,this.__hash):(this.__ownerID=t,this.__altered=!1,this)},We.prototype.__iterate=function(t,e){if(e)return this.reverse().__iterate(t);for(var n=0,r=this._head;r&&!1!==t(r.value,n++,this);)r=r.next;return n},We.prototype.__iterator=function(t,e){if(e)return this.reverse().__iterator(t);var n=0,r=this._head;return new b(function(){if(r){var e=r.value;return r=r.next,S(t,n++,e)}return k()})},We.isStack=Je;var nr="@@__IMMUTABLE_STACK__@@",rr=We.prototype;rr[nr]=!0,rr.withMutations=$n.withMutations,rr.asMutable=$n.asMutable,rr.asImmutable=$n.asImmutable,rr.wasAltered=$n.wasAltered;var ir;e.Iterator=b,Xe(e,{toArray:function(){ct(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new re(this)},toJS:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJS?t.toJS():t}).__toJS()},toJSON:function(){return this.toSeq().map(function(t){return t&&"function"==typeof t.toJSON?t.toJSON():t}).__toJS()},toKeyedSeq:function(){return new ne(this,!0)},toMap:function(){return ft(this.toKeyedSeq())},toObject:function(){ct(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Qt(this.toKeyedSeq())},toOrderedSet:function(){return Ue(u(this)?this.valueSeq():this)},toSet:function(){return Ce(u(this)?this.valueSeq():this)},toSetSeq:function(){return new ie(this)},toSeq:function(){return s(this)?this.toIndexedSeq():u(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return We(u(this)?this.valueSeq():this)},toList:function(){return Mt(u(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){return ke(this,ve(this,sn.call(arguments,0)))},includes:function(t){return this.some(function(e){return X(e,t)})},entries:function(){return this.__iterator(wn)},every:function(t,e){ct(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return ke(this,ce(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return ct(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){ct(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator(gn)},map:function(t,e){return ke(this,se(this,t,e))},reduce:function(t,e,n){ct(this.size);var r,i;return arguments.length<2?i=!0:r=e,this.__iterate(function(e,o,u){i?(i=!1,r=e):r=t.call(n,r,e,o,u)}),r},reduceRight:function(){var t=this.toKeyedSeq().reverse();return t.reduce.apply(t,arguments)},reverse:function(){return ke(this,ae(this,!0))},slice:function(t,e){return ke(this,le(this,t,e,!0))},some:function(t,e){return!this.every(Ye(t),e)},sort:function(t){return ke(this,me(this,t))},values:function(){return this.__iterator(mn)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return d(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return fe(this,t,e)},equals:function(t){return G(this,t)},entrySeq:function(){var t=this;if(t._cache)return new z(t._cache);var e=t.toSeq().map(Qe).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e},filterNot:function(t,e){return this.filter(Ye(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(_)},flatMap:function(t,e){return ke(this,ye(this,t,e))},flatten:function(t){return ke(this,_e(this,t,!0))},fromEntrySeq:function(){return new oe(this)},get:function(t,e){return this.find(function(e,n){return X(n,t)},void 0,e)},getIn:function(t,e){for(var n,r=this,i=je(t);!(n=i.next()).done;){var o=n.value;if((r=r&&r.get?r.get(o,vn):vn)===vn)return e}return r},groupBy:function(t,e){return he(this,t,e)},has:function(t){return this.get(t,vn)!==vn},hasIn:function(t){return this.getIn(t,vn)!==vn},isSubset:function(t){return t="function"==typeof t.includes?t:e(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:e(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return X(e,t)})},keySeq:function(){return this.toSeq().map(Ge).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return we(this,t)},maxBy:function(t,e){return we(this,e,t)},min:function(t){return we(this,t?Ze(t):nn)},minBy:function(t,e){return we(this,e?Ze(e):nn,t)},rest:function(){return this.slice(1)},skip:function(t){return this.slice(Math.max(0,t))},skipLast:function(t){return ke(this,this.toSeq().reverse().skip(t).reverse())},skipWhile:function(t,e){return ke(this,de(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(Ye(t),e)},sortBy:function(t,e){return ke(this,me(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return ke(this,this.toSeq().reverse().take(t).reverse())},takeWhile:function(t,e){return ke(this,pe(this,t,e))},takeUntil:function(t,e){return this.takeWhile(Ye(t),e)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=rn(this))}});var or=e.prototype;or[an]=!0,or[kn]=or.values,or.__toJS=or.toArray,or.__toStringMapper=tn,or.inspect=or.toSource=function(){return this.toString()},or.chain=or.flatMap,or.contains=or.includes,Xe(n,{flip:function(){return ke(this,ue(this))},mapEntries:function(t,e){var n=this,r=0;return ke(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return ke(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var ur=n.prototype;return ur[cn]=!0,ur[kn]=or.entries,ur.__toJS=or.toObject,ur.__toStringMapper=function(t,e){return JSON.stringify(e)+": "+tn(t)},Xe(r,{toKeyedSeq:function(){return new ne(this,!1)},filter:function(t,e){return ke(this,ce(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return ke(this,ae(this,!1))},slice:function(t,e){return ke(this,le(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(0|e,0),0===n||2===n&&!e)return this;t=g(t,t<0?this.count():this.size);var r=this.slice(0,t);return ke(this,1===n?r:r.concat(p(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return ke(this,_e(this,t,!1))},get:function(t,e){return t=v(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=v(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return ke(this,ge(this,t))},interleave:function(){var t=[this].concat(p(arguments)),e=Se(this.toSeq(),L.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),ke(this,n)},keySeq:function(){return Y(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return ke(this,de(this,t,e,!1))},zip:function(){return ke(this,Se(this,en,[this].concat(p(arguments))))},zipWith:function(t){var e=p(arguments);return e[0]=this,ke(this,Se(this,t,e))}}),r.prototype[fn]=!0,r.prototype[hn]=!0,Xe(i,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),i.prototype.has=or.includes,i.prototype.contains=i.prototype.includes,Xe(j,n.prototype),Xe(L,r.prototype),Xe(D,i.prototype),Xe(tt,n.prototype),Xe(et,r.prototype),Xe(nt,i.prototype),{Iterable:e,Seq:A,Collection:Z,Map:ft,OrderedMap:Qt,List:Mt,Stack:We,Set:Ce,OrderedSet:Ue,Record:Le,Range:Y,Repeat:Q,is:X,fromJS:W}})},a6oe:function(t,e,n){e.nextTick=function(t){setTimeout(t,0)},e.platform=e.arch=e.execPath=e.title="browser",e.pid=1,e.browser=!0,e.env={},e.argv=[],e.binding=function(){throw new Error("No such module. (Possibly not yet loaded)")},function(){var t,r="/";e.cwd=function(){return r},e.chdir=function(e){t||(t=n("UUq2")),r=t.resolve(e,r)}}(),e.exit=e.kill=e.umask=e.dlopen=e.uptime=e.memoryUsage=e.uvCounters=function(){},e.features={}},cRy3:function(t,e){"use strict";function n(t,e,n){var r=n[n.length-1];t===r.element&&(n.pop(),r=n[n.length-1]);var i=r.element,o=r.index;if(Array.isArray(i))i.push(t);else if(o===e.length-2){var u=e.pop();i[u]=t}else e.push(t)}e.stringify=function(t){var e=[];e.push({obj:t});for(var n,r,i,o,u,s,a,c,f,h,l,p="";n=e.pop();)if(r=n.obj,i=n.prefix||"",o=n.val||"",p+=i,o)p+=o;else if("object"!=typeof r)p+=void 0===r?null:JSON.stringify(r);else if(null===r)p+="null";else if(Array.isArray(r)){for(e.push({val:"]"}),u=r.length-1;u>=0;u--)s=0===u?"":",",e.push({obj:r[u],prefix:s});e.push({val:"["})}else{a=[];for(c in r)r.hasOwnProperty(c)&&a.push(c);for(e.push({val:"}"}),u=a.length-1;u>=0;u--)f=a[u],h=r[f],l=u>0?",":"",l+=JSON.stringify(f)+":",e.push({obj:h,prefix:l});e.push({val:"{"})}return p},e.parse=function(t){for(var e,r,i,o,u,s,a,c,f,h=[],l=[],p=0;;)if("}"!==(e=t[p++])&&"]"!==e&&void 0!==e)switch(e){case" ":case"\t":case"\n":case":":case",":break;case"n":p+=3,n(null,h,l);break;case"t":p+=3,n(!0,h,l);break;case"f":p+=4,n(!1,h,l);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"-":for(r="",p--;;){if(i=t[p++],!/[\d\.\-e\+]/.test(i)){p--;break}r+=i}n(parseFloat(r),h,l);break;case'"':for(o="",u=void 0,s=0;;){if('"'===(a=t[p++])&&("\\"!==u||s%2!=1))break;o+=a,u=a,"\\"===u?s++:s=0}n(JSON.parse('"'+o+'"'),h,l);break;case"[":c={element:[],index:h.length},h.push(c.element),l.push(c);break;case"{":f={element:{},index:h.length},h.push(f.element),l.push(f);break;default:throw new Error("unexpectedly reached end of input: "+e)}else{if(1===h.length)return h.pop();n(h.pop(),h,l)}}},d18E:function(t,e){!function(t,n){n(e)}(0,function(t){"use strict";function e(t){return t.value=!1,t}function n(t){t&&(t.value=!0)}function r(){}function i(t,e){e=e||0;for(var n=Math.max(0,t.length-e),r=new Array(n),i=0;i<n;i++)r[i]=t[i+e];return r}function o(t){return void 0===t.size&&(t.size=t.__iterate(s)),t.size}function u(t,e){if("number"!=typeof e){var n=e>>>0;if(""+n!==e||4294967295===n)return NaN;e=n}return e<0?o(t)+e:e}function s(){return!0}function a(t,e,n){return(0===t||void 0!==n&&t<=-n)&&(void 0===e||void 0!==n&&e>=n)}function c(t,e){return h(t,e,0)}function f(t,e){return h(t,e,e)}function h(t,e,n){return void 0===t?n:t<0?e===1/0?e:0|Math.max(0,e+t):void 0===e||e===t?t:0|Math.min(e,t)}function l(t){return(p(t)||g(t))&&!t.__ownerID}function p(t){return!(!t||!t[Le])}function d(t){return!(!t||!t[De])}function v(t){return!(!t||!t[ze])}function _(t){return d(t)||v(t)}function y(t){return!(!t||!t[Te])}function g(t){return!(!t||!t[Re])}function m(t){return!(!t||"function"!=typeof t.equals||"function"!=typeof t.hashCode)}function w(t,e,n,r){var i=0===t?e:1===t?n:[e,n];return r?r.value=i:r={value:i,done:!1},r}function b(){return{value:void 0,done:!0}}function S(t){return!!I(t)}function k(t){return t&&"function"==typeof t.next}function E(t){var e=I(t);return e&&e.call(t)}function I(t){var e=t&&(Fe&&t[Fe]||t[Ke]);if("function"==typeof e)return e}function O(t){return t&&"number"==typeof t.length}function x(t){return!(!t||!t[Qe])}function q(){return tn||(tn=new Ye([]))}function A(t){var e=Array.isArray(t)?new Ye(t):k(t)?new rn(t):S(t)?new nn(t):void 0;if(e)return e.fromEntrySeq();if("object"==typeof t)return new Ze(t);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+t)}function j(t){var e=D(t);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+t)}function L(t){var e=D(t);if(e)return e;if("object"==typeof t)return new Ze(t);throw new TypeError("Expected Array or collection object of values, or keyed object: "+t)}function D(t){return O(t)?new Ye(t):k(t)?new rn(t):S(t)?new nn(t):void 0}function z(t,e){if(t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1;if("function"==typeof t.valueOf&&"function"==typeof e.valueOf){if(t=t.valueOf(),e=e.valueOf(),t===e||t!==t&&e!==e)return!0;if(!t||!e)return!1}return!!(m(t)&&m(e)&&t.equals(e))}function T(t,e){return R([],e||C,t,"",e&&e.length>2?[]:void 0,{"":t})}function R(t,e,n,r,i,o){var u=Array.isArray(n)?Xe:N(n)?Ve:null;if(u){if(~t.indexOf(n))throw new TypeError("Cannot convert circular structure to Immutable");t.push(n),i&&""!==r&&i.push(r);var s=e.call(o,r,u(n).map(function(r,o){return R(t,e,r,o,i,n)}),i&&i.slice());return t.pop(),i&&i.pop(),s}return n}function C(t,e){return d(e)?e.toMap():e.toList()}function N(t){return t&&(t.constructor===Object||void 0===t.constructor)}function M(t){return t>>>1&1073741824|3221225471&t}function B(t){if(!1===t||null===t||void 0===t)return 0;if("function"==typeof t.valueOf&&(!1===(t=t.valueOf())||null===t||void 0===t))return 0;if(!0===t)return 1;var e=typeof t;if("number"===e){if(t!==t||t===1/0)return 0;var n=0|t;for(n!==t&&(n^=4294967295*t);t>4294967295;)t/=4294967295,n^=t;return M(n)}if("string"===e)return t.length>hn?$(t):U(t);if("function"==typeof t.hashCode)return t.hashCode();if("object"===e)return P(t);if("function"==typeof t.toString)return U(t.toString());throw new Error("Value type "+e+" cannot be hashed.")}function $(t){var e=dn[t];return void 0===e&&(e=U(t),pn===ln&&(pn=0,dn={}),pn++,dn[t]=e),e}function U(t){for(var e=0,n=0;n<t.length;n++)e=31*e+t.charCodeAt(n)|0;return M(e)}function P(t){var e;if(an&&void 0!==(e=en.get(t)))return e;if(void 0!==(e=t[fn]))return e;if(!sn){if(void 0!==(e=t.propertyIsEnumerable&&t.propertyIsEnumerable[fn]))return e;if(void 0!==(e=F(t)))return e}if(e=++cn,1073741824&cn&&(cn=0),an)en.set(t,e);else{if(void 0!==un&&!1===un(t))throw new Error("Non-extensible objects are not allowed as keys.");if(sn)Object.defineProperty(t,fn,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(void 0!==t.propertyIsEnumerable&&t.propertyIsEnumerable===t.constructor.prototype.propertyIsEnumerable)t.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},t.propertyIsEnumerable[fn]=e;else{if(void 0===t.nodeType)throw new Error("Unable to set a non-enumerable property on object.");t[fn]=e}}return e}function F(t){if(t&&t.nodeType>0)switch(t.nodeType){case 1:return t.uniqueID;case 9:return t.documentElement&&t.documentElement.uniqueID}}function K(t){var e=ft(t);return e._iter=t,e.size=t.size,e.flip=function(){return t},e.reverse=function(){var e=t.reverse.apply(this);return e.flip=function(){return t.reverse()},e},e.has=function(e){return t.includes(e)},e.includes=function(e){return t.has(e)},e.cacheResult=ht,e.__iterateUncached=function(e,n){var r=this;return t.__iterate(function(t,n){return!1!==e(n,t,r)},n)},e.__iteratorUncached=function(e,n){if(e===Pe){var r=t.__iterator(e,n);return new Je(function(){var t=r.next();if(!t.done){var e=t.value[0];t.value[0]=t.value[1],t.value[1]=e}return t})}return t.__iterator(e===Ue?$e:Ue,n)},e}function W(t,e,n){var r=ft(t);return r.size=t.size,r.has=function(e){return t.has(e)},r.get=function(r,i){var o=t.get(r,qe);return o===qe?i:e.call(n,o,r,t)},r.__iterateUncached=function(r,i){var o=this;return t.__iterate(function(t,i,u){return!1!==r(e.call(n,t,i,u),i,o)},i)},r.__iteratorUncached=function(r,i){var o=t.__iterator(Pe,i);return new Je(function(){var i=o.next();if(i.done)return i;var u=i.value,s=u[0];return w(r,s,e.call(n,u[1],s,t),i)})},r}function J(t,e){var n=this,r=ft(t);return r._iter=t,r.size=t.size,r.reverse=function(){return t},t.flip&&(r.flip=function(){var e=K(t);return e.reverse=function(){return t.flip()},e}),r.get=function(n,r){return t.get(e?n:-1-n,r)},r.has=function(n){return t.has(e?n:-1-n)},r.includes=function(e){return t.includes(e)},r.cacheResult=ht,r.__iterate=function(n,r){var i=this,u=0;return r&&o(t),t.__iterate(function(t,o){return n(t,e?o:r?i.size-++u:u++,i)},!r)},r.__iterator=function(r,i){var u=0;i&&o(t);var s=t.__iterator(Pe,!i);return new Je(function(){var t=s.next();if(t.done)return t;var o=t.value;return w(r,e?o[0]:i?n.size-++u:u++,o[1],t)})},r}function H(t,e,n,r){var i=ft(t);return r&&(i.has=function(r){var i=t.get(r,qe);return i!==qe&&!!e.call(n,i,r,t)},i.get=function(r,i){var o=t.get(r,qe);return o!==qe&&e.call(n,o,r,t)?o:i}),i.__iterateUncached=function(i,o){var u=this,s=0;return t.__iterate(function(t,o,a){if(e.call(n,t,o,a))return i(t,r?o:s++,u)},o),s},i.__iteratorUncached=function(i,o){var u=t.__iterator(Pe,o),s=0;return new Je(function(){for(;;){var o=u.next();if(o.done)return o;var a=o.value,c=a[0],f=a[1];if(e.call(n,f,c,t))return w(i,r?c:s++,f,o)}})},i}function V(t,e,n){var r=mn().asMutable();return t.__iterate(function(i,o){r.update(e.call(n,i,o,t),0,function(t){return t+1})}),r.asImmutable()}function X(t,e,n){var r=d(t),i=(y(t)?Mn():mn()).asMutable();t.__iterate(function(o,u){i.update(e.call(n,o,u,t),function(t){return t=t||[],t.push(r?[u,o]:o),t})});var o=ct(t);return i.map(function(e){return st(t,o(e))})}function G(t,e,n,r){var i=t.size;if(a(e,n,i))return t;var o=c(e,i),s=f(n,i);if(o!==o||s!==s)return G(t.toSeq().cacheResult(),e,n,r);var h,l=s-o;l===l&&(h=l<0?0:l);var p=ft(t);return p.size=0===h?h:t.size&&h||void 0,!r&&x(t)&&h>=0&&(p.get=function(e,n){return e=u(this,e),e>=0&&e<h?t.get(e+o,n):n}),p.__iterateUncached=function(e,n){var i=this;if(0===h)return 0;if(n)return this.cacheResult().__iterate(e,n);var u=0,s=!0,a=0;return t.__iterate(function(t,n){if(!s||!(s=u++<o))return a++,!1!==e(t,r?n:a-1,i)&&a!==h}),a},p.__iteratorUncached=function(e,n){if(0!==h&&n)return this.cacheResult().__iterator(e,n);var i=0!==h&&t.__iterator(e,n),u=0,s=0;return new Je(function(){for(;u++<o;)i.next();if(++s>h)return b();var t=i.next();return r||e===Ue?t:e===$e?w(e,s-1,void 0,t):w(e,s-1,t.value[1],t)})},p}function Q(t,e,n){var r=ft(t);return r.__iterateUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterate(r,i);var u=0;return t.__iterate(function(t,i,s){return e.call(n,t,i,s)&&++u&&r(t,i,o)}),u},r.__iteratorUncached=function(r,i){var o=this;if(i)return this.cacheResult().__iterator(r,i);var u=t.__iterator(Pe,i),s=!0;return new Je(function(){if(!s)return b();var t=u.next();if(t.done)return t;var i=t.value,a=i[0],c=i[1];return e.call(n,c,a,o)?r===Pe?t:w(r,a,c,t):(s=!1,b())})},r}function Y(t,e,n,r){var i=ft(t);return i.__iterateUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterate(i,o);var s=!0,a=0;return t.__iterate(function(t,o,c){if(!s||!(s=e.call(n,t,o,c)))return a++,i(t,r?o:a-1,u)}),a},i.__iteratorUncached=function(i,o){var u=this;if(o)return this.cacheResult().__iterator(i,o);var s=t.__iterator(Pe,o),a=!0,c=0;return new Je(function(){var t,o,f;do{if(t=s.next(),t.done)return r||i===Ue?t:i===$e?w(i,c++,void 0,t):w(i,c++,t.value[1],t);var h=t.value;o=h[0],f=h[1],a&&(a=e.call(n,f,o,u))}while(a);return i===Pe?t:w(i,o,f,t)})},i}function Z(t,e){var n=d(t),r=[t].concat(e).map(function(t){return p(t)?n&&(t=Ne(t)):t=n?A(t):j(Array.isArray(t)?t:[t]),t}).filter(function(t){return 0!==t.size});if(0===r.length)return t;if(1===r.length){var i=r[0];if(i===t||n&&d(i)||v(t)&&v(i))return i}var o=new Ye(r);return n?o=o.toKeyedSeq():v(t)||(o=o.toSetSeq()),o=o.flatten(!0),o.size=r.reduce(function(t,e){if(void 0!==t){var n=e.size;if(void 0!==n)return t+n}},0),o}function tt(t,e,n){var r=ft(t);return r.__iterateUncached=function(i,o){function u(t,c){t.__iterate(function(t,o){return(!e||c<e)&&p(t)?u(t,c+1):!1===i(t,n?o:s++,r)&&(a=!0),!a},o)}if(o)return this.cacheResult().__iterate(i,o);var s=0,a=!1;return u(t,0),s},r.__iteratorUncached=function(r,i){if(i)return this.cacheResult().__iterator(r,i);var o=t.__iterator(r,i),u=[],s=0;return new Je(function(){for(;o;){var t=o.next();if(!1===t.done){var a=t.value;if(r===Pe&&(a=a[1]),e&&!(u.length<e)||!p(a))return n?t:w(r,s++,a,t);u.push(o),o=a.__iterator(r,i)}else o=u.pop()}return b()})},r}function et(t,e,n){var r=ct(t);return t.toSeq().map(function(i,o){return r(e.call(n,i,o,t))}).flatten(!0)}function nt(t,e){var n=ft(t);return n.size=t.size&&2*t.size-1,n.__iterateUncached=function(n,r){var i=this,o=0;return t.__iterate(function(t){return(!o||!1!==n(e,o++,i))&&!1!==n(t,o++,i)},r),o},n.__iteratorUncached=function(n,r){var i,o=t.__iterator(Ue,r),u=0;return new Je(function(){return(!i||u%2)&&(i=o.next(),i.done)?i:u%2?w(n,u++,e):w(n,u++,i.value,i)})},n}function rt(t,e,n){e||(e=lt);var r=d(t),i=0,o=t.toSeq().map(function(e,r){return[r,e,i++,n?n(e,r,t):e]}).toArray();return o.sort(function(t,n){return e(t[3],n[3])||t[2]-n[2]}).forEach(r?function(t,e){o[e].length=2}:function(t,e){o[e]=t[1]}),r?Ve(o):v(t)?Xe(o):Ge(o)}function it(t,e,n){if(e||(e=lt),n){var r=t.toSeq().map(function(e,r){return[e,n(e,r,t)]}).reduce(function(t,n){return ot(e,t[1],n[1])?n:t});return r&&r[0]}return t.reduce(function(t,n){return ot(e,t,n)?n:t})}function ot(t,e,n){var r=t(n,e);return 0===r&&n!==e&&(void 0===n||null===n||n!==n)||r>0}function ut(t,e,n){var r=ft(t);return r.size=new Ye(n).map(function(t){return t.size}).min(),r.__iterate=function(t,e){for(var n,r=this,i=this.__iterator(Ue,e),o=0;!(n=i.next()).done&&!1!==t(n.value,o++,r););return o},r.__iteratorUncached=function(t,r){var i=n.map(function(t){return t=Ce(t),E(r?t.reverse():t)}),o=0,u=!1;return new Je(function(){var n;return u||(n=i.map(function(t){return t.next()}),u=n.some(function(t){return t.done})),u?b():w(t,o++,e.apply(null,n.map(function(t){return t.value})))})},r}function st(t,e){return t===e?t:x(t)?e:t.constructor(e)}function at(t){if(t!==Object(t))throw new TypeError("Expected [K, V] tuple: "+t)}function ct(t){return d(t)?Ne:v(t)?Me:Be}function ft(t){return Object.create((d(t)?Ve:v(t)?Xe:Ge).prototype)}function ht(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):He.prototype.cacheResult.call(this)}function lt(t,e){return void 0===t&&void 0===e?0:void 0===t?1:void 0===e?-1:t>e?1:t<e?-1:0}function pt(t){if(O(t)&&"string"!=typeof t)return t;if(y(t))return t.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+t)}function dt(){}function vt(t){return"string"==typeof t?JSON.stringify(t):String(t)}function _t(t){return!(!t||!t[wn])}function yt(t,e){return w(t,e[0],e[1])}function gt(t,e){return{node:t,index:0,__prev:e}}function mt(t,e,n,r){var i=Object.create(bn);return i.size=t,i._root=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function wt(){return xn||(xn=mt(0))}function bt(t,n,r){var i,o;if(t._root){var u=e(Ae),s=e(je);if(i=St(t._root,t.__ownerID,0,void 0,n,r,u,s),!s.value)return t;o=t.size+(u.value?r===qe?-1:1:0)}else{if(r===qe)return t;o=1,i=new Sn(t.__ownerID,[[n,r]])}return t.__ownerID?(t.size=o,t._root=i,t.__hash=void 0,t.__altered=!0,t):i?mt(o,i):wt()}function St(t,e,r,i,o,u,s,a){return t?t.update(e,r,i,o,u,s,a):u===qe?t:(n(a),n(s),new On(e,i,[o,u]))}function kt(t){return t.constructor===On||t.constructor===In}function Et(t,e,n,r,i){if(t.keyHash===r)return new In(e,r,[t.entry,i]);var o,u=(0===n?t.keyHash:t.keyHash>>>n)&xe,s=(0===n?r:r>>>n)&xe,a=u===s?[Et(t,e,n+Ie,r,i)]:(o=new On(e,r,i),u<s?[t,o]:[o,t]);return new kn(e,1<<u|1<<s,a)}function It(t,e,n,i){t||(t=new r);for(var o=new On(t,B(n),[n,i]),u=0;u<e.length;u++){var s=e[u];o=o.update(t,0,void 0,s[0],s[1])}return o}function Ot(t,e,n,r){for(var i=0,o=0,u=new Array(n),s=0,a=1,c=e.length;s<c;s++,a<<=1){var f=e[s];void 0!==f&&s!==r&&(i|=a,u[o++]=f)}return new kn(t,i,u)}function xt(t,e,n,r,i){for(var o=0,u=new Array(Oe),s=0;0!==n;s++,n>>>=1)u[s]=1&n?e[o++]:void 0;return u[r]=i,new En(t,o+1,u)}function qt(t,e,n){for(var r=[],i=0;i<n.length;i++){var o=n[i],u=Ne(o);p(o)||(u=u.map(function(t){return T(t)})),r.push(u)}return Lt(t,e,r)}function At(t,e){return t&&t.mergeDeep&&p(e)?t.mergeDeep(e):z(t,e)?t:e}function jt(t){return function(e,n,r){if(e&&e.mergeDeepWith&&p(n))return e.mergeDeepWith(t,n);var i=t(e,n,r);return z(e,i)?e:i}}function Lt(t,e,n){return n=n.filter(function(t){return 0!==t.size}),0===n.length?t:0!==t.size||t.__ownerID||1!==n.length?t.withMutations(function(t){for(var r=e?function(n,r){t.update(r,qe,function(t){return t===qe?n:e(t,n,r)})}:function(e,n){t.set(n,e)},i=0;i<n.length;i++)n[i].forEach(r)}):t.constructor(n[0])}function Dt(t,e,n,r,i){var o=t===qe;if(n===e.length){var u=o?r:t,s=i(u);return s===u?t:s}if(!(o||t&&t.set))throw new TypeError("Invalid keyPath: Value at ["+e.slice(0,n).map(vt)+"] does not have a .set() method and cannot be updated: "+t);var a=e[n],c=o?qe:t.get(a,qe),f=Dt(c,e,n+1,r,i);return f===c?t:f===qe?t.remove(a):(o?wt():t).set(a,f)}function zt(t){return t-=t>>1&1431655765,t=(858993459&t)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,127&(t+=t>>16)}function Tt(t,e,n,r){var o=r?t:i(t);return o[e]=n,o}function Rt(t,e,n,r){var i=t.length+1;if(r&&e+1===i)return t[e]=n,t;for(var o=new Array(i),u=0,s=0;s<i;s++)s===e?(o[s]=n,u=-1):o[s]=t[s+u];return o}function Ct(t,e,n){var r=t.length-1;if(n&&e===r)return t.pop(),t;for(var i=new Array(r),o=0,u=0;u<r;u++)u===e&&(o=1),i[u]=t[u+o];return i}function Nt(t){return!(!t||!t[zn])}function Mt(t,e){function n(t,e,n){return 0===e?r(t,n):i(t,e,n)}function r(t,n){var r=n===s?a&&a.array:t&&t.array,i=n>o?0:o-n,c=u-n;return c>Oe&&(c=Oe),function(){if(i===c)return Nn;var t=e?--c:i++;return r&&r[t]}}function i(t,r,i){var s,a=t&&t.array,c=i>o?0:o-i>>r,f=1+(u-i>>r);return f>Oe&&(f=Oe),function(){for(;;){if(s){var t=s();if(t!==Nn)return t;s=null}if(c===f)return Nn;var o=e?--f:c++;s=n(a&&a[o],r-Ie,i+(o<<r))}}}var o=t._origin,u=t._capacity,s=Ht(u),a=t._tail;return n(t._root,t._level,0)}function Bt(t,e,n,r,i,o,u){var s=Object.create(Tn);return s.size=e-t,s._origin=t,s._capacity=e,s._level=n,s._root=r,s._tail=i,s.__ownerID=o,s.__hash=u,s.__altered=!1,s}function $t(){return Cn||(Cn=Bt(0,0,Ie))}function Ut(t,n,r){if((n=u(t,n))!==n)return t;if(n>=t.size||n<0)return t.withMutations(function(t){n<0?Wt(t,n).set(0,r):Wt(t,0,n+1).set(n,r)});n+=t._origin;var i=t._tail,o=t._root,s=e(je);return n>=Ht(t._capacity)?i=Pt(i,t.__ownerID,0,n,r,s):o=Pt(o,t.__ownerID,t._level,n,r,s),s.value?t.__ownerID?(t._root=o,t._tail=i,t.__hash=void 0,t.__altered=!0,t):Bt(t._origin,t._capacity,t._level,o,i):t}function Pt(t,e,r,i,o,u){var s=i>>>r&xe,a=t&&s<t.array.length;if(!a&&void 0===o)return t;var c;if(r>0){var f=t&&t.array[s],h=Pt(f,e,r-Ie,i,o,u);return h===f?t:(c=Ft(t,e),c.array[s]=h,c)}return a&&t.array[s]===o?t:(n(u),c=Ft(t,e),void 0===o&&s===c.array.length-1?c.array.pop():c.array[s]=o,c)}function Ft(t,e){return e&&t&&e===t.ownerID?t:new Rn(t?t.array.slice():[],e)}function Kt(t,e){if(e>=Ht(t._capacity))return t._tail;if(e<1<<t._level+Ie){for(var n=t._root,r=t._level;n&&r>0;)n=n.array[e>>>r&xe],r-=Ie;return n}}function Wt(t,e,n){void 0!==e&&(e|=0),void 0!==n&&(n|=0);var i=t.__ownerID||new r,o=t._origin,u=t._capacity,s=o+e,a=void 0===n?u:n<0?u+n:o+n;if(s===o&&a===u)return t;if(s>=a)return t.clear();for(var c=t._level,f=t._root,h=0;s+h<0;)f=new Rn(f&&f.array.length?[void 0,f]:[],i),c+=Ie,h+=1<<c;h&&(s+=h,o+=h,a+=h,u+=h);for(var l=Ht(u),p=Ht(a);p>=1<<c+Ie;)f=new Rn(f&&f.array.length?[f]:[],i),c+=Ie;var d=t._tail,v=p<l?Kt(t,a-1):p>l?new Rn([],i):d;if(d&&p>l&&s<u&&d.array.length){f=Ft(f,i);for(var _=f,y=c;y>Ie;y-=Ie){var g=l>>>y&xe;_=_.array[g]=Ft(_.array[g],i)}_.array[l>>>Ie&xe]=d}if(a<u&&(v=v&&v.removeAfter(i,0,a)),s>=p)s-=p,a-=p,c=Ie,f=null,v=v&&v.removeBefore(i,0,s);else if(s>o||p<l){for(h=0;f;){var m=s>>>c&xe;if(m!==p>>>c&xe)break;m&&(h+=(1<<c)*m),c-=Ie,f=f.array[m]}f&&s>o&&(f=f.removeBefore(i,c,s-h)),f&&p<l&&(f=f.removeAfter(i,c,p-h)),h&&(s-=h,a-=h)}return t.__ownerID?(t.size=a-s,t._origin=s,t._capacity=a,t._level=c,t._root=f,t._tail=v,t.__hash=void 0,t.__altered=!0,t):Bt(s,a,c,f,v)}function Jt(t,e,n){for(var r=[],i=0,o=0;o<n.length;o++){var u=n[o],s=Me(u);s.size>i&&(i=s.size),p(u)||(s=s.map(function(t){return T(t)})),r.push(s)}return i>t.size&&(t=t.setSize(i)),Lt(t,e,r)}function Ht(t){return t<Oe?0:t-1>>>Ie<<Ie}function Vt(t){return _t(t)&&y(t)}function Xt(t,e,n,r){var i=Object.create(Mn.prototype);return i.size=t?t.size:0,i._map=t,i._list=e,i.__ownerID=n,i.__hash=r,i}function Gt(){return Bn||(Bn=Xt(wt(),$t()))}function Qt(t,e,n){var r,i,o=t._map,u=t._list,s=o.get(e),a=void 0!==s;if(n===qe){if(!a)return t;u.size>=Oe&&u.size>=2*o.size?(i=u.filter(function(t,e){return void 0!==t&&s!==e}),r=i.toKeyedSeq().map(function(t){return t[0]}).flip().toMap(),t.__ownerID&&(r.__ownerID=i.__ownerID=t.__ownerID)):(r=o.remove(e),i=s===u.size-1?u.pop():u.set(s,void 0))}else if(a){if(n===u.get(s)[1])return t;r=o,i=u.set(s,[e,n])}else r=o.set(e,u.size),i=u.set(u.size,[e,n]);return t.__ownerID?(t.size=r.size,t._map=r,t._list=i,t.__hash=void 0,t):Xt(r,i)}function Yt(t){return!(!t||!t[Un])}function Zt(t,e,n,r){var i=Object.create(Pn);return i.size=t,i._head=e,i.__ownerID=n,i.__hash=r,i.__altered=!1,i}function te(){return Fn||(Fn=Zt(0))}function ee(t,e){if(t===e)return!0;if(!p(e)||void 0!==t.size&&void 0!==e.size&&t.size!==e.size||void 0!==t.__hash&&void 0!==e.__hash&&t.__hash!==e.__hash||d(t)!==d(e)||v(t)!==v(e)||y(t)!==y(e))return!1;if(0===t.size&&0===e.size)return!0;var n=!_(t);if(y(t)){var r=t.entries();return e.every(function(t,e){var i=r.next().value;return i&&z(i[1],t)&&(n||z(i[0],e))})&&r.next().done}var i=!1;if(void 0===t.size)if(void 0===e.size)"function"==typeof t.cacheResult&&t.cacheResult();else{i=!0;var o=t;t=e,e=o}var u=!0,s=e.__iterate(function(e,r){if(n?!t.has(e):i?!z(e,t.get(r,qe)):!z(t.get(r,qe),e))return u=!1,!1});return u&&t.size===s}function ne(t,e){var n=function(n){t.prototype[n]=e[n]};return Object.keys(e).forEach(n),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(n),t}function re(t){return!(!t||!t[Wn])}function ie(t,e){return t.__ownerID?(t.size=e.size,t._map=e,t):e===t._map?t:0===e.size?t.__empty():t.__make(e)}function oe(t,e){var n=Object.create(Jn);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function ue(){return Hn||(Hn=oe(wt()))}function se(t,e,n,r,i,o){return dt(t.size),t.__iterate(function(t,o,u){i?(i=!1,n=t):n=e.call(r,n,t,o,u)},o),n}function ae(t,e){return e}function ce(t,e){return[e,t]}function fe(t){return t&&"function"==typeof t.toJS?t.toJS():t}function he(t){return function(){return!t.apply(this,arguments)}}function le(t){return function(){return-t.apply(this,arguments)}}function pe(){return i(arguments)}function de(t,e){return t<e?1:t>e?-1:0}function ve(t){if(t.size===1/0)return 0;var e=y(t),n=d(t),r=e?1:0;return _e(t.__iterate(n?e?function(t,e){r=31*r+ye(B(t),B(e))|0}:function(t,e){r=r+ye(B(t),B(e))|0}:e?function(t){r=31*r+B(t)|0}:function(t){r=r+B(t)|0}),r)}function _e(t,e){return e=on(e,3432918353),e=on(e<<15|e>>>-15,461845907),e=on(e<<13|e>>>-13,5),e=(e+3864292196|0)^t,e=on(e^e>>>16,2246822507),e=on(e^e>>>13,3266489909),e=M(e^e>>>16)}function ye(t,e){return t^e+2654435769+(t<<6)+(t>>2)|0}function ge(t){return re(t)&&y(t)}function me(t,e){var n=Object.create(tr);return n.size=t?t.size:0,n._map=t,n.__ownerID=e,n}function we(){return er||(er=me(Gt()))}function be(t,e,n){var r=Object.create(Object.getPrototypeOf(t));return r._values=e,r.__ownerID=n,r}function Se(t){return t._name||t.constructor.name||"Record"}function ke(t){return A(t._keys.map(function(e){return[e,t.get(e)]}))}function Ee(t,e){try{Object.defineProperty(t,e,{get:function(){return this.get(e)},set:function(t){this.set(e,t)}})}catch(t){}}var Ie=5,Oe=1<<Ie,xe=Oe-1,qe={},Ae={value:!1},je={value:!1},Le="@@__IMMUTABLE_ITERABLE__@@",De="@@__IMMUTABLE_KEYED__@@",ze="@@__IMMUTABLE_INDEXED__@@",Te="@@__IMMUTABLE_ORDERED__@@",Re="@@__IMMUTABLE_RECORD__@@",Ce=function(t){return p(t)?t:He(t)},Ne=function(t){function e(t){return d(t)?t:Ve(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ce),Me=function(t){function e(t){return v(t)?t:Xe(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ce),Be=function(t){function e(t){return p(t)&&!_(t)?t:Ge(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Ce);Ce.Keyed=Ne,Ce.Indexed=Me,Ce.Set=Be;var $e=0,Ue=1,Pe=2,Fe="function"==typeof Symbol&&Symbol.iterator,Ke="@@iterator",We=Fe||Ke,Je=function(t){this.next=t};Je.prototype.toString=function(){return"[Iterator]"},Je.KEYS=$e,Je.VALUES=Ue,Je.ENTRIES=Pe,Je.prototype.inspect=Je.prototype.toSource=function(){return this.toString()},Je.prototype[We]=function(){return this};var He=function(t){function e(t){return null===t||void 0===t?q():p(t)||g(t)?t.toSeq():L(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(t,e){var n=this,r=this._cache;if(r){for(var i=r.length,o=0;o!==i;){var u=r[e?i-++o:o++];if(!1===t(u[1],u[0],n))break}return o}return this.__iterateUncached(t,e)},e.prototype.__iterator=function(t,e){var n=this._cache;if(n){var r=n.length,i=0;return new Je(function(){if(i===r)return b();var o=n[e?r-++i:i++];return w(t,o[0],o[1])})}return this.__iteratorUncached(t,e)},e}(Ce),Ve=function(t){function e(t){return null===t||void 0===t?q().toKeyedSeq():p(t)?d(t)?t.toSeq():t.fromEntrySeq():g(t)?t.toSeq():A(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e}(He),Xe=function(t){function e(t){return null===t||void 0===t?q():p(t)?d(t)?t.entrySeq():t.toIndexedSeq():g(t)?t.toSeq().entrySeq():j(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e}(He),Ge=function(t){function e(t){return(p(t)&&!_(t)?t:Xe(t)).toSetSeq()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e}(He);He.isSeq=x,He.Keyed=Ve,He.Set=Ge,He.Indexed=Xe;var Qe="@@__IMMUTABLE_SEQ__@@";He.prototype[Qe]=!0;var Ye=function(t){function e(t){this._array=t,this.size=t.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this.has(t)?this._array[u(this,t)]:e},e.prototype.__iterate=function(t,e){for(var n=this,r=this._array,i=r.length,o=0;o!==i;){var u=e?i-++o:o++;if(!1===t(r[u],u,n))break}return o},e.prototype.__iterator=function(t,e){var n=this._array,r=n.length,i=0;return new Je(function(){if(i===r)return b();var o=e?r-++i:i++;return w(t,o,n[o])})},e}(Xe),Ze=function(t){function e(t){var e=Object.keys(t);this._object=t,this._keys=e,this.size=e.length}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return void 0===e||this.has(t)?this._object[t]:e},e.prototype.has=function(t){return this._object.hasOwnProperty(t)},e.prototype.__iterate=function(t,e){for(var n=this,r=this._object,i=this._keys,o=i.length,u=0;u!==o;){var s=i[e?o-++u:u++];if(!1===t(r[s],s,n))break}return u},e.prototype.__iterator=function(t,e){var n=this._object,r=this._keys,i=r.length,o=0;return new Je(function(){if(o===i)return b();var u=r[e?i-++o:o++];return w(t,u,n[u])})},e}(Ve);Ze.prototype[Te]=!0;var tn,en,nn=function(t){function e(t){this._collection=t,this.size=t.length||t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){var n=this;if(e)return this.cacheResult().__iterate(t,e);var r=this._collection,i=E(r),o=0;if(k(i))for(var u;!(u=i.next()).done&&!1!==t(u.value,o++,n););return o},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._collection,r=E(n);if(!k(r))return new Je(b);var i=0;return new Je(function(){var e=r.next();return e.done?e:w(t,i++,e.value)})},e}(Xe),rn=function(t){function e(t){this._iterator=t,this._iteratorCache=[]}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(t,e){var n=this;if(e)return this.cacheResult().__iterate(t,e);for(var r=this._iterator,i=this._iteratorCache,o=0;o<i.length;)if(!1===t(i[o],o++,n))return o;for(var u;!(u=r.next()).done;){var s=u.value;if(i[o]=s,!1===t(s,o++,n))break}return o},e.prototype.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var n=this._iterator,r=this._iteratorCache,i=0;return new Je(function(){if(i>=r.length){var e=n.next();if(e.done)return e;r[i]=e.value}return w(t,i,r[i++])})},e}(Xe),on="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(t,e){t|=0,e|=0;var n=65535&t,r=65535&e;return n*r+((t>>>16)*r+n*(e>>>16)<<16>>>0)|0},un=Object.isExtensible,sn=function(){try{return Object.defineProperty({},"@",{}),!0}catch(t){return!1}}(),an="function"==typeof WeakMap;an&&(en=new WeakMap);var cn=0,fn="__immutablehash__";"function"==typeof Symbol&&(fn=Symbol(fn));var hn=16,ln=255,pn=0,dn={},vn=function(t){function e(t,e){this._iter=t,this._useKeys=e,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.get=function(t,e){return this._iter.get(t,e)},e.prototype.has=function(t){return this._iter.has(t)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var t=this,e=J(this,!0);return this._useKeys||(e.valueSeq=function(){return t._iter.toSeq().reverse()}),e},e.prototype.map=function(t,e){var n=this,r=W(this,t,e);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().map(t,e)}),r},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e,r){return t(e,r,n)},e)},e.prototype.__iterator=function(t,e){return this._iter.__iterator(t,e)},e}(Ve);vn.prototype[Te]=!0;var _n=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.includes=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this,r=0;return e&&o(this),this._iter.__iterate(function(i){return t(i,e?n.size-++r:r++,n)},e)},e.prototype.__iterator=function(t,e){var n=this,r=this._iter.__iterator(Ue,e),i=0;return e&&o(this),new Je(function(){var o=r.next();return o.done?o:w(t,e?n.size-++i:i++,o.value,o)})},e}(Xe),yn=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.has=function(t){return this._iter.includes(t)},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){return t(e,e,n)},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(Ue,e);return new Je(function(){var e=n.next();return e.done?e:w(t,e.value,e.value,e)})},e}(Ge),gn=function(t){function e(t){this._iter=t,this.size=t.size}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(t,e){var n=this;return this._iter.__iterate(function(e){if(e){at(e);var r=p(e);return t(r?e.get(1):e[1],r?e.get(0):e[0],n)}},e)},e.prototype.__iterator=function(t,e){var n=this._iter.__iterator(Ue,e);return new Je(function(){for(;;){var e=n.next();if(e.done)return e;var r=e.value;if(r){at(r);var i=p(r);return w(t,i?r.get(0):r[0],i?r.get(1):r[1],e)}}})},e}(Ve);_n.prototype.cacheResult=vn.prototype.cacheResult=yn.prototype.cacheResult=gn.prototype.cacheResult=ht;var mn=function(t){function e(e){return null===e||void 0===e?wt():_t(e)&&!y(e)?e:wt().withMutations(function(n){var r=t(e);dt(r.size),r.forEach(function(t,e){return n.set(e,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return wt().withMutations(function(e){for(var n=0;n<t.length;n+=2){if(n+1>=t.length)throw new Error("Missing value for key: "+t[n]);e.set(t[n],t[n+1])}})},e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(t,e){return this._root?this._root.get(0,void 0,t,e):e},e.prototype.set=function(t,e){return bt(this,t,e)},e.prototype.setIn=function(t,e){return this.updateIn(t,qe,function(){return e})},e.prototype.remove=function(t){return bt(this,t,qe)},e.prototype.deleteIn=function(t){if(t=[].concat(pt(t)),t.length){var e=t.pop();return this.updateIn(t,function(t){return t&&t.remove(e)})}},e.prototype.deleteAll=function(t){var e=Ce(t);return 0===e.size?this:this.withMutations(function(t){e.forEach(function(e){return t.remove(e)})})},e.prototype.update=function(t,e,n){return 1===arguments.length?t(this):this.updateIn([t],e,n)},e.prototype.updateIn=function(t,e,n){n||(n=e,e=void 0);var r=Dt(this,pt(t),0,e,n);return r===qe?e:r},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):wt()},e.prototype.merge=function(){return qt(this,void 0,arguments)},e.prototype.mergeWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return qt(this,t,e)},e.prototype.mergeIn=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this.updateIn(t,wt(),function(t){return"function"==typeof t.merge?t.merge.apply(t,e):e[e.length-1]})},e.prototype.mergeDeep=function(){return qt(this,At,arguments)},e.prototype.mergeDeepWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return qt(this,jt(t),e)},e.prototype.mergeDeepIn=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return this.updateIn(t,wt(),function(t){return"function"==typeof t.mergeDeep?t.mergeDeep.apply(t,e):e[e.length-1]})},e.prototype.sort=function(t){return Mn(rt(this,t))},e.prototype.sortBy=function(t,e){return Mn(rt(this,e,t))},e.prototype.withMutations=function(t){var e=this.asMutable();return t(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this},e.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new r)},e.prototype.asImmutable=function(){return this.__ensureOwner()},e.prototype.wasAltered=function(){return this.__altered},e.prototype.__iterator=function(t,e){return new qn(this,t,e)},e.prototype.__iterate=function(t,e){var n=this,r=0;return this._root&&this._root.iterate(function(e){return r++,t(e[1],e[0],n)},e),r},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?mt(this.size,this._root,t,this.__hash):0===this.size?wt():(this.__ownerID=t,this.__altered=!1,this)},e}(Ne);mn.isMap=_t;var wn="@@__IMMUTABLE_MAP__@@",bn=mn.prototype;bn[wn]=!0,bn.delete=bn.remove,bn.removeIn=bn.deleteIn,bn.removeAll=bn.deleteAll;var Sn=function(t,e){this.ownerID=t,this.entries=e};Sn.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(z(n,i[o][0]))return i[o][1];return r},Sn.prototype.update=function(t,e,r,o,u,s,a){for(var c=u===qe,f=this.entries,h=0,l=f.length;h<l&&!z(o,f[h][0]);h++);var p=h<l;if(p?f[h][1]===u:c)return this;if(n(a),(c||!p)&&n(s),!c||1!==f.length){if(!p&&!c&&f.length>=An)return It(t,f,o,u);var d=t&&t===this.ownerID,v=d?f:i(f);return p?c?h===l-1?v.pop():v[h]=v.pop():v[h]=[o,u]:v.push([o,u]),d?(this.entries=v,this):new Sn(t,v)}};var kn=function(t,e,n){this.ownerID=t,this.bitmap=e,this.nodes=n};kn.prototype.get=function(t,e,n,r){void 0===e&&(e=B(n));var i=1<<((0===t?e:e>>>t)&xe),o=this.bitmap;return 0==(o&i)?r:this.nodes[zt(o&i-1)].get(t+Ie,e,n,r)},kn.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=B(r));var s=(0===e?n:n>>>e)&xe,a=1<<s,c=this.bitmap,f=0!=(c&a);if(!f&&i===qe)return this;var h=zt(c&a-1),l=this.nodes,p=f?l[h]:void 0,d=St(p,t,e+Ie,n,r,i,o,u);if(d===p)return this;if(!f&&d&&l.length>=jn)return xt(t,l,c,s,d);if(f&&!d&&2===l.length&&kt(l[1^h]))return l[1^h];if(f&&d&&1===l.length&&kt(d))return d;var v=t&&t===this.ownerID,_=f?d?c:c^a:c|a,y=f?d?Tt(l,h,d,v):Ct(l,h,v):Rt(l,h,d,v);return v?(this.bitmap=_,this.nodes=y,this):new kn(t,_,y)};var En=function(t,e,n){this.ownerID=t,this.count=e,this.nodes=n};En.prototype.get=function(t,e,n,r){void 0===e&&(e=B(n));var i=(0===t?e:e>>>t)&xe,o=this.nodes[i];return o?o.get(t+Ie,e,n,r):r},En.prototype.update=function(t,e,n,r,i,o,u){void 0===n&&(n=B(r));var s=(0===e?n:n>>>e)&xe,a=i===qe,c=this.nodes,f=c[s];if(a&&!f)return this;var h=St(f,t,e+Ie,n,r,i,o,u);if(h===f)return this;var l=this.count;if(f){if(!h&&--l<Ln)return Ot(t,c,l,s)}else l++;var p=t&&t===this.ownerID,d=Tt(c,s,h,p);return p?(this.count=l,this.nodes=d,this):new En(t,l,d)};var In=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entries=n};In.prototype.get=function(t,e,n,r){for(var i=this.entries,o=0,u=i.length;o<u;o++)if(z(n,i[o][0]))return i[o][1];return r},In.prototype.update=function(t,e,r,o,u,s,a){void 0===r&&(r=B(o));var c=u===qe;if(r!==this.keyHash)return c?this:(n(a),n(s),Et(this,t,e,r,[o,u]));for(var f=this.entries,h=0,l=f.length;h<l&&!z(o,f[h][0]);h++);var p=h<l;if(p?f[h][1]===u:c)return this;if(n(a),(c||!p)&&n(s),c&&2===l)return new On(t,this.keyHash,f[1^h]);var d=t&&t===this.ownerID,v=d?f:i(f);return p?c?h===l-1?v.pop():v[h]=v.pop():v[h]=[o,u]:v.push([o,u]),d?(this.entries=v,this):new In(t,this.keyHash,v)};var On=function(t,e,n){this.ownerID=t,this.keyHash=e,this.entry=n};On.prototype.get=function(t,e,n,r){return z(n,this.entry[0])?this.entry[1]:r},On.prototype.update=function(t,e,r,i,o,u,s){var a=o===qe,c=z(i,this.entry[0]);return(c?o===this.entry[1]:a)?this:(n(s),a?void n(u):c?t&&t===this.ownerID?(this.entry[1]=o,this):new On(t,this.keyHash,[i,o]):(n(u),Et(this,t,e,B(i),[i,o])))},Sn.prototype.iterate=In.prototype.iterate=function(t,e){for(var n=this.entries,r=0,i=n.length-1;r<=i;r++)if(!1===t(n[e?i-r:r]))return!1},kn.prototype.iterate=En.prototype.iterate=function(t,e){for(var n=this.nodes,r=0,i=n.length-1;r<=i;r++){var o=n[e?i-r:r];if(o&&!1===o.iterate(t,e))return!1}},On.prototype.iterate=function(t){return t(this.entry)};var xn,qn=function(t){function e(t,e,n){this._type=e,this._reverse=n,this._stack=t._root&&gt(t._root)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var t=this,e=this._type,n=this._stack;n;){var r=n.node,i=n.index++,o=void 0;if(r.entry){if(0===i)return yt(e,r.entry)}else if(r.entries){if(o=r.entries.length-1,i<=o)return yt(e,r.entries[t._reverse?o-i:i])}else if(o=r.nodes.length-1,i<=o){var u=r.nodes[t._reverse?o-i:i];if(u){if(u.entry)return yt(e,u.entry);n=t._stack=gt(u,n)}continue}n=t._stack=t._stack.__prev}return b()},e}(Je),An=Oe/4,jn=Oe/2,Ln=Oe/4,Dn=function(t){function e(e){var n=$t();if(null===e||void 0===e)return n;if(Nt(e))return e;var r=t(e),i=r.size;return 0===i?n:(dt(i),i>0&&i<Oe?Bt(0,i,Ie,null,new Rn(r.toArray())):n.withMutations(function(t){t.setSize(i),r.forEach(function(e,n){return t.set(n,e)})}))}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(t,e){if((t=u(this,t))>=0&&t<this.size){t+=this._origin;var n=Kt(this,t);return n&&n.array[t&xe]}return e},e.prototype.set=function(t,e){return Ut(this,t,e)},e.prototype.remove=function(t){return this.has(t)?0===t?this.shift():t===this.size-1?this.pop():this.splice(t,1):this},e.prototype.insert=function(t,e){return this.splice(t,0,e)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ie,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):$t()},e.prototype.push=function(){var t=arguments,e=this.size;return this.withMutations(function(n){Wt(n,0,e+t.length);for(var r=0;r<t.length;r++)n.set(e+r,t[r])})},e.prototype.pop=function(){return Wt(this,0,-1)},e.prototype.unshift=function(){var t=arguments;return this.withMutations(function(e){Wt(e,-t.length);for(var n=0;n<t.length;n++)e.set(n,t[n])})},e.prototype.shift=function(){return Wt(this,1)},e.prototype.merge=function(){return Jt(this,void 0,arguments)},e.prototype.mergeWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Jt(this,t,e)},e.prototype.mergeDeep=function(){return Jt(this,At,arguments)},e.prototype.mergeDeepWith=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];return Jt(this,jt(t),e)},e.prototype.setSize=function(t){return Wt(this,0,t)},e.prototype.slice=function(t,e){var n=this.size;return a(t,e,n)?this:Wt(this,c(t,n),f(e,n))},e.prototype.__iterator=function(t,e){var n=e?this.size:0,r=Mt(this,e);return new Je(function(){var i=r();return i===Nn?b():w(t,e?--n:n++,i)})},e.prototype.__iterate=function(t,e){for(var n,r=this,i=e?this.size:0,o=Mt(this,e);(n=o())!==Nn&&!1!==t(n,e?--i:i++,r););return i},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Bt(this._origin,this._capacity,this._level,this._root,this._tail,t,this.__hash):0===this.size?$t():(this.__ownerID=t,this)},e}(Me);Dn.isList=Nt;var zn="@@__IMMUTABLE_LIST__@@",Tn=Dn.prototype;Tn[zn]=!0,Tn.delete=Tn.remove,Tn.setIn=bn.setIn,Tn.deleteIn=Tn.removeIn=bn.removeIn,Tn.update=bn.update,Tn.updateIn=bn.updateIn,Tn.mergeIn=bn.mergeIn,Tn.mergeDeepIn=bn.mergeDeepIn,Tn.withMutations=bn.withMutations,Tn.asMutable=bn.asMutable,Tn.asImmutable=bn.asImmutable,Tn.wasAltered=bn.wasAltered;var Rn=function(t,e){this.array=t,this.ownerID=e};Rn.prototype.removeBefore=function(t,e,n){if(n===e?1<<e:0===this.array.length)return this;var r=n>>>e&xe;if(r>=this.array.length)return new Rn([],t);var i,o=0===r;if(e>0){var u=this.array[r];if((i=u&&u.removeBefore(t,e-Ie,n))===u&&o)return this}if(o&&!i)return this;var s=Ft(this,t);if(!o)for(var a=0;a<r;a++)s.array[a]=void 0;return i&&(s.array[r]=i),s},Rn.prototype.removeAfter=function(t,e,n){if(n===(e?1<<e:0)||0===this.array.length)return this;var r=n-1>>>e&xe;if(r>=this.array.length)return this;var i;if(e>0){var o=this.array[r];if((i=o&&o.removeAfter(t,e-Ie,n))===o&&r===this.array.length-1)return this}var u=Ft(this,t);return u.array.splice(r+1),i&&(u.array[r]=i),u};var Cn,Nn={},Mn=function(t){function e(t){return null===t||void 0===t?Gt():Vt(t)?t:Gt().withMutations(function(e){var n=Ne(t);dt(n.size),n.forEach(function(t,n){return e.set(n,t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(t,e){var n=this._map.get(t);return void 0!==n?this._list.get(n)[1]:e},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Gt()},e.prototype.set=function(t,e){return Qt(this,t,e)},e.prototype.remove=function(t){return Qt(this,t,qe)},e.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._list.__iterate(function(e){return e&&t(e[1],e[0],n)},e)},e.prototype.__iterator=function(t,e){return this._list.fromEntrySeq().__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t),n=this._list.__ensureOwner(t);return t?Xt(e,n,t,this.__hash):0===this.size?Gt():(this.__ownerID=t,this._map=e,this._list=n,this)},e}(mn);Mn.isOrderedMap=Vt,Mn.prototype[Te]=!0,Mn.prototype.delete=Mn.prototype.remove;var Bn,$n=function(t){function e(t){return null===t||void 0===t?te():Yt(t)?t:te().pushAll(t)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(t,e){var n=this._head;for(t=u(this,t);n&&t--;)n=n.next;return n?n.value:e},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var t=arguments;if(0===arguments.length)return this;for(var e=this.size+arguments.length,n=this._head,r=arguments.length-1;r>=0;r--)n={value:t[r],next:n};return this.__ownerID?(this.size=e,this._head=n,this.__hash=void 0,this.__altered=!0,this):Zt(e,n)},e.prototype.pushAll=function(e){if(e=t(e),0===e.size)return this;if(0===this.size&&Yt(e))return e;dt(e.size);var n=this.size,r=this._head;return e.__iterate(function(t){n++,r={value:t,next:r}},!0),this.__ownerID?(this.size=n,this._head=r,this.__hash=void 0,this.__altered=!0,this):Zt(n,r)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):te()},e.prototype.slice=function(e,n){if(a(e,n,this.size))return this;var r=c(e,this.size);if(f(n,this.size)!==this.size)return t.prototype.slice.call(this,e,n);for(var i=this.size-r,o=this._head;r--;)o=o.next;return this.__ownerID?(this.size=i,this._head=o,this.__hash=void 0,this.__altered=!0,this):Zt(i,o)},e.prototype.__ensureOwner=function(t){return t===this.__ownerID?this:t?Zt(this.size,this._head,t,this.__hash):0===this.size?te():(this.__ownerID=t,this.__altered=!1,this)},e.prototype.__iterate=function(t,e){var n=this;if(e)return new Ye(this.toArray()).__iterate(function(e,r){return t(e,r,n)},e);for(var r=0,i=this._head;i&&!1!==t(i.value,r++,n);)i=i.next;return r},e.prototype.__iterator=function(t,e){if(e)return new Ye(this.toArray()).__iterator(t,e);var n=0,r=this._head;return new Je(function(){if(r){var e=r.value;return r=r.next,w(t,n++,e)}return b()})},e}(Me);$n.isStack=Yt;var Un="@@__IMMUTABLE_STACK__@@",Pn=$n.prototype;Pn[Un]=!0,Pn.withMutations=bn.withMutations,Pn.asMutable=bn.asMutable,Pn.asImmutable=bn.asImmutable,Pn.wasAltered=bn.wasAltered,Pn.shift=Pn.pop,Pn.unshift=Pn.push,Pn.unshiftAll=Pn.pushAll;var Fn,Kn=function(t){function e(e){return null===e||void 0===e?ue():re(e)&&!y(e)?e:ue().withMutations(function(n){var r=t(e);dt(r.size),r.forEach(function(t){return n.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(Ne(t).keySeq())},e.intersect=function(t){return t=Ce(t).toArray(),t.length?Jn.intersect.apply(e(t.pop()),t):ue()},e.union=function(t){return t=Ce(t).toArray(),t.length?Jn.union.apply(e(t.pop()),t):ue()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(t){return this._map.has(t)},e.prototype.add=function(t){return ie(this,this._map.set(t,!0))},e.prototype.remove=function(t){return ie(this,this._map.remove(t))},e.prototype.clear=function(){return ie(this,this._map.clear())},e.prototype.union=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return e=e.filter(function(t){return 0!==t.size}),0===e.length?this:0!==this.size||this.__ownerID||1!==e.length?this.withMutations(function(n){for(var r=0;r<e.length;r++)t(e[r]).forEach(function(t){return n.add(t)})}):this.constructor(e[0])},e.prototype.intersect=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];if(0===e.length)return this;e=e.map(function(e){return t(e)});var r=[];return this.forEach(function(t){e.every(function(e){return e.includes(t)})||r.push(t)}),this.withMutations(function(t){r.forEach(function(e){t.remove(e)})})},e.prototype.subtract=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(0===t.length)return this;var n=[];return this.forEach(function(e){t.some(function(t){return t.includes(e)})&&n.push(e)}),this.withMutations(function(t){n.forEach(function(e){t.remove(e)})})},e.prototype.merge=function(){return this.union.apply(this,arguments)},e.prototype.mergeWith=function(){for(var t=[],e=arguments.length-1;e-- >0;)t[e]=arguments[e+1];return this.union.apply(this,t)},e.prototype.sort=function(t){return Zn(rt(this,t))},e.prototype.sortBy=function(t,e){return Zn(rt(this,e,t))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(t,e){var n=this;return this._map.__iterate(function(e,r){return t(r,r,n)},e)},e.prototype.__iterator=function(t,e){return this._map.map(function(t,e){return e}).__iterator(t,e)},e.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._map.__ensureOwner(t);return t?this.__make(e,t):0===this.size?ue():(this.__ownerID=t,this._map=e,this)},e}(Be);Kn.isSet=re;var Wn="@@__IMMUTABLE_SET__@@",Jn=Kn.prototype;Jn[Wn]=!0,Jn.delete=Jn.remove,Jn.mergeDeep=Jn.merge,Jn.mergeDeepWith=Jn.mergeWith,Jn.withMutations=bn.withMutations,Jn.asMutable=bn.asMutable,Jn.asImmutable=bn.asImmutable,Jn.__empty=ue,Jn.__make=oe;var Hn,Vn,Xn=function(t){function e(t,n,r){if(!(this instanceof e))return new e(t,n,r);if(t=t||0,void 0===n&&(n=1/0),r=void 0===r?1:Math.abs(r),n<t&&(r=-r),this._start=t,this._end=n,this._step=r,0===(this.size=Math.max(0,Math.ceil((n-t)/r-1)+1))){if(Vn)return Vn;Vn=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(1!==this._step?" by "+this._step:"")+" ]"},e.prototype.get=function(t,e){return this.has(t)?this._start+u(this,t)*this._step:e},e.prototype.includes=function(t){var e=(t-this._start)/this._step;return e>=0&&e<this.size&&e===Math.floor(e)},e.prototype.slice=function(t,n){return a(t,n,this.size)?this:(t=c(t,this.size),n=f(n,this.size),n<=t?new e(0,0):new e(this.get(t,this._end),this.get(n,this._end),this._step))},e.prototype.indexOf=function(t){var e=t-this._start;if(e%this._step==0){var n=e/this._step;if(n>=0&&n<this.size)return n}return-1},e.prototype.lastIndexOf=function(t){return this.indexOf(t)},e.prototype.__iterate=function(t,e){for(var n=this,r=this.size,i=this._step,o=e?this._start+(r-1)*i:this._start,u=0;u!==r&&!1!==t(o,e?r-++u:u++,n);)o+=e?-i:i;return u},e.prototype.__iterator=function(t,e){var n=this.size,r=this._step,i=e?this._start+(n-1)*r:this._start,o=0;return new Je(function(){if(o===n)return b();var u=i;return i+=e?-r:r,w(t,e?n-++o:o++,u)})},e.prototype.equals=function(t){return t instanceof e?this._start===t._start&&this._end===t._end&&this._step===t._step:ee(this,t)},e}(Xe);Ce.isIterable=p,Ce.isKeyed=d,Ce.isIndexed=v,Ce.isAssociative=_,Ce.isOrdered=y,Ce.Iterator=Je,ne(Ce,{toArray:function(){dt(this.size);var t=new Array(this.size||0);return this.valueSeq().__iterate(function(e,n){t[n]=e}),t},toIndexedSeq:function(){return new _n(this)},toJS:function(){return this.toSeq().map(fe).toJSON()},toKeyedSeq:function(){return new vn(this,!0)},toMap:function(){return mn(this.toKeyedSeq())},toObject:function(){dt(this.size);var t={};return this.__iterate(function(e,n){t[n]=e}),t},toOrderedMap:function(){return Mn(this.toKeyedSeq())},toOrderedSet:function(){return Zn(d(this)?this.valueSeq():this)},toSet:function(){return Kn(d(this)?this.valueSeq():this)},toSetSeq:function(){return new yn(this)},toSeq:function(){return v(this)?this.toIndexedSeq():d(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return $n(d(this)?this.valueSeq():this)},toList:function(){return Dn(d(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(t,e){return 0===this.size?t+e:t+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+e},concat:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return st(this,Z(this,t))},includes:function(t){return this.some(function(e){return z(e,t)})},entries:function(){return this.__iterator(Pe)},every:function(t,e){dt(this.size);var n=!0;return this.__iterate(function(r,i,o){if(!t.call(e,r,i,o))return n=!1,!1}),n},filter:function(t,e){return st(this,H(this,t,e,!0))},find:function(t,e,n){var r=this.findEntry(t,e);return r?r[1]:n},forEach:function(t,e){return dt(this.size),this.__iterate(e?t.bind(e):t)},join:function(t){dt(this.size),t=void 0!==t?""+t:",";var e="",n=!0;return this.__iterate(function(r){n?n=!1:e+=t,e+=null!==r&&void 0!==r?r.toString():""}),e},keys:function(){return this.__iterator($e)},map:function(t,e){return st(this,W(this,t,e))},reduce:function(t,e,n){return se(this,t,e,n,arguments.length<2,!1)},reduceRight:function(t,e,n){return se(this,t,e,n,arguments.length<2,!0)},reverse:function(){return st(this,J(this,!0))},slice:function(t,e){return st(this,G(this,t,e,!0))},some:function(t,e){return!this.every(he(t),e)},sort:function(t){return st(this,rt(this,t))},values:function(){return this.__iterator(Ue)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(t,e){return o(t?this.toSeq().filter(t,e):this)},countBy:function(t,e){return V(this,t,e)},equals:function(t){return ee(this,t)},entrySeq:function(){var t=this;if(t._cache)return new Ye(t._cache);var e=t.toSeq().map(ce).toIndexedSeq();return e.fromEntrySeq=function(){return t.toSeq()},e.toJS=function(){return this.map(function(t){return[fe(t[0]),fe(t[1])]}).toJSON()},e},filterNot:function(t,e){return this.filter(he(t),e)},findEntry:function(t,e,n){var r=n;return this.__iterate(function(n,i,o){if(t.call(e,n,i,o))return r=[i,n],!1}),r},findKey:function(t,e){var n=this.findEntry(t,e);return n&&n[0]},findLast:function(t,e,n){return this.toKeyedSeq().reverse().find(t,e,n)},findLastEntry:function(t,e,n){return this.toKeyedSeq().reverse().findEntry(t,e,n)},findLastKey:function(t,e){return this.toKeyedSeq().reverse().findKey(t,e)},first:function(){return this.find(s)},flatMap:function(t,e){return st(this,et(this,t,e))},flatten:function(t){return st(this,tt(this,t,!0))},fromEntrySeq:function(){return new gn(this)},get:function(t,e){return this.find(function(e,n){return z(n,t)},void 0,e)},getIn:function(t,e){for(var n=this,r=pt(t),i=0;i!==r.length;){if(!n||!n.get)throw new TypeError("Invalid keyPath: Value at ["+r.slice(0,i).map(vt)+"] does not have a .get() method: "+n);if((n=n.get(r[i++],qe))===qe)return e}return n},groupBy:function(t,e){return X(this,t,e)},has:function(t){return this.get(t,qe)!==qe},hasIn:function(t){return this.getIn(t,qe)!==qe},isSubset:function(t){return t="function"==typeof t.includes?t:Ce(t),this.every(function(e){return t.includes(e)})},isSuperset:function(t){return t="function"==typeof t.isSubset?t:Ce(t),t.isSubset(this)},keyOf:function(t){return this.findKey(function(e){return z(e,t)})},keySeq:function(){return this.toSeq().map(ae).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},lastKeyOf:function(t){return this.toKeyedSeq().reverse().keyOf(t)},max:function(t){return it(this,t)},maxBy:function(t,e){return it(this,e,t)},min:function(t){return it(this,t?le(t):de)},minBy:function(t,e){return it(this,e?le(e):de,t)},rest:function(){return this.slice(1)},skip:function(t){return 0===t?this:this.slice(Math.max(0,t))},skipLast:function(t){return 0===t?this:this.slice(0,-Math.max(0,t))},skipWhile:function(t,e){return st(this,Y(this,t,e,!0))},skipUntil:function(t,e){return this.skipWhile(he(t),e)},sortBy:function(t,e){return st(this,rt(this,e,t))},take:function(t){return this.slice(0,Math.max(0,t))},takeLast:function(t){return this.slice(-Math.max(0,t))},takeWhile:function(t,e){return st(this,Q(this,t,e))},takeUntil:function(t,e){return this.takeWhile(he(t),e)},update:function(t){return t(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=ve(this))}});var Gn=Ce.prototype;Gn[Le]=!0,Gn[We]=Gn.values,Gn.toJSON=Gn.toArray,Gn.__toStringMapper=vt,Gn.inspect=Gn.toSource=function(){return this.toString()},Gn.chain=Gn.flatMap,Gn.contains=Gn.includes,ne(Ne,{flip:function(){return st(this,K(this))},mapEntries:function(t,e){var n=this,r=0;return st(this,this.toSeq().map(function(i,o){return t.call(e,[o,i],r++,n)}).fromEntrySeq())},mapKeys:function(t,e){var n=this;return st(this,this.toSeq().flip().map(function(r,i){return t.call(e,r,i,n)}).flip())}});var Qn=Ne.prototype;Qn[De]=!0,Qn[We]=Gn.entries,Qn.toJSON=Gn.toObject,Qn.__toStringMapper=function(t,e){return vt(e)+": "+vt(t)},ne(Me,{toKeyedSeq:function(){return new vn(this,!1)},filter:function(t,e){return st(this,H(this,t,e,!1))},findIndex:function(t,e){var n=this.findEntry(t,e);return n?n[0]:-1},indexOf:function(t){var e=this.keyOf(t);return void 0===e?-1:e},lastIndexOf:function(t){var e=this.lastKeyOf(t);return void 0===e?-1:e},reverse:function(){return st(this,J(this,!1))},slice:function(t,e){return st(this,G(this,t,e,!1))},splice:function(t,e){var n=arguments.length;if(e=Math.max(e||0,0),0===n||2===n&&!e)return this;t=c(t,t<0?this.count():this.size);var r=this.slice(0,t);return st(this,1===n?r:r.concat(i(arguments,2),this.slice(t+e)))},findLastIndex:function(t,e){var n=this.findLastEntry(t,e);return n?n[0]:-1},first:function(){return this.get(0)},flatten:function(t){return st(this,tt(this,t,!1))},get:function(t,e){return t=u(this,t),t<0||this.size===1/0||void 0!==this.size&&t>this.size?e:this.find(function(e,n){return n===t},void 0,e)},has:function(t){return(t=u(this,t))>=0&&(void 0!==this.size?this.size===1/0||t<this.size:-1!==this.indexOf(t))},interpose:function(t){return st(this,nt(this,t))},interleave:function(){var t=[this].concat(i(arguments)),e=ut(this.toSeq(),Xe.of,t),n=e.flatten(!0);return e.size&&(n.size=e.size*t.length),st(this,n)},keySeq:function(){return Xn(0,this.size)},last:function(){return this.get(-1)},skipWhile:function(t,e){return st(this,Y(this,t,e,!1))},zip:function(){return st(this,ut(this,pe,[this].concat(i(arguments))))},zipWith:function(t){var e=i(arguments);return e[0]=this,st(this,ut(this,t,e))}});var Yn=Me.prototype;Yn[ze]=!0,Yn[Te]=!0,ne(Be,{get:function(t,e){return this.has(t)?t:e},includes:function(t){return this.has(t)},keySeq:function(){return this.valueSeq()}}),Be.prototype.has=Gn.includes,Be.prototype.contains=Be.prototype.includes,ne(Ve,Ne.prototype),ne(Xe,Me.prototype),ne(Ge,Be.prototype);var Zn=function(t){function e(t){return null===t||void 0===t?we():ge(t)?t:we().withMutations(function(e){var n=Be(t);dt(n.size),n.forEach(function(t){return e.add(t)})})}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(t){return this(Ne(t).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e}(Kn);Zn.isOrderedSet=ge;var tr=Zn.prototype;tr[Te]=!0,tr.zip=Yn.zip,tr.zipWith=Yn.zipWith,tr.__empty=we,tr.__make=me;var er,nr=function(t,e){var n,r=function(o){var u=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(t),a=i._indices={};i._name=e,i._keys=s,i._defaultValues=t;for(var c=0;c<s.length;c++){var f=s[c];a[f]=c,i[f]?"object"==typeof console&&console.warn&&console.warn("Cannot define "+Se(u)+' with property "'+f+'" since that property name is part of the Record API.'):Ee(i,f)}}this.__ownerID=void 0,this._values=Dn().withMutations(function(t){t.setSize(u._keys.length),Ne(o).forEach(function(e,n){t.set(u._indices[n],e===u._defaultValues[n]?void 0:e)})})},i=r.prototype=Object.create(rr);return i.constructor=r,r};nr.prototype.toString=function(){for(var t,e=this,n=Se(this)+" { ",r=this._keys,i=0,o=r.length;i!==o;i++)t=r[i],n+=(i?", ":"")+t+": "+vt(e.get(t));return n+" }"},nr.prototype.equals=function(t){return this===t||this._keys===t._keys&&ke(this).equals(ke(t))},nr.prototype.hashCode=function(){return ke(this).hashCode()},nr.prototype.has=function(t){return this._indices.hasOwnProperty(t)},nr.prototype.get=function(t,e){if(!this.has(t))return e;var n=this._indices[t],r=this._values.get(n);return void 0===r?this._defaultValues[t]:r},nr.prototype.set=function(t,e){if(this.has(t)){var n=this._values.set(this._indices[t],e===this._defaultValues[t]?void 0:e);if(n!==this._values&&!this.__ownerID)return be(this,n)}return this},nr.prototype.remove=function(t){return this.set(t)},nr.prototype.clear=function(){var t=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:be(this,t)},nr.prototype.wasAltered=function(){return this._values.wasAltered()},nr.prototype.toSeq=function(){return ke(this)},nr.prototype.toJS=function(){return ke(this).toJS()},nr.prototype.__iterator=function(t,e){return ke(this).__iterator(t,e)},nr.prototype.__iterate=function(t,e){return ke(this).__iterate(t,e)},nr.prototype.__ensureOwner=function(t){if(t===this.__ownerID)return this;var e=this._values.__ensureOwner(t);return t?be(this,e,t):(this.__ownerID=t,this._values=e,this)},nr.isRecord=g,nr.getDescriptiveName=Se;var rr=nr.prototype;rr[Re]=!0,rr.delete=rr.remove,rr.getIn=Gn.getIn,rr.hasIn=Gn.hasIn,rr.merge=bn.merge,rr.mergeWith=bn.mergeWith,rr.mergeIn=bn.mergeIn,rr.mergeDeep=bn.mergeDeep,rr.mergeDeepWith=bn.mergeDeepWith,rr.mergeDeepIn=bn.mergeDeepIn,rr.setIn=bn.setIn,rr.update=bn.update,rr.updateIn=bn.updateIn,rr.withMutations=bn.withMutations,rr.asMutable=bn.asMutable,rr.asImmutable=bn.asImmutable,rr[We]=Gn.entries,rr.toJSON=rr.toObject=Gn.toObject,rr.inspect=rr.toSource=Gn.toSource;var ir,or=function(t){function e(t,n){if(!(this instanceof e))return new e(t,n);if(this._value=t,0===(this.size=void 0===n?1/0:Math.max(0,n))){if(ir)return ir;ir=this}}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(t,e){return this.has(t)?this._value:e},e.prototype.includes=function(t){return z(this._value,t)},e.prototype.slice=function(t,n){var r=this.size;return a(t,n,r)?this:new e(this._value,f(n,r)-c(t,r))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(t){return z(this._value,t)?0:-1},e.prototype.lastIndexOf=function(t){return z(this._value,t)?this.size:-1},e.prototype.__iterate=function(t,e){for(var n=this,r=this.size,i=0;i!==r&&!1!==t(n._value,e?r-++i:i++,n););return i},e.prototype.__iterator=function(t,e){var n=this,r=this.size,i=0;return new Je(function(){return i===r?b():w(t,e?r-++i:i++,n._value)})},e.prototype.equals=function(t){return t instanceof e?z(this._value,t._value):ee(t)},e}(Xe),ur={Collection:Ce,Iterable:Ce,Seq:He,Map:mn,OrderedMap:Mn,List:Dn,Stack:$n,Set:Kn,OrderedSet:Zn,Record:nr,Range:Xn,Repeat:or,is:z,fromJS:T,hash:B,isImmutable:l,isCollection:p,isKeyed:d,isIndexed:v,isAssociative:_,isOrdered:y,isValueObject:m},sr=Ce;t.default=ur,t.Collection=Ce,t.Iterable=sr,t.Seq=He,t.Map=mn,t.OrderedMap=Mn,t.List=Dn,t.Stack=$n,t.Set=Kn,t.OrderedSet=Zn,t.Record=nr,t.Range=Xn,t.Repeat=or,t.is=z,t.fromJS=T,t.hash=B,t.isImmutable=l,t.isCollection=p,t.isKeyed=d,t.isIndexed=v,t.isAssociative=_,t.isOrdered=y,t.isValueObject=m,Object.defineProperty(t,"__esModule",{value:!0})})},dAjQ:function(t){function e(t,e){var r=e||0,i=n;return i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]}for(var n=[],r=0;r<256;++r)n[r]=(r+256).toString(16).substr(1);t.exports=e},"f+DB":function(t,e,n){(function(e){var n,r=e.crypto||e.msCrypto;if(r&&r.getRandomValues){var i=new Uint8Array(16);n=function(){return r.getRandomValues(i),i}}if(!n){var o=new Array(16);n=function(){for(var t,e=0;e<16;e++)0==(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}t.exports=n}).call(e,n("h6ac"))},h6ac:function(t){var e;e=function(){return this}();try{e=e||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(e=window)}t.exports=e},hVVj:function(t,e,n){function r(t,e,n){var r=e&&n||0,i=e||[];t=t||{};var u=void 0!==t.clockseq?t.clockseq:a,h=void 0!==t.msecs?t.msecs:(new Date).getTime(),l=void 0!==t.nsecs?t.nsecs:f+1,p=h-c+(l-f)/1e4;if(p<0&&void 0===t.clockseq&&(u=u+1&16383),(p<0||h>c)&&void 0===t.nsecs&&(l=0),l>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");c=h,f=l,a=u,h+=122192928e5;var d=(1e4*(268435455&h)+l)%4294967296;i[r++]=d>>>24&255,i[r++]=d>>>16&255,i[r++]=d>>>8&255,i[r++]=255&d;var v=h/4294967296*1e4&268435455;i[r++]=v>>>8&255,i[r++]=255&v,i[r++]=v>>>24&15|16,i[r++]=v>>>16&255,i[r++]=u>>>8|128,i[r++]=255&u;for(var _=t.node||s,y=0;y<6;++y)i[r+y]=_[y];return e||o(i)}var i=n("f+DB"),o=n("dAjQ"),u=i(),s=[1|u[0],u[1],u[2],u[3],u[4],u[5]],a=16383&(u[6]<<8|u[7]),c=0,f=0;t.exports=r},hYHi:function(t,e,n){function r(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var u=t.random||(t.rng||i)();if(u[6]=15&u[6]|64,u[8]=63&u[8]|128,e)for(var s=0;s<16;++s)e[r+s]=u[s];return e||o(u)}var i=n("f+DB"),o=n("dAjQ");t.exports=r},jcLW:function(t,e,n){(function(r){function i(){return!("undefined"==typeof window||!window||void 0===window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document&&"WebkitAppearance"in document.documentElement.style||"undefined"!=typeof window&&window&&window.console&&(console.firebug||console.exception&&console.table)||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function o(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))}),t.splice(o,0,r)}}function u(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}}function a(){var t;try{t=e.storage.debug}catch(t){}return!t&&void 0!==r&&"env"in r&&(t=r.env.DEBUG),t}e=t.exports=n("y5CM"),e.log=u,e.formatArgs=o,e.save=s,e.load=a,e.useColors=i,e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(a())}).call(e,n("a6oe"))},mY35:function(t,e,n){"use strict";function r(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer||"undefined"!=typeof Blob&&t instanceof Blob}function i(t){if("function"==typeof t.slice)return t.slice(0);var e=new ArrayBuffer(t.byteLength);return new Uint8Array(e).set(new Uint8Array(t)),e}function o(t){if(t instanceof ArrayBuffer)return i(t);var e=t.size,n=t.type;return"function"==typeof t.slice?t.slice(0,e,n):t.webkitSlice(0,e,n)}function u(t){var e=Object.getPrototypeOf(t);if(null===e)return!0;var n=e.constructor;return"function"==typeof n&&n instanceof n&&L.call(n)==D}function s(t){var e,n,i;if(!t||"object"!=typeof t)return t;if(Array.isArray(t)){for(e=[],n=0,i=t.length;n<i;n++)e[n]=s(t[n]);return e}if(t instanceof Date)return t.toISOString();if(r(t))return o(t);if(!u(t))return t;e={};for(n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var a=s(t[n]);void 0!==a&&(e[n]=a)}return e}function a(t){var e=!1;return E()(function(n){if(e)throw new Error("once called more than once");e=!0,t.apply(this,n)})}function c(t){return E()(function(e){e=s(e);var n=this,r="function"==typeof e[e.length-1]&&e.pop(),i=new S.a(function(r,i){var o;try{var u=a(function(t,e){t?i(t):r(e)});e.push(u),o=t.apply(n,e),o&&"function"==typeof o.then&&r(o)}catch(t){i(t)}});return r&&i.then(function(t){r(null,t)},r),i})}function f(t,e){for(var n={},r=0,i=e.length;r<i;r++){var o=e[r];o in t&&(n[o]=t[o])}return n}function h(){return"undefined"!=typeof chrome&&void 0!==chrome.storage&&void 0!==chrome.storage.local}function l(){return j}function p(t){h()?chrome.storage.onChanged.addListener(function(e){null!=e.db_name&&t.emit(e.dbName.newValue)}):l()&&("undefined"!=typeof addEventListener?addEventListener("storage",function(e){t.emit(e.key)}):window.attachEvent("storage",function(e){t.emit(e.key)}))}function d(){I.EventEmitter.call(this),this._listeners={},p(this)}function v(t){if("undefined"!==console&&t in console){var e=Array.prototype.slice.call(arguments,1);console[t].apply(console,e)}}function _(t){for(var e=[],n=0,r=t.length;n<r;n++)e=e.concat(t[n]);return e}function y(){}function g(t){return"boolean"==typeof t._remote?t._remote:"function"==typeof t.type&&(v("warn","db.type() is deprecated and will be removed in a future version of PouchDB"),"http"===t.type())}function m(t,e,n){return new S.a(function(r,i){t.get(e,function(o,u){if(o){if(404!==o.status)return i(o);u={}}var s=u._rev,a=n(u);if(!a)return r({updated:!1,rev:s});a._id=e,a._rev=s,r(w(t,a,n))})})}function w(t,e,n){return t.put(e).then(function(t){return{updated:!0,rev:t.rev}},function(r){if(409!==r.status)throw r;return m(t,e._id,n)})}n.d(e,"b",function(){return T}),n.d(e,"a",function(){return s}),n.d(e,"g",function(){return _}),n.d(e,"f",function(){return v}),n.d(e,"e",function(){return g}),n.d(e,"d",function(){return c}),n.d(e,"c",function(){return m});var b=n("qQO4"),S=(n.n(b),n("5euN")),k=n("38I5"),E=n.n(k),I=(n("qpbW"),n("FRpO")),O=(n.n(I),n("4Bm0")),x=n.n(O),q=n("uUPe"),A=n.n(q);n("qncM");n.d(e,"h",function(){return A.a});var j,L=Function.prototype.toString,D=L.call(Object);if(h())j=!1;else try{localStorage.setItem("_pouch_check_localstorage",1),j=!!localStorage.getItem("_pouch_check_localstorage")}catch(t){j=!1}x()(d,I.EventEmitter),d.prototype.addListener=function(t,e,n,r){function i(){function t(){u=!1}if(o._listeners[e]){if(u)return void(u="waiting");u=!0;var s=f(r,["style","include_docs","attachments","conflicts","filter","doc_ids","view","since","query_params","binary"]);n.changes(s).on("change",function(t){t.seq>r.since&&!r.cancelled&&(r.since=t.seq,r.onChange(t))}).on("complete",function(){"waiting"===u&&A()(i),u=!1}).on("error",t)}}if(!this._listeners[e]){var o=this,u=!1;this._listeners[e]=i,this.on(t,i)}},d.prototype.removeListener=function(t,e){e in this._listeners&&(I.EventEmitter.prototype.removeListener.call(this,t,this._listeners[e]),delete this._listeners[e])},d.prototype.notifyLocalWindows=function(t){h()?chrome.storage.local.set({dbName:t}):l()&&(localStorage[t]="a"===localStorage[t]?"b":"a")},d.prototype.notify=function(t){this.emit(t),this.notifyLocalWindows(t)};var z;z="function"==typeof Object.assign?Object.assign:function(t){for(var e=Object(t),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};var T=z,R=y.name},pwNi:function(t,e,n){"use strict";var r=n("KM04");"serviceWorker"in navigator&&"https:"===location.protocol&&navigator.serviceWorker.register("/sw.js");var i=function(t){return t&&t.default||t};if("function"==typeof i(n("JkW7"))){var o=document.body.firstElementChild,u=function(){var t=i(n("JkW7"));o=(0,r.render)((0,r.h)(t),document.body,o)};u()}},qQO4:function(t,e,n){var r=n("hVVj"),i=n("hYHi"),o=i;o.v1=r,o.v4=i,t.exports=o},qncM:function(t,e,n){"use strict";function r(t,e,n){Error.call(this,n),this.status=t,this.name=e,this.message=n,this.error=!0}function i(t,e){function n(e){for(var n in t)"function"!=typeof t[n]&&(this[n]=t[n]);void 0!==e&&(this.reason=e)}return n.prototype=r.prototype,new n(e)}n.d(e,"d",function(){return o}),n.d(e,"c",function(){return u}),n.d(e,"e",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"a",function(){return i}),n.n(n("4Bm0"))()(r,Error),r.prototype.toString=function(){return JSON.stringify({status:this.status,name:this.name,message:this.message,reason:this.reason})};var o=(new r(401,"unauthorized","Name or password is incorrect."),new r(400,"bad_request","Missing JSON list of 'docs'"),new r(404,"not_found","missing"),new r(409,"conflict","Document update conflict"),new r(400,"bad_request","_id field must contain a string")),u=new r(412,"missing_id","_id is required for puts"),s=new r(400,"bad_request","Only reserved document ids may start with underscore."),a=(new r(412,"precondition_failed","Database not open"),new r(500,"unknown_error","Database encountered an unknown error"),new r(500,"badarg","Some query argument is invalid"),new r(400,"invalid_request","Request was invalid"),new r(400,"query_parse_error","Some query parameter is invalid"),new r(500,"doc_validation","Bad special document member"),new r(400,"bad_request","Something wrong with the request"));new r(400,"bad_request","Document must be a JSON object"),new r(404,"not_found","Database not found"),new r(500,"indexed_db_went_bad","unknown"),new r(500,"web_sql_went_bad","unknown"),new r(500,"levelDB_went_went_bad","unknown"),new r(403,"forbidden","Forbidden by design doc validate_doc_update function"),new r(400,"bad_request","Invalid rev format"),new r(412,"file_exists","The database could not be created, the file already exists."),new r(412,"missing_stub","A pre-existing attachment stub wasn't found"),new r(413,"invalid_url","Provided URL is invalid")},qove:function(t,e,n){"use strict";function r(){this.promise=new h.a(function(t){t()})}function i(t){if(!t)return"undefined";switch(typeof t){case"function":case"string":return t.toString();default:return JSON.stringify(t)}}function o(t,e){return i(t)+i(e)+"undefined"}function u(t,e,r,i,u,s){var a,c=o(r,i);if(!u&&(a=t._cachedViews=t._cachedViews||{},a[c]))return a[c];var f=t.info().then(function(o){function f(t){t.views=t.views||{};var n=e;-1===n.indexOf("/")&&(n=e+"/"+e);var r=t.views[n]=t.views[n]||{};if(!r[h])return r[h]=!0,t}var h=o.db_name+"-mrview-"+(u?"temp":n.i(_.a)(c));return n.i(p.c)(t,"_local/"+s,f).then(function(){return t.registerDependentDatabase(h).then(function(e){var n=e.db;n.auto_compaction=!0;var o={name:h,db:n,sourceDB:t,adapter:t.adapter,mapFun:r,reduceFun:i};return o.db.get("_local/lastSeq").catch(function(t){if(404!==t.status)throw t}).then(function(t){return o.seq=t?t.seq:0,a&&o.db.once("destroyed",function(){delete a[c]}),o})})})});return a&&(a[c]=f),f}function s(t){return-1===t.indexOf("/")?[t,t]:t.split("/")}function a(t){return 1===t.length&&/^1-/.test(t[0].rev)}function c(t,e){try{t.emit("error",e)}catch(t){n.i(p.f)("error","The user's map/reduce function threw an uncaught error.\nYou can debug this error by doing:\nmyDatabase.on('error', function (err) { debugger; });\nPlease double-check your map/reduce function."),n.i(p.f)("error",e)}}function f(t,e,i,o){function f(t,e,n){try{e(n)}catch(e){c(t,e)}}function _(t,e,n,r,i){try{return{output:e(n,r,i)}}catch(e){return c(t,e),{error:e}}}function b(t,e){var r=n.i(v.a)(t.key,e.key);return 0!==r?r:n.i(v.a)(t.value,e.value)}function S(t,e,n){return n=n||0,"number"==typeof e?t.slice(n,e+n):n>0?t.slice(n):t}function k(t){var e=t.value;return e&&"object"==typeof e&&e._id||t.id}function E(t){t.rows.forEach(function(t){var e=t.doc&&t.doc._attachments;e&&Object.keys(e).forEach(function(t){var r=e[t];e[t].data=n.i(d.c)(r.data,r.content_type)})})}function I(t){return function(e){return t.include_docs&&t.attachments&&t.binary&&E(e),e}}function O(t,e,n,r){var i=e[t];void 0!==i&&(r&&(i=encodeURIComponent(JSON.stringify(i))),n.push(t+"="+i))}function x(t){if(void 0!==t){var e=Number(t);return isNaN(e)||e!==parseInt(t,10)?t:e}}function q(t){return t.group_level=x(t.group_level),t.limit=x(t.limit),t.skip=x(t.skip),t}function A(t){if(t){if("number"!=typeof t)return new y.a('Invalid value for integer: "'+t+'"');if(t<0)return new y.a('Invalid value for positive integer: "'+t+'"')}}function j(t,e){var r=t.descending?"endkey":"startkey",i=t.descending?"startkey":"endkey";if(void 0!==t[r]&&void 0!==t[i]&&n.i(v.a)(t[r],t[i])>0)throw new y.a("No rows can match your key range, reverse your start_key and end_key or set {descending : true}");if(e.reduce&&!1!==t.reduce){if(t.include_docs)throw new y.a("{include_docs:true} is invalid for reduce");if(t.keys&&t.keys.length>1&&!t.group&&!t.group_level)throw new y.a("Multi-key fetches for reduce views must use {group: true}")}["group_level","limit","skip"].forEach(function(e){var n=A(t[e]);if(n)throw n})}function L(t,e,n){var r,i=[],o="GET";if(O("reduce",n,i),O("include_docs",n,i),O("attachments",n,i),O("limit",n,i),O("descending",n,i),O("group",n,i),O("group_level",n,i),O("skip",n,i),O("stale",n,i),O("conflicts",n,i),O("startkey",n,i,!0),O("start_key",n,i,!0),O("endkey",n,i,!0),O("end_key",n,i,!0),O("inclusive_end",n,i),O("key",n,i,!0),i=i.join("&"),i=""===i?"":"?"+i,void 0!==n.keys){var u="keys="+encodeURIComponent(JSON.stringify(n.keys));u.length+i.length+1<=2e3?i+=("?"===i[0]?"&":"?")+u:(o="POST","string"==typeof e?r={keys:n.keys}:e.keys=n.keys)}if("string"==typeof e){var a=s(e);return t.request({method:o,url:"_design/"+a[0]+"/_view/"+a[1]+i,body:r}).then(function(t){return t.rows.forEach(function(t){if(t.value&&t.value.error&&"builtin_reduce_error"===t.value.error)throw new Error(t.reason)}),t}).then(I(n))}return r=r||{},Object.keys(e).forEach(function(t){r[t]=Array.isArray(e[t])?e[t]:e[t].toString()}),t.request({method:"POST",url:"_temp_view"+i,body:r}).then(I(n))}function D(t,e,n){return new h.a(function(r,i){t._query(e,n,function(t,e){if(t)return i(t);r(e)})})}function z(t){return new h.a(function(e,n){t._viewCleanup(function(t,r){if(t)return n(t);e(r)})})}function T(t){return function(e){if(404===e.status)return t;throw e}}function R(t,e,r){function i(t){return t.keys.length?e.db.allDocs({keys:t.keys,include_docs:!0}):h.a.resolve({rows:[]})}function o(t,e){for(var r=[],i=new l.b,o=0,u=e.rows.length;o<u;o++){var s=e.rows[o],a=s.doc;if(a&&(r.push(a),i.add(a._id),!(a._deleted=!f.has(a._id)))){var c=f.get(a._id);"value"in c&&(a.value=c.value)}}var h=n.i(y.b)(f);return h.forEach(function(t){if(!i.has(t)){var e={_id:t},n=f.get(t);"value"in n&&(e.value=n.value),r.push(e)}}),t.keys=n.i(y.c)(h.concat(t.keys)),r.push(t),r}var u="_local/doc_"+t,s={_id:u,keys:[]},c=r.get(t),f=c[0],p=c[1];return function(){return a(p)?h.a.resolve(s):e.db.get(u).catch(T(s))}().then(function(t){return i(t).then(function(e){return o(t,e)})})}function C(t,e,r){return t.db.get("_local/lastSeq").catch(T({_id:"_local/lastSeq",seq:0})).then(function(i){var o=n.i(y.b)(e);return h.a.all(o.map(function(n){return R(n,t,e)})).then(function(e){var o=n.i(p.g)(e);return i.seq=r,o.push(i),t.db.bulkDocs({docs:o})})})}function N(t){var e="string"==typeof t?t:t.name,n=g[e];return n||(n=g[e]=new r),n}function M(t){return n.i(y.d)(N(t),function(){return B(t)})()}function B(t){function i(t,e){var r={id:p._id,key:n.i(v.b)(t)};void 0!==e&&null!==e&&(r.value=n.i(v.b)(e)),h.push(r)}function o(e,n){return function(){return C(t,e,n)}}function u(){return t.sourceDB.changes({conflicts:!0,include_docs:!0,style:"all_docs",since:_,limit:w}).then(s)}function s(t){var e=t.results;if(e.length){var n=a(e);if(y.add(o(n,_)),!(e.length<w))return u()}}function a(e){for(var n=new l.a,r=0,i=e.length;r<i;r++){var o=e[r];if("_"!==o.doc._id[0]){h=[],p=o.doc,p._deleted||f(t.sourceDB,d,p),h.sort(b);n.set(o.doc._id,[c(h),o.changes])}_=o.seq}return n}function c(t){for(var e,r=new l.a,i=0,o=t.length;i<o;i++){var u=t[i],s=[u.key,u.id];i>0&&0===n.i(v.a)(u.key,e)&&s.push(i),r.set(n.i(v.c)(s),u),e=u.key}return r}var h,p,d=e(t.mapFun,i),_=t.seq||0,y=new r;return u().then(function(){return y.finish()}).then(function(){t.seq=_})}function $(t,e,r){0===r.group_level&&delete r.group_level;var o=r.group||r.group_level,u=i(t.reduceFun),s=[],a=isNaN(r.group_level)?Number.POSITIVE_INFINITY:r.group_level;e.forEach(function(t){var e=s[s.length-1],r=o?t.key:null;if(o&&Array.isArray(r)&&(r=r.slice(0,a)),e&&0===n.i(v.a)(e.groupKey,r))return e.keys.push([t.key,t.id]),void e.values.push(t.value);s.push({keys:[[t.key,t.id]],values:[t.value],groupKey:r})}),e=[];for(var c=0,f=s.length;c<f;c++){var h=s[c],l=_(t.sourceDB,u,h.keys,h.values,!1);if(l.error&&l.error instanceof y.e)throw l.error;e.push({value:l.error?null:l.output,key:h.groupKey})}return{rows:S(e,r.limit,r.skip)}}function U(t,e){return n.i(y.d)(N(t),function(){return P(t,e)})()}function P(t,e){function r(e){return e.include_docs=!0,t.db.allDocs(e).then(function(t){return o=t.total_rows,t.rows.map(function(t){if("value"in t.doc&&"object"==typeof t.doc.value&&null!==t.doc.value){var e=Object.keys(t.doc.value).sort(),r=["id","key","value"];if(!(e<r||e>r))return t.doc.value}var i=n.i(v.d)(t.doc._id);return{key:i[0],id:i[1],value:"value"in t.doc?t.doc.value:null}})})}function i(r){var i;if(i=u?$(t,r,e):{total_rows:o,offset:s,rows:r},e.include_docs){var a=n.i(y.c)(r.map(k));return t.sourceDB.allDocs({keys:a,include_docs:!0,conflicts:e.conflicts,attachments:e.attachments,binary:e.binary}).then(function(t){var e=new l.a;return t.rows.forEach(function(t){e.set(t.id,t.doc)}),r.forEach(function(t){var n=k(t),r=e.get(n);r&&(t.doc=r)}),i})}return i}var o,u=t.reduceFun&&!1!==e.reduce,s=e.skip||0;if(void 0===e.keys||e.keys.length||(e.limit=0,delete e.keys),void 0!==e.keys){var a=e.keys,c=a.map(function(t){return r({startkey:n.i(v.c)([t]),endkey:n.i(v.c)([t,{}])})});return h.a.all(c).then(p.g).then(i)}var f,d,_={descending:e.descending};if("start_key"in e&&(f=e.start_key),"startkey"in e&&(f=e.startkey),"end_key"in e&&(d=e.end_key),"endkey"in e&&(d=e.endkey),void 0!==f&&(_.startkey=e.descending?n.i(v.c)([f,{}]):n.i(v.c)([f])),void 0!==d){var g=!1!==e.inclusive_end;e.descending&&(g=!g),_.endkey=n.i(v.c)(g?[d,{}]:[d])}if(void 0!==e.key){var m=n.i(v.c)([e.key]),w=n.i(v.c)([e.key,{}]);_.descending?(_.endkey=m,_.startkey=w):(_.startkey=m,_.endkey=w)}return u||("number"==typeof e.limit&&(_.limit=e.limit),_.skip=s),r(_).then(i)}function F(t){return t.request({method:"POST",url:"_view_cleanup"})}function K(e){return e.get("_local/"+t).then(function(t){var r=new l.a;Object.keys(t.views).forEach(function(t){var e=s(t),n="_design/"+e[0],i=e[1],o=r.get(n);o||(o=new l.b,r.set(n,o)),o.add(i)});var i={keys:n.i(y.b)(r),include_docs:!0};return e.allDocs(i).then(function(i){var o={};i.rows.forEach(function(e){var n=e.key.substring(8);r.get(e.key).forEach(function(r){var i=n+"/"+r;t.views[i]||(i=r);var u=e.doc&&e.doc.views&&e.doc.views[r];Object.keys(t.views[i]).forEach(function(t){o[t]=o[t]||u})})});var u=Object.keys(o).filter(function(t){return!o[t]}),s=u.map(function(t){return n.i(y.d)(N(t),function(){return new e.constructor(t,e.__opts).destroy()})()});return h.a.all(s).then(function(){return{ok:!0}})})},T({ok:!0}))}function W(e,r,i){if("function"==typeof e._query)return D(e,r,i);if(n.i(p.e)(e))return L(e,r,i);if("string"!=typeof r)return j(i,r),m.add(function(){return u(e,"temp_view/temp_view",r.map,r.reduce,!0,t).then(function(t){return n.i(y.f)(M(t).then(function(){return U(t,i)}),function(){return t.db.destroy()})})}),m.finish();var a=r,c=s(a),f=c[0],h=c[1];return e.get("_design/"+f).then(function(r){var s=r.views&&r.views[h];if(!s)throw new y.g("ddoc "+r._id+" has no view named "+h);return o(r,h),j(i,s),u(e,a,s.map,s.reduce,!1,t).then(function(t){return"ok"===i.stale||"update_after"===i.stale?("update_after"===i.stale&&n.i(p.h)(function(){M(t)}),U(t,i)):M(t).then(function(){return U(t,i)})})})}function J(t,e,r){var i=this;"function"==typeof e&&(r=e,e={}),e=e?q(e):{},"function"==typeof t&&(t={map:t});var o=h.a.resolve().then(function(){return W(i,t,e)});return n.i(y.h)(o,r),o}return{query:J,viewCleanup:n.i(y.i)(function(){var t=this;return"function"==typeof t._viewCleanup?z(t):n.i(p.e)(t)?F(t):K(t)})}}var h=n("5euN"),l=n("qpbW"),p=n("mY35"),d=n("8/Wf"),v=n("1XVU"),_=n("ZfEw"),y=n("T/c0");r.prototype.add=function(t){return this.promise=this.promise.catch(function(){}).then(function(){return t()})},r.prototype.finish=function(){return this.promise};var g={},m=new r,w=50;e.a=f},qpbW:function(t,e,n){"use strict";function r(t){return"$"+t}function i(t){return t.substring(1)}function o(){this._store={}}function u(t){if(this._store=new o,t&&Array.isArray(t))for(var e=0,n=t.length;e<n;e++)this.add(t[e])}n.d(e,"b",function(){return s}),n.d(e,"a",function(){return a}),o.prototype.get=function(t){return this._store[r(t)]},o.prototype.set=function(t,e){return this._store[r(t)]=e,!0},o.prototype.has=function(t){return r(t)in this._store},o.prototype.delete=function(t){var e=r(t),n=e in this._store;return delete this._store[e],n},o.prototype.forEach=function(t){for(var e=Object.keys(this._store),n=0,r=e.length;n<r;n++){var o=e[n],u=this._store[o];o=i(o),t(u,o)}},Object.defineProperty(o.prototype,"size",{get:function(){return Object.keys(this._store).length}}),u.prototype.add=function(t){return this._store.set(t,!0)},u.prototype.has=function(t){return this._store.has(t)},u.prototype.forEach=function(t){this._store.forEach(function(e,n){t(n)})},Object.defineProperty(u.prototype,"size",{get:function(){return this._store.size}});var s,a;!function(){if("undefined"==typeof Symbol||"undefined"==typeof Map||"undefined"==typeof Set)return!1;var t=Object.getOwnPropertyDescriptor(Map,Symbol.species);return t&&"get"in t&&Map[Symbol.species]===Map}()?(s=u,a=o):(s=Set,a=Map)},rsNZ:function(t,e,n){"use strict";(function(t){function r(t){return t=n.i(lt.a)(t),t.index||(t.index={}),["type","name","ddoc"].forEach(function(e){t.index[e]&&(t[e]=t.index[e],delete t.index[e])}),t.fields&&(t.index.fields=t.fields,delete t.fields),t.type||(t.type="json"),t}function i(t,e,n){e=r(e),t.request({method:"POST",url:"_index",body:e},n)}function o(t,e,n){t.request({method:"POST",url:"_find",body:e},n)}function u(t,e,n){t.request({method:"POST",url:"_explain",body:e},n)}function s(t,e){t.request({method:"GET",url:"_index"},e)}function a(t,e,n){var r=e.ddoc,i=e.type||"json",o=e.name;return r?o?void t.request({method:"DELETE",url:"_index/"+[r,i,o].map(encodeURIComponent).join("/")},n):n(new Error("you must provide an index's name")):n(new Error("you must provide an index's ddoc"))}function c(t){return function(){for(var e=arguments.length,n=new Array(e),r=-1;++r<e;)n[r]=arguments[r];return t.call(this,n)}}function f(t){return c(function(e){var n=e.pop(),r=t.apply(this,e);return h(r,n),r})}function h(e,n){return e.then(function(e){t.nextTick(function(){n(null,e)})},function(e){t.nextTick(function(){n(e)})}),e}function l(t){for(var e={},r=0,i=t.length;r<i;r++)e=n.i(lt.b)(e,t[r]);return e}function p(t,e){for(var r={},i=0,o=e.length;i<o;i++){var u=n.i(dt.a)(e[i]),s=n.i(dt.b)(t,u);void 0!==s&&n.i(dt.c)(r,u,s)}return r}function d(t,e){for(var n=0,r=Math.min(t.length,e.length);n<r;n++)if(t[n]!==e[n])return!1;return!0}function v(t,e){return!(t.length>e.length)&&d(t,e)}function _(t,e){t=t.slice();for(var n=0,r=e.length;n<r;n++){var i=e[n];if(!t.length)break;var o=t.indexOf(i);if(-1===o)return!1;t.splice(o,1)}return!0}function y(t){for(var e={},n=0,r=t.length;n<r;n++)e[t[n]]=!0;return e}function g(t,e){for(var n=null,r=-1,i=0,o=t.length;i<o;i++){var u=t[i],s=e(u);s>r&&(r=s,n=u)}return n}function m(t,e){if(t.length!==e.length)return!1;for(var n=0,r=t.length;n<r;n++)if(t[n]!==e[n])return!1;return!0}function w(t){for(var e={},n=0;n<t.length;n++)e["$"+t[n]]=!0;return Object.keys(e).map(function(t){return t.substring(1)})}function b(t,e){return function(r){for(var i=[],o=0,u=t.length;o<u;o++){for(var s=n.i(dt.a)(t[o]),a=r,c=0,f=s.length;c<f;c++){if(!(a=a[s[c]]))return}i.push(a)}e(i)}}function S(t,e){var r=n.i(dt.a)(t);return function(t){for(var n=t,i=0,o=r.length;i<o;i++){if(!(n=n[r[i]]))return}e(n)}}function k(t,e){return function(n){e(n[t])}}function E(t,e){return function(n){for(var r=[],i=0,o=t.length;i<o;i++)r.push(n[t[i]]);e(r)}}function I(t){for(var e=0,n=t.length;e<n;e++){if(-1!==t[e].indexOf("."))return!1}return!0}function O(t,e){var n=I(t),r=1===t.length;return n?r?k(t[0],e):E(t,e):r?S(t[0],e):b(t,e)}function x(t,e){return O(Object.keys(t.fields),e)}function q(){throw new Error("reduce not supported")}function A(t,e){var n=t.views[e];if(!n.map||!n.map.fields)throw new Error("ddoc "+t._id+" with view "+e+" doesn't have map.fields defined. maybe it wasn't created by this plugin?")}function j(t){if(!Array.isArray(t))throw new Error("invalid sort json - should be an array");return t.map(function(t){if("string"==typeof t){var e={};return e[t]="asc",e}return t})}function L(t){var e=[];return"string"==typeof t?e.push(t):e=t,e.map(function(t){return t.replace("_design/","")})}function D(t){return t.fields=t.fields.map(function(t){if("string"==typeof t){var e={};return e[t]="asc",e}return t}),t}function z(t,e){for(var r=[],i=0;i<e.def.fields.length;i++){r.push(t[n.i(dt.d)(e.def.fields[i])])}return r}function T(t,e,r){for(var i=r.def.fields,o=0,u=t.length;o<u;o++){var s=t[o],a=z(s.doc,r);if(1===i.length)a=a[0];else for(;a.length>e.length;)a.pop();if(Math.abs(n.i(_t.a)(a,e))>0)break}return o>0?t.slice(o):t}function R(t){var e=n.i(lt.a)(t);return delete e.startkey,delete e.endkey,delete e.inclusive_start,delete e.inclusive_end,"endkey"in t&&(e.startkey=t.endkey),"startkey"in t&&(e.endkey=t.startkey),"inclusive_start"in t&&(e.inclusive_end=t.inclusive_start),"inclusive_end"in t&&(e.inclusive_start=t.inclusive_end),e}function C(t){var e=t.fields.filter(function(t){return"asc"===n.i(dt.e)(t)});if(0!==e.length&&e.length!==t.fields.length)throw new Error("unsupported mixed sorting")}function N(t,e){if(e.defaultUsed&&t.sort){var n=t.sort.filter(function(t){return"_id"!==Object.keys(t)[0]}).map(function(t){return Object.keys(t)[0]});if(n.length>0)throw new Error('Cannot sort on field(s) "'+n.join(",")+'" when using the default index')}}function M(t){if("object"!=typeof t.selector)throw new Error("you must provide a selector when you find()")}function B(t,e){var n,r=Object.keys(t),i=e?e.map(dt.d):[];return n=r.length>=i.length?r:i,0===i.length?{fields:n}:(n=n.sort(function(t,e){var n=i.indexOf(t);-1===n&&(n=Number.MAX_VALUE);var r=i.indexOf(e);return-1===r&&(r=Number.MAX_VALUE),n<r?-1:n>r?1:0}),{fields:n,sortOrder:e.map(dt.d)})}function $(t,e){function i(){return s||(s=n.i(yt.a)(JSON.stringify(e)))}function o(t){return t._rev&&"query"!==t.language&&(h=!0),t.language="query",t.views=t.views||{},!(p=!!t.views[a])&&(t.views[a]={map:{fields:l(e.index.fields)},reduce:"_count",options:{def:u}},t)}e=r(e);var u=n.i(lt.a)(e.index);e.index=D(e.index),C(e.index);var s,a=e.name||"idx-"+i(),c=e.ddoc||"idx-"+i(),f="_design/"+c,h=!1,p=!1;return t.constructor.emit("debug",["find","creating index",f]),n.i(lt.c)(t,f,o).then(function(){if(h)throw new Error('invalid language for ddoc with id "'+f+'" (should be "query")')}).then(function(){return mt.query.call(t,c+"/"+a,{limit:0,reduce:!1}).then(function(){return{id:f,name:a,result:p?"exists":"created"}})})}function U(t){return t.allDocs({startkey:"_design/",endkey:"_design/￿",include_docs:!0}).then(function(t){var e={indexes:[{ddoc:null,name:"_all_docs",type:"special",def:{fields:[{_id:"asc"}]}}]};return e.indexes=gt(e.indexes,t.rows.filter(function(t){return"query"===t.doc.language}).map(function(t){return(void 0!==t.doc.views?Object.keys(t.doc.views):[]).map(function(e){return{ddoc:t.id,name:e,type:"json",def:D(t.doc.views[e].options.def)}})})),e.indexes.sort(function(t,e){return n.i(dt.f)(t.name,e.name)}),e.total_rows=e.indexes.length,e})}function P(t,e){for(var n=t.def.fields.map(dt.d),r=0,i=n.length;r<i;r++){if(e===n[r])return!0}return!1}function F(t,e){var r=t[e];return"$eq"!==n.i(dt.d)(r)}function K(t,e){var r=e.def.fields.map(dt.d);return t.slice().sort(function(t,e){var i=r.indexOf(t),o=r.indexOf(e);return-1===i&&(i=Number.MAX_VALUE),-1===o&&(o=Number.MAX_VALUE),n.i(dt.f)(i,o)})}function W(t,e,n){n=K(n,t);for(var r=!1,i=0,o=n.length;i<o;i++){var u=n[i];if(r||!P(t,u))return n.slice(i);i<o-1&&F(e,u)&&(r=!0)}return[]}function J(t){var e=[];return Object.keys(t).forEach(function(n){var r=t[n];Object.keys(r).forEach(function(t){"$ne"===t&&e.push(n)})}),e}function H(t,e,n,r){return K(w(gt(t,W(e,n,r),J(n))),e)}function V(t,e,n){if(e){var r=v(e,t),i=d(n,t);return r&&i}return _(n,t)}function X(t){return-1===St.indexOf(t)}function G(t,e){var r=t[0],i=e[r];return void 0===i||!!Object.keys(i).some(function(t){return!X(t)})&&!(1===Object.keys(i).length&&"$ne"===n.i(dt.d)(i))}function Q(t,e,n,r){var i=t.def.fields.map(dt.d);return!!V(i,e,n)&&G(i,r)}function Y(t,e,n,r){return r.reduce(function(r,i){return Q(i,n,e,t)&&r.push(i),r},[])}function Z(t,e,n,r,i){function o(t){for(var e=t.def.fields.map(dt.d),n=0,r=0,i=e.length;r<i;r++){a[e[r]]&&n++}return n}var u=Y(t,e,n,r);if(0===u.length){if(i)throw{error:"no_usable_index",message:"There is no index available for this selector."};var s=r[0];return s.defaultUsed=!0,s}if(1===u.length&&!i)return u[0];var a=y(e);if(i){var c="_design/"+i[0],f=2===i.length&&i[1],h=u.find(function(t){return!(!f||t.ddoc!==c||f!==t.name)||t.ddoc===c});if(!h)throw{error:"unknown_error",message:"Could not find that index or could not use that index for the query"};return h}return g(u,o)}function tt(t,e){switch(t){case"$eq":return{key:e};case"$lte":return{endkey:e};case"$gte":return{startkey:e};case"$lt":return{endkey:e,inclusive_end:!1};case"$gt":return{startkey:e,inclusive_start:!1}}}function et(t,e){var r,i=n.i(dt.d)(e.def.fields[0]),o=t[i]||{},u=[],s=Object.keys(o);return s.forEach(function(t){if(X(t))return void u.push(i);var e=o[t],n=tt(t,e);r=r?l([r,n]):n}),{queryOpts:r,inMemoryFields:u}}function nt(t,e){switch(t){case"$eq":return{startkey:e,endkey:e};case"$lte":return{endkey:e};case"$gte":return{startkey:e};case"$lt":return{endkey:e,inclusive_end:!1};case"$gt":return{startkey:e,inclusive_start:!1}}}function rt(t,e){function n(t){!1!==r&&s.push(wt),!1!==i&&a.push(bt),u=o.slice(t)}for(var r,i,o=e.def.fields.map(dt.d),u=[],s=[],a=[],c=0,f=o.length;c<f;c++){var h=o[c],p=t[h];if(!p||!Object.keys(p).length){n(c);break}if(c>0){if(Object.keys(p).some(X)){n(c);break}var d="$gt"in p||"$gte"in p||"$lt"in p||"$lte"in p,v=Object.keys(t[o[c-1]]),_=m(v,["$eq"]),y=m(v,Object.keys(p));if(d&&!_&&!y){n(c);break}}for(var g=Object.keys(p),w=null,b=0;b<g.length;b++){var S=g[b],k=p[S],E=nt(S,k);w=w?l([w,E]):E}s.push("startkey"in w?w.startkey:wt),a.push("endkey"in w?w.endkey:bt),"inclusive_start"in w&&(r=w.inclusive_start),"inclusive_end"in w&&(i=w.inclusive_end)}var I={startkey:s,endkey:a};return void 0!==r&&(I.inclusive_start=r),void 0!==i&&(I.inclusive_end=i),{queryOpts:I,inMemoryFields:u}}function it(t){return{queryOpts:{startkey:null},inMemoryFields:[Object.keys(t)]}}function ot(t,e){return e.defaultUsed?it(t,e):1===e.def.fields.length?et(t,e):rt(t,e)}function ut(t,e){var n=t.selector,r=t.sort,i=B(n,r),o=i.fields,u=i.sortOrder,s=Z(n,o,u,e,t.use_index),a=ot(n,s);return{queryOpts:a.queryOpts,index:s,inMemoryFields:H(a.inMemoryFields,s,n,o)}}function st(t){return t.ddoc.substring(8)+"/"+t.name}function at(t,e){var r=n.i(lt.a)(e);return r.descending?("endkey"in r&&"string"!=typeof r.endkey&&(r.endkey=""),"startkey"in r&&"string"!=typeof r.startkey&&(r.limit=0)):("startkey"in r&&"string"!=typeof r.startkey&&(r.startkey=""),"endkey"in r&&"string"!=typeof r.endkey&&(r.limit=0)),"key"in r&&"string"!=typeof r.key&&(r.limit=0),t.allDocs(r).then(function(t){return t.rows=t.rows.filter(function(t){return!/^_design\//.test(t.id)}),t})}function ct(t,e,r){return e.selector&&(e.selector=n.i(dt.g)(e.selector)),e.sort&&(e.sort=j(e.sort)),e.use_index&&(e.use_index=L(e.use_index)),M(e),U(t).then(function(i){t.constructor.emit("debug",["find","planning query",e]);var o=ut(e,i.indexes);t.constructor.emit("debug",["find","query plan",o]);var u=o.index;N(e,u);var s=n.i(lt.b)({include_docs:!0,reduce:!1},o.queryOpts);return"startkey"in s&&"endkey"in s&&n.i(_t.a)(s.startkey,s.endkey)>0?{docs:[]}:(e.sort&&"string"!=typeof e.sort[0]&&"desc"===n.i(dt.e)(e.sort[0])&&(s.descending=!0,s=R(s)),o.inMemoryFields.length||("limit"in e&&(s.limit=e.limit),"skip"in e&&(s.skip=e.skip)),r?pt.a.resolve(o,s):pt.a.resolve().then(function(){if("_all_docs"===u.name)return at(t,s);var e=st(u);return mt.query.call(t,e,s)}).then(function(t){!1===s.inclusive_start&&(t.rows=T(t.rows,s.startkey,u)),o.inMemoryFields.length&&(t.rows=n.i(dt.h)(t.rows,e,o.inMemoryFields));var r={docs:t.rows.map(function(t){var n=t.doc;return e.fields?p(n,e.fields):n})};return u.defaultUsed&&(r.warning="no matching index found, create an index to optimize query time"),r}))})}function ft(t,e){return ct(t,e,!0).then(function(n){return{dbname:t.name,index:n.index,selector:e.selector,range:{start_key:n.queryOpts.startkey,end_key:n.queryOpts.endkey},opts:{use_index:e.use_index||[],bookmark:"nil",limit:e.limit,skip:e.skip,sort:e.sort||{},fields:e.fields,conflicts:!1,r:[49]},limit:e.limit,skip:e.skip||0,fields:e.fields}})}function ht(t,e){function r(t){return 1===Object.keys(t.views).length&&t.views[o]?{_id:i,_deleted:!0}:(delete t.views[o],t)}if(!e.ddoc)throw new Error("you must supply an index.ddoc when deleting");if(!e.name)throw new Error("you must supply an index.name when deleting");var i=e.ddoc,o=e.name;return n.i(lt.c)(t,i,r).then(function(){return mt.viewCleanup.apply(t)}).then(function(){return{ok:!0}})}var lt=n("mY35"),pt=n("5euN"),dt=n("C9XX"),vt=n("qove"),_t=n("1XVU"),yt=n("ZfEw"),gt=c(function(t){for(var e=[],n=0,r=t.length;n<r;n++){var i=t[n];Array.isArray(i)?e=e.concat(gt.apply(null,i)):e.push(i)}return e}),mt=n.i(vt.a)("indexes",x,q,A),wt=null,bt={"￿":{}},St=["$eq","$gt","$gte","$lt","$lte"],kt=f($),Et=f(ct),It=f(ft),Ot=f(U),xt=f(ht),qt={};qt.createIndex=n.i(lt.d)(function(t,e){if("object"!=typeof t)return e(new Error("you must provide an index to create"));(n.i(lt.e)(this)?i:kt)(this,t,e)}),qt.find=n.i(lt.d)(function(t,e){if(void 0===e&&(e=t,t=void 0),"object"!=typeof t)return e(new Error("you must provide search parameters to find()"));(n.i(lt.e)(this)?o:Et)(this,t,e)}),qt.explain=n.i(lt.d)(function(t,e){if(void 0===e&&(e=t,t=void 0),"object"!=typeof t)return e(new Error("you must provide search parameters to explain()"));(n.i(lt.e)(this)?u:It)(this,t,e)}),qt.getIndexes=n.i(lt.d)(function(t){(n.i(lt.e)(this)?s:Ot)(this,t)}),qt.deleteIndex=n.i(lt.d)(function(t,e){if("object"!=typeof t)return e(new Error("you must provide an index to delete"));(n.i(lt.e)(this)?a:xt)(this,t,e)}),e.a=qt}).call(e,n("a6oe"))},uUPe:function(t,e,n){"use strict";(function(e){function n(){f=!0;for(var t,e,n=h.length;n;){for(e=h,h=[],t=-1;++t<n;)e[t]();n=h.length}f=!1}function r(t){1!==h.push(t)||f||i()}var i,o=e.MutationObserver||e.WebKitMutationObserver;if(o){var u=0,s=new o(n),a=e.document.createTextNode("");s.observe(a,{characterData:!0}),i=function(){a.data=u=++u%2}}else if(e.setImmediate||void 0===e.MessageChannel)i="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){n(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(n,0)};else{var c=new e.MessageChannel;c.port1.onmessage=n,i=function(){c.port2.postMessage(0)}}var f,h=[];t.exports=r}).call(e,n("h6ac"))},wdwc:function(t,e,n){"use strict";function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var o=n("1ipf"),u=o.ShoppingListRepository,s=n("YrHc"),a=s.ShoppingListFactory,c=n("d18E"),f=c.Record;e.ShoppingListRepositoryPouchDB=function(t){function e(e){var n=r(this,t.call(this));return n.db=e,n._shoppingListFactory=new a,n}return i(e,t),e.prototype._guardShoppingList=function(t){if(!f.isRecord(t))throw new Error("Shopping List must be a Record");if(void 0===t._id)throw new Error("Shopping List _id must be set");if("list"!=t.type)throw new Error("Shopping List type must be list")},e.prototype._guardShoppingListItem=function(t){if(!f.isRecord(t))throw new Error("Shopping List Item must be a Record");if(void 0===t._id)throw new Error("Shopping List Item _id must be set");if("item"!=t.type)throw new Error("Shopping List Item type must be item")},e.prototype._guardRequest=function(t){if(!t)throw new Error("Request must be defined");if(!t.selector)throw new Error("Request must have a selector property");if(!t.selector.type)throw new Error("Request selector must have a type property")},e.prototype._guardShoppingListRequest=function(t){if(this._guardRequest(t),"list"!=t.selector.type)throw new Error("Request selector must have a type property with a value of 'list'")},e.prototype._guardShoppingListItemRequest=function(t){if(this._guardRequest(t),"item"!=t.selector.type)throw new Error("Request selector must have a type property with a value of 'item'")},e.prototype._put=function(t){var e=(new Date).toISOString();return t._rev||(t=t.mergeDeep({createdAt:e})),t=t.mergeDeep({updatedAt:e}),this.db.put(t.toJSON()).then(function(e){return t.mergeDeep({_id:e.id,_rev:e.rev})})},e.prototype._get=function(t){return this.db.get(t)},e.prototype._delete=function(t){var e=(new Date).toISOString();return t=t.mergeDeep({_deleted:!0,updatedAt:e}),this.db.put(t.toJSON()).then(function(e){return t.mergeDeep({_rev:e.rev})})},e.prototype._ensureIndexOfType=function(){return this.db.createIndex({index:{fields:["type"]}})},e.prototype._ensureIndexOfTypeAndList=function(){return this.db.createIndex({index:{fields:["type","list"]}})},e.prototype._ensureIndexOfTypeAndChecked=function(){return this.db.createIndex({index:{fields:["type","checked"]}})},e.prototype._ensureIndexOfTypeAndListAndChecked=function(){return this.db.createIndex({index:{fields:["type","list","checked"]}})},e.prototype.ensureIndexes=function(){return Promise.all([this._ensureIndexOfType(),this._ensureIndexOfTypeAndList(),this._ensureIndexOfTypeAndChecked(),this._ensureIndexOfTypeAndListAndChecked()])},e.prototype.put=function(t){return this._guardShoppingList(t),this._put(t)},e.prototype.putBulk=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.put(t))}),Promise.all(n).then(function(t){return e._shoppingListFactory.newListOfShoppingLists(t)})},e.prototype.get=function(t){var e=this;return this._get(t).then(function(t){var n=e._shoppingListFactory.newShoppingList(t);return e._guardShoppingList(n),n})},e.prototype.find=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selector:{type:"list"}};return this._guardShoppingListRequest(e),this.db.find(e).then(function(e){e.warning&&console.warn(e.warning);var n=t._shoppingListFactory.newListOfShoppingLists();return e.docs.forEach(function(e){n=n.push(t._shoppingListFactory.newShoppingList(e))}),n})},e.prototype.delete=function(t){var e=this;return this._guardShoppingList(t),this._delete(t).then(function(t){return e.deleteItemsBulkByFind({selector:{type:"item",list:t._id}}).then(function(){return t})})},e.prototype.putItem=function(t){return this._guardShoppingListItem(t),this._put(t)},e.prototype.putItemsBulk=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.putItem(t))}),Promise.all(n).then(function(t){return e._shoppingListFactory.newListOfShoppingListItems(t)})},e.prototype.getItem=function(t){var e=this;return this._get(t).then(function(t){var n=e._shoppingListFactory.newShoppingListItem(t);return e._guardShoppingListItem(n),n})},e.prototype.findItems=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selector:{type:"item"}};return this._guardShoppingListItemRequest(e),this.db.find(e).then(function(e){e.warning&&console.warn(e.warning);var n=t._shoppingListFactory.newListOfShoppingListItems();return e.docs.forEach(function(e){n=n.push(t._shoppingListFactory.newShoppingListItem(e))}),n})},e.prototype.findItemsCountByList=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selector:{type:"item"},fields:["list"]};if(t.fields&&!t.fields.includes("list"))throw new Error("Request must have a fields property that includes a value of 'list'");return this.findItems(t).then(function(t){return t.countBy(function(t){return t.list})})},e.prototype.deleteItem=function(t){return this._guardShoppingListItem(t),this._delete(t)},e.prototype.deleteItemsBulk=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.deleteItem(t))}),Promise.all(n).then(function(t){return e._shoppingListFactory.newListOfShoppingListItems(t)})},e.prototype.deleteItemsBulkByFind=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selector:{type:"item"}};if(e.fields)throw new Error("Request must not have a fields property");return this.findItems(e).then(function(e){return t.deleteItemsBulk(e)})},e}(u)},xz3w:function(t,e,n){"use strict";function r(){}function i(t){if("function"!=typeof t)throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,t!==r&&a(this,t)}function o(t,e,n){this.promise=t,"function"==typeof e&&(this.onFulfilled=e,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function u(t,e,n){d(function(){var r;try{r=e(n)}catch(e){return v.reject(t,e)}r===t?v.reject(t,new TypeError("Cannot resolve promise with itself")):v.resolve(t,r)})}function s(t){var e=t&&t.then;if(t&&("object"==typeof t||"function"==typeof t)&&"function"==typeof e)return function(){e.apply(t,arguments)}}function a(t,e){function n(e){o||(o=!0,v.reject(t,e))}function r(e){o||(o=!0,v.resolve(t,e))}function i(){e(r,n)}var o=!1,u=c(i);"error"===u.status&&n(u.value)}function c(t,e){var n={};try{n.value=t(e),n.status="success"}catch(t){n.status="error",n.value=t}return n}function f(t){return t instanceof this?t:v.resolve(new this(r),t)}function h(t){var e=new this(r);return v.reject(e,t)}function l(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var o=new Array(n),u=0,s=-1,a=new this(r);++s<n;)!function(t,r){function s(t){o[r]=t,++u!==n||i||(i=!0,v.resolve(a,o))}e.resolve(t).then(s,function(t){i||(i=!0,v.reject(a,t))})}(t[s],s);return a}function p(t){var e=this;if("[object Array]"!==Object.prototype.toString.call(t))return this.reject(new TypeError("must be an array"));var n=t.length,i=!1;if(!n)return this.resolve([]);for(var o=-1,u=new this(r);++o<n;)!function(t){e.resolve(t).then(function(t){i||(i=!0,v.resolve(u,t))},function(t){i||(i=!0,v.reject(u,t))})}(t[o]);return u}var d=n("uUPe"),v={},_=["REJECTED"],y=["FULFILLED"],g=["PENDING"];t.exports=i,i.prototype.catch=function(t){return this.then(null,t)},i.prototype.then=function(t,e){if("function"!=typeof t&&this.state===y||"function"!=typeof e&&this.state===_)return this;var n=new this.constructor(r);if(this.state!==g){u(n,this.state===y?t:e,this.outcome)}else this.queue.push(new o(n,t,e));return n},o.prototype.callFulfilled=function(t){v.resolve(this.promise,t)},o.prototype.otherCallFulfilled=function(t){u(this.promise,this.onFulfilled,t)},o.prototype.callRejected=function(t){v.reject(this.promise,t)},o.prototype.otherCallRejected=function(t){u(this.promise,this.onRejected,t)},v.resolve=function(t,e){var n=c(s,e);if("error"===n.status)return v.reject(t,n.value);var r=n.value;if(r)a(t,r);else{t.state=y,t.outcome=e;for(var i=-1,o=t.queue.length;++i<o;)t.queue[i].callFulfilled(e)}return t},v.reject=function(t,e){t.state=_,t.outcome=e;for(var n=-1,r=t.queue.length;++n<r;)t.queue[n].callRejected(e);return t},i.resolve=f,i.reject=h,i.all=l,i.race=p},y5CM:function(t,e,n){function r(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}function i(t){function n(){if(n.enabled){var t=n,r=+new Date;t.diff=r-(c||r),t.prev=c,t.curr=r,c=r;for(var i=new Array(arguments.length),o=0;o<i.length;o++)i[o]=arguments[o];i[0]=e.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,function(n,r){if("%%"===n)return n;u++;var o=e.formatters[r];if("function"==typeof o){n=o.call(t,i[u]),i.splice(u,1),u--}return n}),e.formatArgs.call(t,i);(n.log||e.log||console.log.bind(console)).apply(t,i)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=r(t),"function"==typeof e.init&&e.init(n),n}function o(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&(t=n[i].replace(/\*/g,".*?"),"-"===t[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))}function u(){e.enable("")}function s(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1}function a(t){return t instanceof Error?t.stack||t.message:t}e=t.exports=i.debug=i.default=i,e.coerce=a,e.disable=u,e.enable=o,e.enabled=s,e.humanize=n("6IAg"),e.names=[],e.skips=[],e.formatters={};var c}});
//# sourceMappingURL=bundle.71dd6.js.map